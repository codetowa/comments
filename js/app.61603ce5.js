(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0ad4":function(e,t,n){"use strict";n("b129")},"0fe4":function(e,t,n){"use strict";n("7a13")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},"139c":function(e,t,n){"use strict";n("b6f7")},"13c3":function(e,t,n){},14:function(e,t){},"19ba":function(e,t,n){"use strict";n("4dc4")},"1a00":function(e,t,n){},"1b8c":function(e,t,n){"use strict";n("1f43")},"1c64":function(e,t,n){"use strict";n("2ff8")},"1e3f":function(e,t,n){},"1f43":function(e,t,n){},2:function(e,t){},2146:function(e,t,n){},2325:function(e,t,n){},"236a":function(e,t,n){"use strict";n("5691")},2396:function(e,t,n){},2732:function(e,t,n){"use strict";n("2146")},"2d83a":function(e,t,n){"use strict";n("5c69")},"2ec7":function(e,t,n){"use strict";n("2325")},"2ff8":function(e,t,n){},3:function(e,t){},3269:function(e,t,n){},"32fd":function(e,t,n){"use strict";n("5d82")},"38b1":function(e,t,n){},"3a11":function(e,t,n){},4:function(e,t){},4053:function(e,t,n){"use strict";n("59f4")},4227:function(e,t,n){"use strict";n("9843")},4371:function(e,t,n){"use strict";n("986f")},"43cf":function(e,t,n){"use strict";n("4f35")},"43d3":function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="4678"},"4dc4":function(e,t,n){},"4f35":function(e,t,n){},5:function(e,t){},"51d2":function(e,t,n){"use strict";n("8398")},5329:function(e,t,n){"use strict";n("9ee7")},5351:function(e,t,n){"use strict";n("7fb4")},5691:function(e,t,n){},"59f4":function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5c69":function(e,t,n){},"5cf7":function(e,t,n){},"5d82":function(e,t,n){},6:function(e,t){},6201:function(e,t,n){"use strict";n("2396")},"6547d":function(e,t,n){"use strict";n("a018")},7:function(e,t){},7862:function(e,t,n){},"7a13":function(e,t,n){},"7fb4":function(e,t,n){},8:function(e,t){},8398:function(e,t,n){},"899c3":function(e,t,n){"use strict";n("43d3")},9:function(e,t){},9329:function(e,t,n){},"943f":function(e,t,n){"use strict";n("98e2")},9515:function(e,t,n){"use strict";n("b85a")},"95b1":function(e,t,n){"use strict";n("ff09")},9616:function(e,t,n){"use strict";n("bb12")},9843:function(e,t,n){},"986f":function(e,t,n){},"98e2":function(e,t,n){},"9a81":function(e,t,n){"use strict";n("3a11")},"9b10":function(e,t,n){},"9c0c":function(e,t,n){},"9eb9":function(e,t,n){"use strict";n("9329")},"9ee7":function(e,t,n){},a018:function(e,t,n){},a3ab:function(e,t,n){"use strict";n("1a00")},a4bf:function(e,t,n){},a53f:function(e,t,n){"use strict";n("1e3f")},b129:function(e,t,n){},b251:function(e,t,n){"use strict";n("a4bf")},b323:function(e,t,n){"use strict";n("5cf7")},b3ee:function(e,t,n){"use strict";n("3269")},b5c2:function(e,t,n){"use strict";n("d7c2")},b6f7:function(e,t,n){},b85a:function(e,t,n){},bb12:function(e,t,n){},be11:function(e,t,n){"use strict";n("7862")},c23c:function(e,t,n){"use strict";n("c410")},c410:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("4de4"),n("4160"),n("fb6a"),n("45fc"),n("b0c0"),n("b64b"),n("159b"),n("96cf");var r,a,o,i=n("1da1"),s=n("5530"),c=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"restrict-width",style:{background:"white"}},[n("TheLoader"),n("TheSnackbar"),n(e.layout,{tag:"component"}),e._l(e.listDialogs,(function(t,r){return[n(t,{key:t+r,tag:"component",model:{value:e.allowDialogs,callback:function(t){e.allowDialogs=t},expression:"allowDialogs"}})]}))],2)},l=[],d=n("2909"),p=n("d4ec"),m=n("bee2"),f=n("262e"),b=n("2caf"),v=n("9ab4"),g=n("60a3"),h=n("4bb5"),_="auth",j={namespace:_},O={getUser:"getUser",getToken:"getToken",getLang:"getLang",isLogged:"isLogged",isUserExpired:"isUserExpired",getCommentsOrder:"getCommentsOrder",getAuthedUser:"getAuthedUser"},y={updateToken:"updateToken",setUser:"setUser",updateUser:"updateUser",setLang:"setLang",setToken:"setToken",setCommentsOrder:"setCommentsOrder",setAuthedUser:"setAuthedUser"},w={handleLoginResponse:"handleLoginResponse",logout:"logout",reset:"reset",updateUser:"updateUser",setLang:"setLang",setToken:"setToken",createUser:"createUser",updateUserImg:"updateUserImg",setUser:"setUser",fetchUser:"fetchUser",setCommentsOrder:"setCommentsOrder",updateInfo:"updateInfo",signup:"signup",signin:"signin",fetchUserNickname:"fetchUserNickname",initApollo:"initApollo",fetchUserDetails:"fetchUserDetails",refreshToken:"refreshToken",signinGoogle:"signinGoogle",sendForgotEmail:"sendForgotEmail"},k={getUser:[O.getUser,j],isLogged:[O.isLogged,j],getLang:[O.getLang,j],getCommentsOrder:[O.getCommentsOrder,j],getAuthedUser:[O.getAuthedUser,j],isUserExpired:[O.isUserExpired,j],updateInfo:[w.updateInfo,j],logout:[w.logout,j],updateUser:[w.logout,j],setLang:[w.setLang,j],setToken:[w.setToken,j],createUser:[w.createUser,j],updateUserImg:[w.updateUserImg,j],fetchUser:[w.fetchUser,j],setCommentsOrder:[w.setCommentsOrder,j],signup:[w.signup,j],signin:[w.signin,j],fetchUserNickname:[w.fetchUserNickname,j],signinGoogle:[w.signinGoogle,j],sendForgotEmail:[w.sendForgotEmail,j],extReset:_+"/"+w.reset,extGetUser:_+"/"+O.getUser,extIsLogged:_+"/"+O.isLogged,extGetLang:_+"/"+O.getLang,extSetToken:_+"/"+w.setToken,extGetToken:_+"/"+O.getToken,extGetCommentsOrder:_+"/"+O.getCommentsOrder,extIsAuthUser:_+"/"+O.getAuthedUser,extLogout:_+"/"+w.logout,extInitApollo:_+"/"+w.initApollo,extFetchUserDetails:_+"/"+w.fetchUserDetails,extSigninGoogle:_+"/"+w.signinGoogle},x={resetAll:"resetAll",initApp:"initApp",myxios:"myxios"},S={initApp:x.initApp,resetAll:x.resetAll,myxios:x.myxios},C="history",R={namespace:C},U={getItems:"getItems",getCurrent:"getCurrent"},T={set:"set",push:"push",pop:"pop"},I={reset:"reset",push:"push",goBack:"goBack"},P={getCurrent:[U.getCurrent,R],getItems:[U.getItems,R],goBack:[I.goBack,R],push:[I.push,R],extReset:C+"/"+I.reset,extPush:C+"/"+I.push,extGoBack:C+"/"+I.goBack},E="tags",A={namespace:E},D={getRecords:"getRecords",getSubs:"getSubsj",listTags:"listTags",getIsSubsFetched:"getIsSubsFetched",getSubsTags:"getSubsTags"},F={setRecords:"setRecords",push:"push",subsSet:"subsSet",subsPush:"subsPush",subsDelete:"subsDelete",setIsSubsFetched:"setIsSubsFetched"},L={set:"set",subscribe:"subscribe",fetchSubs:"fetchSubs",subsDelete:"subsDelete"},$={getRecords:[D.getRecords,A],listTags:[D.listTags,A],getSubs:[D.getSubs,A],set:[L.set,A],subscribe:[L.subscribe,A],fetchSubs:[L.fetchSubs,A],subsDelete:[L.subsDelete,A],getIsSubsFetched:[D.getIsSubsFetched,A],extGetRecords:E+"/"+D.getRecords,extGetSubs:E+"/"+D.getSubs,extGetSubsTags:E+"/"+D.getSubsTags,extFetchSubs:E+"/"+L.fetchSubs},N=(n("99af"),n("ade3")),M="comments",V={namespace:M},B={getRecords:"getRecords"},q={set:"set",addRecord:"addRecord",update:"update"},G={set:"set",fetch:"fetch",create:"create",getRecords:"getRecords",update:"getRecords",delete:"delete",upvote:"upvote",upvoteReset:"upvoteReset",downvote:"downvote",downvoteReset:"downvoteReset",report:"report",fetchReplies:"fetchReplies",updateSoft:"updateSoft",fetchUserComments:"fetchUserComments",fetchReplyComment:"fetchReplyComment"},z={getRecords:[B.getRecords,V],set:[G.set,V],fetch:[G.fetch,V],create:[G.create,V],update:[G.update,V],delete:[G.delete,V],upvote:[G.upvote,V],upvoteReset:[G.upvoteReset,V],downvote:[G.downvote,V],downvoteReset:[G.downvoteReset,V],report:[G.report,V],fetchReplies:[G.fetchReplies,V],updateSoft:[G.updateSoft,V],fetchUserComments:[G.fetchUserComments,V],fetchReplyComment:[G.fetchReplyComment,V],extFetch:M+"/"+G.fetch};(function(e){e["best"]="best",e["newest"]="newest",e["oldest"]="oldest"})(o||(o={}));var W,H=(r={},Object(N["a"])(r,o.newest,"{createdAt: desc }"),Object(N["a"])(r,o.oldest,"{createdAt: asc }"),Object(N["a"])(r,o.best,"{comments_users_upvotes_aggregate: \n    {count: desc}}, {createdAt: desc }"),r),Y=(a={},Object(N["a"])(a,o.newest,(function(e){return'{createdAt: {_lte: "'.concat(e.createdAt,'"}}')})),Object(N["a"])(a,o.oldest,(function(e){return'{createdAt: {_gte: "'.concat(e.createdAt,'"}}')})),Object(N["a"])(a,o.best,(function(e){return'{_and:  [\n      {createdAt: { _lte: "'.concat(e.createdAt,'"}}\n      {upvotesCount: { _lte: "').concat(e.upvotesCount,'"}}\n    ]}')})),a),K="events",Q={namespace:K},J={getRecords:"getRecords",getCountUnread:"getCountUnread"},X={set:"set",setCountUnread:"setCountUnread",addRecord:"addRecord",update:"update"},Z={fetch:"fetch",updateComment:"updateComment",markRead:"markRead",countUnread:"countUnread"},ee={getRecords:[J.getRecords,Q],fetch:[Z.fetch,Q],updateComment:[Z.updateComment,Q],markRead:[Z.markRead,Q],countUnread:[Z.countUnread,Q],getCountUnread:[J.getCountUnread,Q],extFetch:K+"/"+Z.fetch,extCountUnread:K+"/"+Z.countUnread};(function(e){e["en"]="en",e["zh"]="zh-tw",e["ch"]="zh-cn",e["ru"]="ru"})(W||(W={}));var te={ShowLoader:"ShowLoader",ShowSnackbar:"ShowSnackbar",EventClaimed:"EventClaimed",FetchComments:"FetchComments"},ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.message.text?n("v-snackbar",{staticStyle:{"z-index":"1000000 !important"},attrs:{"multi-line":!0,timeout:e.DefaultTimeout,color:e.color},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{icon:"",color:"white",text:""},on:{click:function(t){e.show=!1}}},"v-btn",r,!1),[n("v-icon",[e._v("mdi-close")])],1)]}}],null,!1,2062548953),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"d-flex align-center",style:"border-radius: 0.5rem; box-shadow: 0px 0px 10px "+e.color},[e.message.icon?n("v-icon",{staticClass:"mr-4",attrs:{color:"white"}},[e._v(" "+e._s(e.message.icon)+" ")]):e._e(),n("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"1rem"},domProps:{innerHTML:e._s(e.message.text)}})],1)]):e._e()},re=[],ae=new c["default"],oe="mdi-information",ie=6e3,se=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.message={text:""},e.show=!0,e.timeoutFunc=void 0,e.color="#206fea",e.DefaultTimeout=ie,e}return Object(m["a"])(n,[{key:"mounted",value:function(){ae.$on(te.ShowSnackbar,this.onShowSnack)}},{key:"onShowSnack",value:function(e){var t=this,n=e.text,r=e.icon,a=e.color,o=void 0===a?"#206fea":a;this.message={text:n,icon:r||oe},this.show=!0,this.color=o,clearTimeout(this.timeoutFunc),this.timeoutFunc=setTimeout((function(){return t.show=!1}),ie)}}]),n}(g["e"]);se=Object(v["__decorate"])([Object(g["a"])({})],se);var ce=se,ue=ce,le=n("2877"),de=Object(le["a"])(ue,ne,re,!1,null,"e9689ef8",null),pe=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"t__fade"}},[e.loading?n("div",{attrs:{id:"loader-wrapper"}},[n("v-progress-linear",{attrs:{id:"loader",indeterminate:!0,color:"tag"}})],1):e._e()])},fe=[],be=1e3,ve=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.startTime=null,e}return Object(m["a"])(n,[{key:"mounted",value:function(){ae.$on(te.ShowLoader,this.onActivate)}},{key:"onActivate",value:function(){var e=this;this.start(),setTimeout((function(){return e.finish()}),1010)}},{key:"start",value:function(){this.startTime||(this.startTime=new Date),this.loading=!0}},{key:"finish",value:function(){var e=this;if(this.startTime){var t=new Date,n=t.valueOf()-this.startTime.valueOf();this.startTime=null,n<be?setTimeout((function(){e.loading=!1}),be-n):this.loading=!1}}}]),n}(g["e"]);ve=Object(v["__decorate"])([Object(g["a"])({})],ve);var ge=ve,he=ge,_e=(n("139c"),Object(le["a"])(he,me,fe,!1,null,"842814b6",null)),je=_e.exports,Oe=n("2ef0"),ye=n.n(Oe),we=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.resetDialogsOrder=!1,e.allowDialogs=!0,e}return Object(m["a"])(n,[{key:"refreshDialogs",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.resetDialogsOrder=!0,this.$nextTick((function(){return t.resetDialogsOrder=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAuthRequired",get:function(){return!!this.$route.meta.auth}},{key:"layout",get:function(){var e="default";return ye.a.capitalize(this.$route.meta.layout||e)+"Layout"}},{key:"listDialogs",get:function(){var e=[];return this.getHistory.slice().forEach((function(e){})),console.log("DIALOGS LIST UPDATED -> listDialogs:",e),e}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],we.prototype,"isLogged",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],we.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isUserExpired))],we.prototype,"isUserExpired",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(P.getCurrent))],we.prototype,"getCurrent",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(P.getItems))],we.prototype,"getHistory",void 0),Object(v["__decorate"])([Object(g["f"])("listDialogs")],we.prototype,"refreshDialogs",null),we=Object(v["__decorate"])([Object(g["a"])({components:{TheSnackbar:pe,TheLoader:je}})],we);var ke,xe,Se=we,Ce=Se,Re=(n("5c0b"),Object(le["a"])(Ce,u,l,!1,null,null,null)),Ue=Re.exports,Te=(n("d81d"),n("d3b7"),n("ddb0"),n("8c4f")),Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-page pt-5",class:{scrollable:!e.subpage}},[e.isMainPage?e._e():n("div",{staticClass:"d-flex"},[n("v-spacer"),n("SortingPanel")],1),e.loading&&!e.loadingMore||e.isMainPage?e._e():n("Comment",{attrs:{nonAuthed:!e.isLogged,isCreateMode:!0}}),e.isInit?n("Lister",{attrs:{records:e.comments,loading:e.loading,isThreadEnd:e.isThreadEnd,recordsPerPage:e.COMMENTS_PER_PAGE,iterable:e.Iterables.Comment,iterableOptions:{repliesAsRoot:e.repliesAsRoot},ctaText:"No comments yet"+(this.repliesAsRoot?"":" - BE FIRST")},on:{showmore:function(t){return e.fetchComments(!0)}}}):e._e()],1)},Pe=[],Ee=n("3835"),Ae=(n("7db0"),n("ac1f"),n("5319"),n("1276"),n("59ca")),De=n.n(Ae),Fe=(n("e71f"),n("8934"),n("588e"),n("ec26")),Le=n("a925");(function(e){e["AuthWrongPassword"]="AuthWrongPassword",e["AuthNoUser"]="AuthNoUser",e["PasswordConfirm"]="PasswordConfirm",e["Password"]="Password",e["CreateUserError"]="CreateUserError",e["Email"]="Email",e["Surname"]="Surname",e["ShopOwner"]="ShopOwner",e["Nickname"]="Nickname",e["PickAnImage"]="PickAnImage",e["Image"]="Image",e["Welcome"]="Welcome",e["FormDialogUpdateError"]="FormDialogUpdateError",e["FormDialogCreateError"]="FormDialogCreateError",e["Text"]="Text",e["Title"]="Title",e["Create"]="Create",e["Description"]="Description",e["Name"]="Name",e["ShopCreateSuccess"]="ShopCreateSuccess",e["RecordCreateSuccess"]="RecordCreateSuccess",e["RecordUpdateSuccess"]="RecordUpdateSuccess",e["Account"]="Account",e["UserNotFound"]="UserNotFound",e["ShopUnfollowConfirm"]="ShopUnfollowConfirm",e["ShopUnfollowConfirmBody"]="ShopUnfollowConfirmBody",e["Following"]="Following",e["Unfollow"]="Unfollow",e["Follow"]="Follow",e["Shops"]="Shops",e["DealNotFound"]="DealNotFound",e["NotFound"]="NotFound",e["Loading"]="Loading",e["AppName"]="AppName",e["Cancel"]="Cancel",e["Save"]="Save",e["Submit"]="Submit",e["UpdatedAt"]="UpdatedAt",e["Confirm"]="Confirm",e["Move"]="Move",e["Delete"]="Delete",e["Rename"]="Rename",e["logoutSuccess"]="logoutSuccess",e["Settings"]="Settings",e["Logout"]="Logout",e["Login"]="Login",e["Close"]="Close",e["Select"]="Select",e["DevVersion"]="DevVersion",e["Feed"]="Feed",e["MyShops"]="MyShops",e["SearchAll"]="SearchAll",e["VeeRequired"]="VeeRequired",e["VeeAcceptTos"]="VeeAcceptTos",e["VeeMax"]="VeeMax",e["VeeMin"]="VeeMin",e["VeeEmail"]="VeeEmail",e["VeeAlpha"]="VeeAlpha",e["VeeAlphaNum"]="VeeAlphaNum",e["VeeTruthy"]="VeeTruthy",e["VeePassword"]="VeePassword",e["WelcomeMsg"]="WelcomeMsg",e["passwordConfirm"]="passwordConfirm",e["MyBusiness"]="MyBusiness",e["ProvideEmail"]="ProvideEmail",e["ForgotPassword"]="ForgotPassword",e["PasswordRecovery"]="PasswordRecovery",e["SignUp"]="SignUp",e["SignUpCta"]="SignUpCta",e["CreateShop"]="CreateShop",e["NewPromo"]="NewPromo",e["SignIn"]="SignIn",e["Or"]="Or",e["NoShopsYet"]="NoShopsYet",e["ShopNotFound"]="ShopNotFound",e["UpdateImageHeader"]="UpdateImageHeader",e["UpdateImageAlmostThere"]="UpdateImageAlmostThere",e["AlmostThere"]="AlmostThere",e["UpdateImageCta"]="UpdateImageCta",e["Upload"]="Upload",e["Update"]="Update",e["UploadNew"]="UploadNew",e["Clear"]="Clear",e["ImageIsUpdated"]="ImageIsUpdated",e["DealType"]="DealType",e["Type"]="Type",e["BuyOneGetOne"]="BuyOneGetOne",e["BuyNGetOneFree"]="BuyNGetOneFree"})(ke||(ke={})),function(e){e["AuthWrongPassword"]="AuthWrongPassword",e["AuthNoUser"]="AuthNoUser",e["PasswordConfirm"]="PasswordConfirm",e["Password"]="Password",e["CreateUserError"]="CreateUserError",e["Email"]="Email",e["Surname"]="Surname",e["ShopOwner"]="ShopOwner",e["Nickname"]="Nickname",e["PickAnImage"]="PickAnImage",e["Image"]="Image",e["Welcome"]="Welcome{NAME}",e["FormDialogUpdateError"]="FormDialogUpdateError",e["FormDialogCreateError"]="FormDialogCreateError",e["Text"]="Text",e["Title"]="Title",e["Create"]="Create",e["Description"]="Description",e["Name"]="Name",e["ShopCreateSuccess"]="ShopCreateSuccess",e["RecordCreateSuccess"]="RecordCreateSuccess",e["RecordUpdateSuccess"]="RecordUpdateSuccess",e["Account"]="Account",e["UserNotFound"]="UserNotFound",e["ShopUnfollowConfirm"]="ShopUnfollowConfirm",e["ShopUnfollowConfirmBody"]="ShopUnfollowConfirmBody",e["Following"]="Following",e["Unfollow"]="Unfollow",e["Follow"]="Follow",e["Shops"]="Shops",e["DealNotFound"]="DealNotFound",e["NotFound"]="NotFound",e["Loading"]="Loading",e["AppName"]="AppName",e["Cancel"]="Cancel",e["Save"]="Save",e["Submit"]="Submit",e["UpdatedAt"]="UpdatedAt",e["Confirm"]="Confirm",e["Move"]="Move",e["Delete"]="Delete",e["Rename"]="Rename",e["logoutSuccess"]="logoutSuccess",e["Settings"]="Settings",e["Logout"]="Logout",e["Login"]="Login",e["Close"]="Close",e["Select"]="Select",e["DevVersion"]="DevVersion",e["Feed"]="Feed",e["MyShops"]="MyShops",e["SearchAll"]="SearchAll",e["VeeRequired"]="VeeRequired{_field_}",e["VeeAcceptTos"]="VeeAcceptTos",e["VeeMax"]="VeeMax{_field_},{length}",e["VeeMin"]="VeeMin{_field_},{length}",e["VeeEmail"]="VeeEmail",e["VeeAlpha"]="VeeAlpha{_field_}",e["VeeAlphaNum"]="VeeAlphaNum{_field_}",e["VeeTruthy"]="VeeTruthy{_field_}",e["VeePassword"]="VeePassword",e["WelcomeMsg"]="WelcomeMsg",e["passwordConfirm"]="passwordConfirm",e["MyBusiness"]="MyBusiness",e["ProvideEmail"]="ProvideEmail",e["ForgotPassword"]="ForgotPassword",e["PasswordRecovery"]="PasswordRecovery",e["SignUp"]="SignUp",e["SignUpCta"]="SignUpCta",e["CreateShop"]="CreateShop",e["NewPromo"]="NewPromo",e["SignIn"]="SignIn",e["Or"]="Or",e["NoShopsYet"]="NoShopsYet",e["ShopNotFound"]="ShopNotFound",e["UpdateImageHeader"]="UpdateImageHeader",e["UpdateImageAlmostThere"]="UpdateImageAlmostThere",e["AlmostThere"]="AlmostThere",e["UpdateImageCta"]="UpdateImageCta",e["Upload"]="Upload",e["Update"]="Update",e["UploadNew"]="UploadNew",e["Clear"]="Clear",e["ImageIsUpdated"]="ImageIsUpdated",e["DealType"]="DealType",e["Type"]="Type",e["BuyOneGetOne"]="BuyOneGetOne",e["BuyNGetOneFree"]="BuyNGetOneFree"}(xe||(xe={}));var $e={en:{AuthWrongPassword:"Wrong password",AuthNoUser:"User by this email is not found",PasswordConfirm:"Confirm password",Password:"Password",CreateUserError:"Error updating profile, please try again later",Email:"Email",Surname:"Surname",ShopOwner:"I am shop owner",Nickname:"Nickname",PickAnImage:"Pick an image",Image:"Image","Welcome{NAME}":"Welcome {NAME}!",FormDialogUpdateError:"Problem updating record, please try again later",FormDialogCreateError:"Problem creating record, please try again later",Text:"Text",Title:"Title",Create:"Create",Description:"Description",Name:"Name",ShopCreateSuccess:"Shop is updated",RecordCreateSuccess:"Record is created",RecordUpdateSuccess:"Record is updated",Account:"Account",UserNotFound:"User not found",Deals:"Deals",ShopUnfollowConfirm:"Do you want to unfollow this shop?",ShopUnfollowConfirmBody:"You won't receive notifications about shops promotions anymore.",Following:"Following ",Unfollow:"Unfollow",Follow:"Follow",Shops:"Shops",DealNotFound:"Deal is not found",NotFound:"Not found",Loading:"Loading...",AppName:"Deals",Cancel:"Cancel",Save:"Save",Submit:"Submit",UpdatedAt:"Updated At",Confirm:"Confirm",Move:"Move",Delete:"Delete",Rename:"Rename",logoutSuccess:"You have been signed out",Settings:"Settings",Logout:"Logout",Login:"Login",Close:"Close",Select:"Select",DevVersion:"Dev: App Version",Feed:"Feed",MyShops:"My Shops",SearchAll:"Search deals by food or shop...","VeeRequired{_field_}":"{_field_} can not be empty",VeeAcceptTos:"Please accept Terms of Service and Privacy Policy","VeeMax{_field_},{length}":"{_field_} may not be greater than {length} characters","VeeMin{_field_},{length}":"{_field_} may not be less than {length} characters",VeeEmail:"Email must be valid","VeeAlpha{_field_}":"{_field_} should be letters-only","VeeAlphaNum{_field_}":"{_field_} should contain only letters and digits","VeeTruthy{_field_}":"{_field_} should be set",VeePassword:"Password confirmation does not match",WelcomeMsg:"Hi, before we begin tell us a bit more about yourself...",passwordConfirm:"Confirm password",MyBusiness:"My Business",MyDeals:"My Deals",ProvideEmail:"Please input your email",ForgotPassword:"Forgot Password",PasswordRecovery:"Password Recovery",SignUp:"Sign Up",SignUpCta:"Please input your email and create password",CreateShop:"Create Shop",NewPromo:"New Promo",SignIn:"Sign In",Or:"Or",NoDealsYet:"No Deals Yet",NoShopsYet:"No Shops Yet",ShopNotFound:"Shop is not found",UpdateImageHeader:"Almost there...",UpdateImageAlmostThere:"Almost there...",AlmostThere:"Almost there...",UpdateImageCta:"If you want you can update your profile picture, or do it later",Upload:"Upload",Update:"Update",UploadNew:"Upload New",Clear:"Clear",ImageIsUpdated:"Image is updated",DealType:"Deal type",Type:"Type",BuyOneGetOne:"Buy 1 get 1 free",BuyNGetOneFree:"Buy N Get One Free"},"zh-tw":{AuthWrongPassword:"密碼錯誤",AuthNoUser:"用戶通過此郵件中未找到",PasswordConfirm:"確認密碼",Password:"密碼",CreateUserError:"錯誤更新個人資料，請稍後再試",Email:"電子郵件",Surname:"姓",ShopOwner:"我是店主",Nickname:"暱稱",PickAnImage:"選擇一個圖像",Image:"圖片","Welcome{NAME}":"歡迎{NAME}！",FormDialogUpdateError:"問題的更新記錄，請稍後再試",FormDialogCreateError:"問題創造紀錄，請稍後再試",Text:"文本",Title:"標題",Create:"創造",Description:"描述",Name:"名稱",ShopCreateSuccess:"店鋪被更新",RecordCreateSuccess:"創建記錄",RecordUpdateSuccess:"記錄更新",Account:"帳戶",UserNotFound:"用戶未找到",Deals:"交易",ShopUnfollowConfirm:"你想停止關注這個店？",ShopUnfollowConfirmBody:"您將不會收到關於商店促銷活動的通知了。",Following:"以下",Unfollow:"取消關注",Follow:"跟隨",Shops:"商店",DealNotFound:"新政未找到",NotFound:"未找到",Loading:"載入中...",AppName:"交易",Cancel:"取消",Save:"保存",Submit:"提交",UpdatedAt:"更新時間",Confirm:"確認",Move:"移動",Delete:"刪除",Rename:"改名",logoutSuccess:"您已經登出",Settings:"設置",Logout:"登出",Login:"登錄",Close:"關",Select:"選擇",DevVersion:"開發：應用程序版本",Feed:"飼料",MyShops:"我的商店",SearchAll:"搜索由食物或商店交易...","VeeRequired{_field_}":"{_field_}不能為空",VeeAcceptTos:"請接受服務條款和隱私權政策","VeeMax{_field_}":"{_field_}可以不大於{長度}字符的","VeeMin{_field_}":"{_field_}可能不小於{長度}個字符",VeeEmail:"電子郵件必須是有效的",VeeAlpha:"{} _field_應該是字母，只",VeeAlphaNum:"{} _field_應該只包含字母和數字",VeeTruthy:"{} _field_應設置",VeePassword:"確認密碼不匹配",WelcomeMsg:"嗨，我們開始之前告訴我們一點關於自己...",passwordConfirm:"確認密碼",MyBusiness:"我的事",MyDeals:"我的交易",ProvideEmail:"請輸入您的Email",ForgotPassword:"忘記密碼",PasswordRecovery:"找回密碼",SignUp:"註冊",SignUpCta:"請輸入您的電子郵件地址和密碼創建",CreateShop:"創店",NewPromo:"新促銷",SignIn:"登入",Or:"要么"},"zh-cn":{AuthWrongPassword:"密码错误",AuthNoUser:"用户通过此邮件中未找到",PasswordConfirm:"确认密码",Password:"密码",CreateUserError:"错误更新个人资料，请稍后再试",Email:"电子邮件",Surname:"姓",ShopOwner:"我是店主",Nickname:"昵称",PickAnImage:"选择一个图像",Image:"图片","Welcome{NAME}":"欢迎{NAME}！",FormDialogUpdateError:"问题的更新记录，请稍后再试",FormDialogCreateError:"问题创造纪录，请稍后再试",Text:"文本",Title:"标题",Create:"创造",Description:"描述",Name:"名称",ShopCreateSuccess:"店铺被更新",RecordCreateSuccess:"创建记录",RecordUpdateSuccess:"记录更新",Account:"帐户",UserNotFound:"用户未找到",Deals:"交易",ShopUnfollowConfirm:"你想停止关注这个店？",ShopUnfollowConfirmBody:"您将不会收到关于商店促销活动的通知了。",Following:"以下",Unfollow:"取消关注",Follow:"跟随",Shops:"商店",DealNotFound:"新政未找到",NotFound:"未找到",Loading:"载入中...",AppName:"交易",Cancel:"取消",Save:"保存",Submit:"提交",UpdatedAt:"更新时间",Confirm:"确认",Move:"移动",Delete:"删除",Rename:"改名",logoutSuccess:"您已经登出",Settings:"设置",Logout:"登出",Login:"登录",Close:"关",Select:"选择",DevVersion:"开发：应用程序版本",Feed:"饲料",MyShops:"我的商店",SearchAll:"搜索由食物或商店交易...","VeeRequired{_field_}":"{_field_}不能为空",VeeAcceptTos:"请接受服务条款和隐私权政策","VeeMax{_field_}":"{_field_}可以不大于{长度}字符的","VeeMin{_field_}":"{_field_}可能不小于{长度}个字符",VeeEmail:"电子邮件必须是有效的",VeeAlpha:"{} _field_应该是字母，只",VeeAlphaNum:"{} _field_应该只包含字母和数字",VeeTruthy:"{} _field_应设置",VeePassword:"确认密码不匹配",WelcomeMsg:"嗨，我们开始之前告诉我们一点关于自己...",passwordConfirm:"确认密码",MyBusiness:"我的事",MyDeals:"我的交易",ProvideEmail:"请输入您的Email",ForgotPassword:"忘记密码",PasswordRecovery:"找回密码",SignUp:"注册",SignUpCta:"请输入您的电子邮件地址和密码创建",CreateShop:"创店",NewPromo:"新促销",SignIn:"登入",Or:"要么"},ru:{AuthWrongPassword:"Неправильный пароль",AuthNoUser:"Пользователь в этом письме не найден",PasswordConfirm:"Подтвердите Пароль",Password:"пароль",CreateUserError:"Ошибка профиля обновления, пожалуйста, повторите попытку позже",Email:"Эл. адрес",Surname:"Фамилия",ShopOwner:"Я владелец магазина",Nickname:"кличка",PickAnImage:"Выберите изображение",Image:"Образ","Welcome{NAME}":"Добро пожаловать {NAME}!",FormDialogUpdateError:"Проблема обновления записи, пожалуйста, повторите попытку позже",FormDialogCreateError:"Проблема создания записи, пожалуйста, повторите попытку позже",Text:"Текст",Title:"заглавие",Create:"Создайте",Description:"Описание",Name:"название",ShopCreateSuccess:"Магазин обновляется",RecordCreateSuccess:"Запись создана",RecordUpdateSuccess:"Запись обновляется",Account:"учетная запись",UserNotFound:"Пользователь не найден",Deals:"предложения",ShopUnfollowConfirm:"Вы хотите неследовать этот магазин?",ShopUnfollowConfirmBody:"Вы не будете получать уведомления о магазинах акциях больше.",Following:"Следующий",Unfollow:"Отписаться",Follow:"следить",Shops:"Магазины",DealNotFound:"Сделка не найден",NotFound:"Не найден",Loading:"Loading ...",AppName:"предложения",Cancel:"Отмена",Save:"Сохранить",Submit:"Отправить",UpdatedAt:"Обновлено В",Confirm:"Подтверждение",Move:"Шаг",Delete:"Удалить",Rename:"Rename",logoutSuccess:"Вы вышли из системы",Settings:"настройки",Logout:"Выйти",Login:"Авторизоваться",Close:"близко",Select:"Выбрать",DevVersion:"Dev: Версия приложения",Feed:"Подача",MyShops:"Мои магазины",SearchAll:"Поиск сделок от еды или магазина ...","VeeRequired{_Field_}":"{_Field_} не может быть пустым",VeeAcceptTos:"Пожалуйста, примите Условия предоставления услуг и Политика конфиденциальности","VeeMax{_Field_}":"{_Field_} не может быть больше, чем длина {} символов","VeeMin{_Field_}":"{_Field_} не может быть меньше, чем {длина} символов",VeeEmail:"E-mail должен быть действительным","VeeAlpha{_Field_}":"{_Field_} должны быть буквы только","VeeAlphaNum{_Field_}":"{_Field_} должен содержать только буквы и цифры",VeeTruthy:"{} _Field_ должен быть установлен",VeePassword:"Подтверждение пароля не совпадают",WelcomeMsg:"Привет, прежде чем мы начнем рассказать нам немного о себе ...",passwordConfirm:"Подтвердите Пароль",MyBusiness:"Мой бизнес",MyDeals:"Мои предложения",ProvideEmail:"Пожалуйста, введите ваш адрес электронной почты",ForgotPassword:"Забыли пароль",PasswordRecovery:"Восстановление пароля",SignUp:"Зарегистрироваться",SignUpCta:"Пожалуйста, введите ваш адрес электронной почты и создать пароль",CreateShop:"Создать магазин",NewPromo:"Новый Promo",SignIn:"Войти в систему",Or:"Или"}};c["default"].use(Le["a"]);var Ne,Me=new Le["a"]({locale:"en",fallbackLocale:"en",messages:$e}),Ve=Object(s["a"])({},ke);Object.keys(ke).forEach((function(e){if(e in ke){var t=xe[e];Ve[e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return String(Me.t(t,e))}}})),c["default"].prototype.$txt=Ve,function(e){e["textfield"]="textfield",e["password"]="password",e["passwordConfirm"]="passwordConfirm",e["textarea"]="textarea",e["select"]="select",e["iconSelect"]="iconSelect",e["switch"]="switch",e["checkbox"]="checkbox",e["image"]="image",e["number"]="number",e["positionLat"]="positionLat",e["positionLng"]="positionLng",e["date"]="date",e["dateRange"]="dateRange",e["tags"]="tags"}(Ne||(Ne={}));var Be,qe=function(e){return String(Me.t(e))},Ge={password:"required|min:6|max:30",userName:"required|min:2|max:50",userSurname:"required|min:2|max:50",nickname:"required|min:5|max:50",positionLat:"required|min:-90|max:90",positionLng:"required|min:-180|max:180",required:"required"},ze=function(){return{email:{value:"",inputType:Ne.textfield,label:qe(xe.Email),rules:"required|email"},password:{value:"",inputType:Ne.password,label:qe(xe.Password),rules:Ge.password}}},We=function(){return{email:{value:"",inputType:Ne.textfield,label:qe(xe.Email),rules:"required|email"}}},He=function(){return{email:{value:"",inputType:Ne.textfield,label:qe(xe.Email),rules:"required|email"},password:{value:"",inputType:Ne.password,label:qe(xe.Password),rules:Ge.password},passwordConfirm:{value:"",inputType:Ne.passwordConfirm,label:qe(xe.PasswordConfirm),rules:"required|password:@password"},nickname:{value:"",inputType:Ne.textfield,label:qe(xe.Nickname),rules:Ge.nickname},isTosAccept:{value:!1,inputType:Ne.checkbox,label:"I accept Terms of Service and Privacy Policy",rules:"requiredTos"}}},Ye=function(){return{name:{value:"",inputType:Ne.textfield,label:qe(xe.Name),rules:Ge.userName},surname:{value:"",inputType:Ne.textfield,label:qe(xe.Surname),rules:Ge.userSurname},nickname:{value:"",inputType:Ne.textfield,label:qe(xe.Nickname),rules:Ge.nickname}}},Ke={signin:ze,signup:He,forgot:We,settings:Ye},Qe=Ke,Je="production",Xe=[W.en,W.zh,W.ch,W.ru],Ze="wss://comments-be.herokuapp.com/v1/graphql",et="https://comments-be.herokuapp.com/v1/graphql",tt=Object({VUE_APP_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",VUE_APP_FIREBASE_DOMAIN:"deals-4444.firebaseapp.com",VUE_APP_FIREBASE_DATABASE_URL:"https://deals-4444.firebaseio.com",VUE_APP_FIREBASE_PROJECT_ID:"deals-4444",VUE_APP_FIREBASE_STORAGE_BUCKET:"deals-4444.appspot.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"517989331714",VUE_APP_FIREBASE_APP_ID:"1:517989331714:web:42121ebf75795360c6481b",VUE_APP_TRANSLATE_URL:"1DAeqGHMvrAPT8fj6Owi_H149_KNhJDS6p1f1UpmghIU",VUE_APP_TRANSLATE_KEY:"AIzaSyCRRjXZ1BFSWo7Dkc5q9SVkmTCLIKORSNk",VUE_APP_BACKEND_URL:"wss://comments-be.herokuapp.com/v1/graphql",VUE_APP_URL_TOKEN_REFRESH:"https://us-central1-deals-4444.cloudfunctions.net/refreshToken",NODE_ENV:"production",VUE_APP_BACKEND_URL_HTTP:"https://comments-be.herokuapp.com/v1/graphql",VUE_APP_GOOGLE_MAPS_KEY:"AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",BASE_URL:"/"}).VUE_APP_GIT_HASH,nt=Object({VUE_APP_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",VUE_APP_FIREBASE_DOMAIN:"deals-4444.firebaseapp.com",VUE_APP_FIREBASE_DATABASE_URL:"https://deals-4444.firebaseio.com",VUE_APP_FIREBASE_PROJECT_ID:"deals-4444",VUE_APP_FIREBASE_STORAGE_BUCKET:"deals-4444.appspot.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"517989331714",VUE_APP_FIREBASE_APP_ID:"1:517989331714:web:42121ebf75795360c6481b",VUE_APP_TRANSLATE_URL:"1DAeqGHMvrAPT8fj6Owi_H149_KNhJDS6p1f1UpmghIU",VUE_APP_TRANSLATE_KEY:"AIzaSyCRRjXZ1BFSWo7Dkc5q9SVkmTCLIKORSNk",VUE_APP_BACKEND_URL:"wss://comments-be.herokuapp.com/v1/graphql",VUE_APP_URL_TOKEN_REFRESH:"https://us-central1-deals-4444.cloudfunctions.net/refreshToken",NODE_ENV:"production",VUE_APP_BACKEND_URL_HTTP:"https://comments-be.herokuapp.com/v1/graphql",VUE_APP_GOOGLE_MAPS_KEY:"AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",BASE_URL:"/"}).VUE_APP_TOKEN_REFRESH_URL||"",rt=function(e){return"".concat(nt,"?uid=").concat(e)},at="/img/user-img-default.jpg",ot=!0,it="/img/CoffeeCupCartoon.png",st="https://identitytoolkit.googleapis.com/v1",ct="AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",ut="AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",lt=20,dt=20,pt={apiKey:"AIzaSyBYT9Qav11og1_w7HVyJDosaFb611DQ0eo",authDomain:"deals-4444.firebaseapp.com",projectId:"deals-4444",storageBucket:"deals-4444.appspot.com",messagingSenderId:"517989331714"},mt={Comment:"Comment",Event:"Event"},ft={chromeExtension:"chrome-extension",web:"web"},bt=function(){return Je===ft.chromeExtension},vt="Please login in order to vote",gt={env:Je,allowedLang:Xe,versionHash:tt,authUrl:st,getRefreshUrl:rt,isGqlDebug:!0,pageSize:5,userDefaultImg:at,isStoreDebug:ot,notFoundImg:it,backendUrl:Ze,backendUrlHttp:et,iterables:mt,allowedEnv:ft,TextLoginToVote:vt,isChromeExtension:bt},ht=n("359c"),_t=n.n(ht),jt=function(e){return function(t){var n=t.id;return n===e}},Ot=function(e){return e.then((function(e){return[null,e]})).catch((function(e){return console.error("Promise error:",e),[e]}))},yt={root:!0};(function(e){e["users"]="users"})(Be||(Be={}));var wt=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c,u,l,d,p,m,f,b,v,g,h,_,j,O,y,w,k,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(De.a.apps.length){e.next=11;break}return De.a.initializeApp(pt),a=De.a.auth().signInWithEmailAndPassword(n,r),e.next=5,Ot(a);case 5:if(o=e.sent,i=Object(Ee["a"])(o,1),s=i[0],!s){e.next=11;break}return console.error("error uploading image, auth:",s),e.abrupt("return",Promise.reject());case 11:if(c=De.a.storage(),u=t.file,l=t.owner,d=t.folder,p=t.fileName,u){e.next=15;break}return e.abrupt("return",Promise.reject(["No file"]));case 15:return m={owner:l},f=p,p||(b=Object(Fe["a"])(),v=null===u||void 0===u?void 0:u.name.split(".").pop(),f="".concat(b,".").concat(v)),g="".concat(d,"/").concat(f),h=c.ref(),_=h.child(g),j=_.put(u,{customMetadata:m}),e.next=24,Ot(j);case 24:if(O=e.sent,y=Object(Ee["a"])(O,2),w=y[0],k=y[1],!w){e.next=30;break}return e.abrupt("return",Promise.reject(w));case 30:return console.log("Uploaded image, snapshot ",k),x="https://storage.googleapis.com/deals-4444.appspot.com/".concat(g),e.abrupt("return",[w,x]);case 33:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/*";return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))},xt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.readAsDataURL(e)}))},St=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=Object(s["a"])({},t),e.t0=regeneratorRuntime.keys(r);case 2:if((e.t1=e.t0()).done){e.next=14;break}if(a=e.t1.value,o=r[a],o.value=n[a],o.inputType!==Ne.image){e.next=11;break}return e.next=9,kt(o.value,"img.jpg","image/jpeg");case 9:i=e.sent,o.value=i;case 11:o.hidden=o.noEdit,e.next=2;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ct=function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return window.setTimeout(t,e)}))};var Ut,Tt=function(){return{id:"",text:"",createdAt:"",parentId:void 0,upvotes:0,upvotesUsers:[],iUpvote:!1,iDownvote:!1,parent:void 0}},It=function(e){console.error("Error occured: ",e)},Pt=function(e,t){return e(S.myxios,t,yt)},Et=function(e,t){return Ot(Pt(e,t))},At=function(){var e=_t.a.commerce.productAdjective(),t=_t.a.hacker.adjective(),n=_t.a.company.bsNoun(),r=ye.a.capitalize(e)+ye.a.capitalize(t)+ye.a.capitalize(n);return r.replace(/-/g,"").replace(/ /g,"")},Dt=function(e){return"string"===typeof e?[e]:e},Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sorting-panel"},[n("v-menu",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"sorting-btn ml-3",class:{"ml-0":e.$vuetify.breakpoint.mdAndDown},attrs:{color:"#444444",dark:"",small:"",text:""}},"v-btn",a,!1),r),[n("span",{class:{"d-none":e.$vuetify.breakpoint.xs}},[e._v(" Sort By ")]),n("span",{staticClass:"ml-1 "},[e._v(" "+e._s(e.getOrder)+" ")]),n("v-icon",{attrs:{color:"#888888"}},[e._v("mdi-menu-down")])],1)]}}])},[n("v-list",{staticClass:"orders"},e._l(e.Sorts,(function(t){return n("v-list-item",{key:t,class:{disabled:e.vuexGetOrder===t},on:{click:function(n){return e.select(t)}}},[n("v-list-item-title",[e._v(e._s(e._f("capitalize")(t)))])],1)})),1)],1)],1)},Lt=[];(function(e){e["best"]="best",e["newest"]="newest",e["oldest"]="oldest"})(Ut||(Ut={}));var $t=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.Sorts=Ut,e.menu=!1,e}return Object(m["a"])(n,[{key:"select",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setOrder(t);case 2:ae.$emit(te.FetchComments);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOrder",get:function(){return this.vuexGetOrder}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getCommentsOrder))],$t.prototype,"vuexGetOrder",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.setCommentsOrder))],$t.prototype,"setOrder",void 0),$t=Object(v["__decorate"])([Object(g["a"])({components:{}})],$t);var Nt=$t,Mt=Nt,Vt=(n("db56"),Object(le["a"])(Mt,Ft,Lt,!1,null,null,null)),Bt=Vt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.isDeleted||e.item&&e.anyReplies&&e.isReplyComments?n("v-card",{staticClass:"comment",class:{expandable:e.isExpandable},attrs:{flat:""}},[n("v-list-item",{class:{"px-0":e.isChild},attrs:{"three-line":""}},[n("v-list-item-avatar",{staticClass:"rounded",attrs:{size:e.isChild||e.isCollapsed?45:60,tile:"",color:"grey"}},[n("Img",{attrs:{src:e.comment.user&&e.comment.user.img,default:e.$config.userDefaultImg,width:e.isChild||e.isCollapsed?"45px":"60px",height:e.isChild||e.isCollapsed?"45px":"60px",round:"10px"}})],1),n("v-list-item-content",{style:e.isCollapsed?"align-self: start;":""},[n("div",{staticClass:"comment-content"},[n("div",{staticClass:"header__wrapper"},[e.isCreateMode?e._e():n("div",{staticClass:"header d-flex align-center"},[e.comment.user?n("router-link",{attrs:{to:{name:e.Routes.profile.name,params:{userId:e.comment.user&&e.comment.user.id}}}},[n("div",{staticClass:"header__user"},[e._v(" "+e._s(e.comment.user.nickname)+" ")])]):e.replyTo?n("span",{staticClass:"grey--text"},[e._v(" Deleted ")]):e._e(),e.isReply?n("div",{staticClass:"d-flex align-center"},[e.isReplyMode?[e.isReplyRoot?e._e():[n("v-icon",{staticClass:"ml-2 mr-2",attrs:{small:""}},[e._v("mdi-redo")]),e.replyTo?n("router-link",{attrs:{to:{name:e.Routes.profile.name,params:{userId:e.replyTo.id}}}},[n("div",{staticClass:"header__user--replied "},[e._v(" "+e._s(e.replyTo.nickname)+" ")])]):n("span",{staticClass:"grey--text"},[e._v(" Deleted ")])]]:e.item&&e.item.parentId!==e.item.threadId?[n("v-icon",{staticClass:"ml-2 mr-2",attrs:{small:""}},[e._v("mdi-redo")]),e.replyTo?n("router-link",{attrs:{to:{name:e.Routes.profile.name,params:{userId:e.replyTo.id}}}},[n("div",{staticClass:"header__user--replied "},[e._v(" "+e._s(e.replyTo.nickname)+" ")])]):n("span",{staticClass:"grey--text"},[e._v(" Deleted ")])]:e._e()],2):e._e(),e.comment.createdAt&&!e.isDeleted?n("div",{staticClass:"header__date ml-3 mr-3"},[e._v(" "+e._s(e._f("formatAgo")(e.comment.createdAt))+" ")]):e._e(),e.isRoot||e.repliesAsRoot?[e.isOutlinedVisible?e._l(e.tagsOutlined,(function(t){return n("Tag",{key:t.name,attrs:{hlUser:e.repliesAsRoot?e.comment.user&&e.comment.user.id:"",tag:t.name,outlined:t.match,small:!0,isLast:t===e.tags[e.tags.length-1]}})})):e.tagsOutlined.length>0?[n("v-btn",{attrs:{color:"tag",icon:"",small:""},on:{click:function(t){e.isOutlinedVisible=!0}}},[n("v-icon",[e._v("mdi-dots-horizontal")])],1)]:e._e(),e._l(e.tagsNonOutlined,(function(t){return n("Tag",{key:t.name,attrs:{hlUser:e.repliesAsRoot?e.comment.user&&e.comment.user.id:"",tag:t.name,outlined:t.match,small:!0,isLast:t===e.tags[e.tags.length-1]}})})),e.isTagsMatch?e._e():n("TagsubBtn",{attrs:{hlUser:e.repliesAsRoot?e.comment.user&&e.comment.user.id:"",tags:e.tagsList}})]:e._e()],2),n("div",{staticClass:"header__menu"},[n("v-spacer"),e.isEditing?e._e():n("CommentMenu",{staticClass:"comment-menu",attrs:{isCollapsed:e.isCollapsed,isDeleted:e.isDeleted,isOwner:e.isOwner},on:{edit:e.goEditMode,destroy:function(t){e.isConfirmDelete=!0},minify:function(t){e.isCollapsed=!e.isCollapsed},report:function(t){e.isReportDialog=!0}}})],1)]),e.isDeleted?n("div",{ref:"msg",staticClass:"mb-3 grey--text"},[e._v(" This comment has been deleted ")]):e._e(),e.isCollapsed?e._e():[e.isEditing?n("div",[n("v-textarea",{ref:"commentTextarea",attrs:{loading:e.loading,readonly:e.loading,counter:e.getCounter,disabled:e.nonAuthed,placeholder:e.nonAuthed?"Please login to write comments":"Write something here...",rows:"3",dense:"",outlined:"",name:"input-7-4",color:"lightBlue","hide-details":"auto"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:e.onSave(t):null}},model:{value:e.editedText,callback:function(t){e.editedText=t},expression:"editedText"}}),n("div",{staticClass:"d-flex mt-2"},[n("v-spacer"),e.isEditMode||e.isReplyMode?n("v-btn",{attrs:{small:"",outlined:""},on:{click:e.exitEditing}},[e._v(" Cancel ")]):e._e(),n("v-btn",{staticClass:"ml-4 ",class:{"disable-events":e.loading},attrs:{small:"",color:"#0088ff",outlined:"",disabled:!e.isEditValid,loading:e.loading},on:{click:e.onSave}},[e._v(" Save ")])],1)],1):n("div",{ref:"msg",staticClass:"comment-text mt-1",class:{expanded:e.isExpanded}},[e._v(" "+e._s(e.comment.text)+" ")]),e.isDeleted?void 0:[e.isEditing?e._e():n("CommentVotes",{staticClass:"mt-3",attrs:{comment:e.item,upvotesUsers:e.comment.upvotes,downvotesUsers:e.comment.downvotes},on:{"emit-update":e.updateSoft}}),e.isEditing?e._e():[e.isTagsPage?n("span",{staticClass:"ml-4 reply-btn",on:{click:function(t){return e.onClickReply(e.item)}}},[e._v(" Reply ")]):n("router-link",{staticClass:"ml-4 reply-btn",attrs:{to:e.getReplyRoute}},[e._v(" Reply ")])],e.isRoot&&e.repliesCount&&e.item&&!e.anyReplies?n("v-btn",{staticClass:"ml-5 view-replies",class:{"disable-events":e.loading},attrs:{loading:e.loadingReplies,text:"",small:""},on:{click:e.viewReplies}},[e._v(" View "+e._s(e.repliesCount)+" replies ")]):e._e()]]],2),!e.isCollapsed&&e.item?n("div",{ref:"replies",staticClass:"comment-replies"},[e._l(e.item.replies,(function(t){return n("Comment",{key:t.id,attrs:{item:t},on:{reply:e.replyToComment}})})),e.isRoot&&e.repliesCount&&e.anyReplies&&e.item.replies.length<e.repliesCount?n("v-btn",{staticClass:"ml-5 view-replies",class:{"disable-events":e.loading},attrs:{loading:e.loadingReplies,text:"",small:""},on:{click:e.viewReplies}},[e._v(" Show more replies ")]):e._e(),e.isReplyingTo?n("Comment",{attrs:{isReplyMode:!0,replyingTo:e.replyParent,rootComment:e.item},on:{cancel:function(t){e.isReplyingTo=!1}}}):e._e()],2):e._e()])],1),e.isConfirmDelete?n("ConfirmationDialog",{attrs:{title:"Are you sure?",body:"You will not be able to recover this comment once it is deleted",action:e.goDelete,isLoading:e.loading},model:{value:e.isConfirmDelete,callback:function(t){e.isConfirmDelete=t},expression:"isConfirmDelete"}}):e._e(),e.isReportDialog?n("ReportDialog",{attrs:{comment:e.item},model:{value:e.isReportDialog,callback:function(t){e.isReportDialog=t},expression:"isReportDialog"}}):e._e()],1):e._e()},Gt=[],zt=(n("466d"),n("498a"),n("c1df")),Wt=n.n(zt),Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-img",{style:"border-radius: "+e.round,attrs:{src:e.img,width:e.width||"100px",height:e.height||"100px","aspect-ratio":"1.4"},on:{error:function(t){e.imgFail=!0}}})},Yt=[],Kt=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoading=!1,e.imgFail=!1,e}return Object(m["a"])(n,[{key:"img",get:function(){return!this.imgFail&&this.src?this.src:this.default?this.default:gt.notFoundImg}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])(String)],Kt.prototype,"src",void 0),Object(v["__decorate"])([Object(g["d"])(String)],Kt.prototype,"default",void 0),Object(v["__decorate"])([Object(g["d"])(String)],Kt.prototype,"width",void 0),Object(v["__decorate"])([Object(g["d"])(String)],Kt.prototype,"height",void 0),Object(v["__decorate"])([Object(g["d"])({default:0})],Kt.prototype,"round",void 0),Kt=Object(v["__decorate"])([Object(g["a"])({components:{}})],Kt);var Qt=Kt,Jt=Qt,Xt=Object(le["a"])(Jt,Ht,Yt,!1,null,"70791cff",null),Zt=Xt.exports,en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-votes d-inline-flex align-center"},[n("div",{staticClass:"upvote-section d-flex align-center"},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":"","open-on-hover":e.anyUpvotes},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("div",e._g(e._b({staticClass:"upvotes",class:{"d-highlight":e.isUpvotedByAuthed}},"div",a,!1),r),[n("span",{directives:[{name:"show",rawName:"v-show",value:e.anyUpvotes,expression:"anyUpvotes"}],staticClass:"upvotes-count",class:{"upvote-highlight":e.isUpvotedByAuthed}},[e._v(" "+e._s(e.upvotesUsers.length)+" ")]),n("v-btn",{staticClass:"vote-btn no-background-hover",class:{"upvote-highlight":e.isUpvotedByAuthed},attrs:{ripple:!1,disabled:e.loading,small:"",icon:""},on:{click:e.upvote}},[n("v-icon",[e._v("mdi-chevron-up")])],1)],1)]}}]),model:{value:e.showUsers,callback:function(t){e.showUsers=t},expression:"showUsers"}},[e.anyUpvotes?n("v-card",[n("v-list",e._l(e.upvotesUsers,(function(t){return n("v-list-item",{key:t.id,attrs:{to:{name:e.Routes.profile.name,params:{userId:t.user.id}}}},[n("v-list-item-avatar",{staticClass:"rounded",attrs:{tile:""}},[n("Img",{attrs:{src:t.user.img,default:e.$config.userDefaultImg,round:"10px"}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.user.nickname))])],1)],1)})),1)],1):e._e()],1)],1),e._m(0),n("v-btn",{staticClass:"vote-btn no-background-hover",class:{"downvote-highlight":e.isDownvotedByAuthed},attrs:{ripple:!1,disabled:e.loading,small:"",icon:""},on:{click:e.downvote}},[n("v-icon",[e._v("mdi-chevron-down")])],1)],1)},tn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{staticClass:"separator"})])}],nn=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.showUsers=!1,e.Routes=si,e}return Object(m["a"])(n,[{key:"emitUpdate",value:function(e){return e}},{key:"showUsersCheck",value:function(){var e=this;this.$nextTick((function(){e.anyUpvotes||(e.showUsers=!1)}))}},{key:"anyUpvotesUpdated",value:function(){this.showUsersCheck()}},{key:"upvote",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=2;break}return e.abrupt("return",this.$showSnack(this.$config.TextLoginToVote));case 2:if(!this.isDownvotedByAuthed){e.next=5;break}return this.downvote(),e.abrupt("return");case 5:if(this.loading=!0,!this.isUpvotedByAuthed){e.next=19;break}return r={commentId:null===(t=this.comment)||void 0===t?void 0:t.id,userId:(null===(n=this.getUser)||void 0===n?void 0:n.id)||""},e.next=10,Ot(this.vuexUpvoteReset(r));case 10:if(a=e.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){e.next=16;break}return e.abrupt("return");case 16:this.emitUpdate(s),e.next=28;break;case 19:return e.next=21,Ot(this.vuexUpvote({id:null===(c=this.comment)||void 0===c?void 0:c.id}));case 21:if(u=e.sent,l=Object(Ee["a"])(u,2),d=l[0],p=l[1],!d){e.next=27;break}return e.abrupt("return");case 27:this.emitUpdate(p);case 28:this.loading=!1;case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"downvote",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=2;break}return e.abrupt("return",this.$showSnack(this.$config.TextLoginToVote));case 2:if(!this.isUpvotedByAuthed){e.next=4;break}return e.abrupt("return",this.upvote());case 4:if(this.loading=!0,!this.isDownvotedByAuthed){e.next=18;break}return r={commentId:null===(t=this.comment)||void 0===t?void 0:t.id,userId:(null===(n=this.getUser)||void 0===n?void 0:n.id)||""},e.next=9,Ot(this.vuexDownvoteReset(r));case 9:if(a=e.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){e.next=15;break}return e.abrupt("return");case 15:this.emitUpdate(s),e.next=27;break;case 18:return e.next=20,Ot(this.vuexDownvote({id:null===(c=this.comment)||void 0===c?void 0:c.id}));case 20:if(u=e.sent,l=Object(Ee["a"])(u,2),d=l[0],p=l[1],!d){e.next=26;break}return e.abrupt("return");case 26:this.emitUpdate(p);case 27:this.loading=!1;case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isUpvotedByAuthed",get:function(){var e=this,t=function(t){var n,r=t.user;return(null===r||void 0===r?void 0:r.id)===(null===(n=e.getUser)||void 0===n?void 0:n.id)};return this.upvotesUsers.find(t)}},{key:"isDownvotedByAuthed",get:function(){var e=this,t=function(t){var n,r=t.user;return(null===r||void 0===r?void 0:r.id)===(null===(n=e.getUser)||void 0===n?void 0:n.id)};return this.downvotesUsers.find(t)}},{key:"anyUpvotes",get:function(){return this.upvotesUsers.length>0}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],nn.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],nn.prototype,"isLogged",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.upvote))],nn.prototype,"vuexUpvote",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.upvoteReset))],nn.prototype,"vuexUpvoteReset",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.downvote))],nn.prototype,"vuexDownvote",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.downvoteReset))],nn.prototype,"vuexDownvoteReset",void 0),Object(v["__decorate"])([Object(g["b"])()],nn.prototype,"emitUpdate",null),Object(v["__decorate"])([Object(g["d"])()],nn.prototype,"comment",void 0),Object(v["__decorate"])([Object(g["d"])()],nn.prototype,"upvotesUsers",void 0),Object(v["__decorate"])([Object(g["d"])()],nn.prototype,"downvotesUsers",void 0),Object(v["__decorate"])([Object(g["f"])("showUsers")],nn.prototype,"showUsersCheck",null),Object(v["__decorate"])([Object(g["f"])("anyUpvotes")],nn.prototype,"anyUpvotesUpdated",null),nn=Object(v["__decorate"])([Object(g["a"])({components:{}})],nn);var rn=nn,an=rn,on=(n("95b1"),Object(le["a"])(an,en,tn,!1,null,"07d9f066",null)),sn=on.exports,cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"350",persistent:e.persistent||e.isLoading},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),n("v-card-text",[e._v(e._s(e.body))]),n("v-card-actions",[n("v-spacer"),e.hideCancleBtn?e._e():n("v-btn",{attrs:{disabled:e.isLoading,text:""},on:{click:function(t){e.isOpen=!1}}},[e._v(" "+e._s(e.$txt.Cancel())+" ")]),n("v-btn",{ref:"confirmBtn",attrs:{loading:e.isLoading,text:"",color:"accent"},on:{click:e.action}},[e._v(" "+e._s(e.submitButtonText)+" ")])],1)],1)],1)},un=[],ln=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isActive=!1,e.initialDelay=0,e}return Object(m["a"])(n,[{key:"mounted",value:function(){var e=this;setTimeout((function(){e.isActive=!0}),this.initialDelay)}},{key:"isOpen",get:function(){return this.value&&this.isActive},set:function(e){var t=this;this.isActive=e,setTimeout((function(){t.$emit("input",e)}),300)}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])({default:!1})],ln.prototype,"value",void 0),ln=Object(v["__decorate"])([g["a"]],ln);var dn=ln,pn=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"focusConfirmBtn",value:function(){var e,t=this.$refs.confirmBtn;null===t||void 0===t||null===(e=t.$el)||void 0===e||e.focus()}}]),n}(Object(g["c"])(dn));Object(v["__decorate"])([Object(g["d"])(Boolean)],pn.prototype,"isLoading",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],pn.prototype,"hideCancleBtn",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],pn.prototype,"persistent",void 0),Object(v["__decorate"])([Object(g["d"])(String)],pn.prototype,"title",void 0),Object(v["__decorate"])([Object(g["d"])(String)],pn.prototype,"body",void 0),Object(v["__decorate"])([Object(g["d"])(Function)],pn.prototype,"action",void 0),Object(v["__decorate"])([Object(g["d"])({default:Me.t(xe.Confirm),type:String})],pn.prototype,"submitButtonText",void 0),pn=Object(v["__decorate"])([Object(g["a"])({mixins:[dn]})],pn);var mn=pn,fn=mn,bn=(n("b5c2"),Object(le["a"])(fn,cn,un,!1,null,"8da0f164",null)),vn=bn.exports,gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{small:"",icon:""},on:{click:e.minify}},[e.isCollapsed?n("v-icon",{attrs:{small:""}},[e._v("mdi-plus")]):n("v-icon",{attrs:{small:""}},[e._v("mdi-minus")])],1),e.isDeleted?e._e():n("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",icon:""}},"v-btn",a,!1),r),[n("v-icon",[e._v("mdi-dots-horizontal")])],1)]}}],null,!1,320391379)},[e.isOwner?n("v-list",[n("v-list-item",{on:{click:function(t){return e.edit()}}},[n("v-list-item-title",[e._v("Edit")])],1),n("v-list-item",{on:{click:function(t){return e.destroy()}}},[n("v-list-item-title",[e._v("Delete")])],1)],1):n("v-list",[n("v-list-item",{on:{click:function(t){return e.report()}}},[n("v-list-item-title",[e._v("Report")])],1)],1)],1)],1)},hn=[],_n=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"edit",value:function(){}},{key:"minify",value:function(){}},{key:"destroy",value:function(){}},{key:"report",value:function(){}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],_n.prototype,"isCollapsed",void 0),Object(v["__decorate"])([Object(g["d"])()],_n.prototype,"isDeleted",void 0),Object(v["__decorate"])([Object(g["d"])()],_n.prototype,"isOwner",void 0),Object(v["__decorate"])([Object(g["b"])()],_n.prototype,"edit",null),Object(v["__decorate"])([Object(g["b"])()],_n.prototype,"minify",null),Object(v["__decorate"])([Object(g["b"])()],_n.prototype,"destroy",null),Object(v["__decorate"])([Object(g["b"])()],_n.prototype,"report",null),_n=Object(v["__decorate"])([Object(g["a"])({components:{}})],_n);var jn=_n,On=jn,yn=(n("943f"),Object(le["a"])(On,gn,hn,!1,null,"c006beac",null)),wn=yn.exports,kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogBase",{attrs:{isLoading:e.loading,noSaveBtn:!0,isClearable:!0,noCancelBtn:!0},on:{onCancel:function(t){e.isOpen=!1}},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("div",{staticClass:"d-flex flex-column align-center justify-center"},[n("h1",{staticClass:"text-title mb-5"},[e._v("Report comment")]),n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{"col-12":""}},[n("v-textarea",{ref:"reportTextarea",attrs:{outlined:"",placeholder:"Please describe the reason...",color:"blue",rows:"4",dense:"","hide-details":"auto",loading:e.loading,readonly:e.loading,counter:e.getCounter},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:e.onSave(t):null}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1),n("div",{staticClass:"d-flex"},[n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"blue",disabled:!e.isValid,loading:e.loading},on:{click:e.submit}},[e._v(" Submit ")])],1)],1)],1)])},xn=[],Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:!0,persistent:e.persistent,"no-click-animation":e.persistent,width:"600px",transition:"fab-transition",scrollable:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onCancel(t)}},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("v-card",{staticClass:"dialog-base"},[n("v-card-title",{staticClass:"mb-5"},[e._v(" "+e._s(e.title)+" "),n("v-spacer"),n("v-btn",{attrs:{icon:"",disabled:e.isLoading},on:{click:e.onCancel}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"dialog-base__content"},[n("v-container",{attrs:{fluid:""}},[e.title?n("v-row",{attrs:{"fill-height":"",align:"center",justify:"center"}},[n("h1",{staticClass:"text-title mb-3"},[e._v(e._s(e.title))])]):e._e(),e.subtitle?n("v-row",{attrs:{"fill-height":"",align:"center",justify:"center"}},[n("div",{staticClass:"text-subtitle mb-3"},[e._v(e._s(e.subtitle))])]):e._e(),n("v-row",{attrs:{"fill-height":"",align:"center",justify:"center"}},[n("v-col",{attrs:{md:"12",lg:"8",xl:"8"}},[e._t("default")],2)],1)],1)],1),n("v-card-actions",[n("v-spacer"),e.noCancelBtn?e._e():n("v-btn",{attrs:{disabled:e.isLoading,loading:e.isLoading,title:e.$txt.Close(),text:""},on:{click:e.onCancel}},[e._v(" "+e._s(e.$txt.Close())+" ")]),e.isClearable?n("v-btn",{attrs:{disabled:e.isLoading||e.isClearDisabled,loading:e.isLoading,title:e.clearBtnText?e.clearBtnText:e.$txt.Clear(),text:""},on:{click:e.onClear}},[e._v(" "+e._s(e.clearBtnText?e.clearBtnText:e.$txt.Clear())+" ")]):e._e(),e.noSaveBtn?e._e():n("v-btn",{attrs:{disabled:e.isLoading||e.isSaveDisabled,loading:e.isLoading,title:e.$txt.Save(),color:"accent",text:""},on:{click:e.onSave}},[e._v(" "+e._s(e.$txt.Save())+" ")])],1)],1)],1)},Cn=[],Rn=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"onSave",value:function(){this.$emit("onSave")}},{key:"onCancel",value:function(){this.$emit("onCancel")}},{key:"onClear",value:function(){this.$emit("onClear")}}]),n}(Object(g["c"])(dn));Object(v["__decorate"])([Object(g["d"])({required:!1,default:""})],Rn.prototype,"title",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:""})],Rn.prototype,"subtitle",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:""})],Rn.prototype,"clearBtnText",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"isLoading",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"isClearable",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"persistent",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"isSaveDisabled",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"isClearDisabled",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"noSaveBtn",void 0),Object(v["__decorate"])([Object(g["d"])({required:!1,default:!1})],Rn.prototype,"noCancelBtn",void 0),Rn=Object(v["__decorate"])([Object(g["a"])({mixins:[dn]})],Rn);var Un=Rn,Tn=Un,In=(n("0fe4"),Object(le["a"])(Tn,Sn,Cn,!1,null,null,null)),Pn=In.exports,En=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.text="",e.textLimitMax=500,e.textLimitMin=10,e}return Object(m["a"])(n,[{key:"submit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={commentId:this.comment.id,text:this.text},this.loading=!0,e.next=4,Ot(this.vuexReport(t));case 4:if(n=e.sent,r=Object(Ee["a"])(n,1),a=r[0],this.loading=!1,!a){e.next=10;break}return e.abrupt("return",It(a));case 10:return this.$showSnack("Thank you, moderators will review your report soon!"),this.isOpen=!1,e.abrupt("return",Promise.resolve());case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCounter",get:function(){return this.text.length>this.textLimitMax?this.textLimitMax:null}},{key:"isValid",get:function(){var e=this.text.trim(),t=e.length;return t>=this.textLimitMin&&t<=this.textLimitMax}}]),n}(Pn);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],En.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],En.prototype,"user",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(P.getCurrent))],En.prototype,"getCurrentRoute",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.report))],En.prototype,"vuexReport",void 0),Object(v["__decorate"])([Object(g["d"])()],En.prototype,"comment",void 0),En=Object(v["__decorate"])([Object(g["a"])({components:{DialogBase:Pn}})],En);var An=En,Dn=An,Fn=(n("1c64"),Object(le["a"])(Dn,kn,xn,!1,null,null,null)),Ln=Fn.exports,$n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tags.length>1?n("v-btn",{staticClass:"tagsub-btn",attrs:{to:e.route,title:"Go to this tag group",large:"",icon:"",color:"tag"}},[n("v-icon",{staticClass:"pt-1"},[e._v("mdi-arrow-right-bold-outline")])],1):e._e()},Nn=[],Mn=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.Routes=si,e}return Object(m["a"])(n,[{key:"route",get:function(){return this.hlUser?{name:si.comments.name,query:{tags:this.tags,hl:this.hlUser}}:{name:si.comments.name,query:{tags:this.tags}}}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],Mn.prototype,"tags",void 0),Object(v["__decorate"])([Object(g["d"])()],Mn.prototype,"hlUser",void 0),Mn=Object(v["__decorate"])([Object(g["a"])({components:{}})],Mn);var Vn=Mn,Bn=Vn,qn=(n("9eb9"),Object(le["a"])(Bn,$n,Nn,!1,null,null,null)),Gn=qn.exports,zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-chip",{staticClass:"tag no-active ma-1",attrs:{to:e.route,small:e.small,outlined:e.outlined,pill:"",color:"tag",dark:""}},[n("span",{class:{"non-outlined":!e.outlined}},[e._v(" "+e._s(e.tag)+" ")])])},Wn=[],Hn=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"route",get:function(){return this.hlUser?{name:si.comments.name,query:{tags:[this.tag],hl:this.hlUser}}:{name:si.comments.name,query:{tags:[this.tag]}}}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],Hn.prototype,"tag",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],Hn.prototype,"outlined",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],Hn.prototype,"small",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],Hn.prototype,"isLast",void 0),Object(v["__decorate"])([Object(g["d"])()],Hn.prototype,"hlUser",void 0),Hn=Object(v["__decorate"])([Object(g["a"])({})],Hn);var Yn=Hn,Kn=Yn,Qn=(n("b323"),Object(le["a"])(Kn,zn,Wn,!1,null,null,null)),Jn=Qn.exports;function Xn(e){var t=e.style.overflow;return t&&"visible"!==t||(e.style.overflow="hidden"),e.style.overflow=t,e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight}var Zn=function(){return{repliesAsRoot:!1}},er=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isExpanded=!1,e.isMounted=!1,e.isRendered=!1,e.editedText="",e.isEditMode=!1,e.isReplyingTo=!1,e.isCollapsed=!1,e.isConfirmDelete=!1,e.loading=!1,e.isReportDialog=!1,e.textLimitMin=2,e.textLimitMax=1500,e.loadingReplies=!1,e.Routes=si,e.replyParent=null,e.isOutlinedVisible=!1,e}return Object(m["a"])(n,[{key:"cancel",value:function(){}},{key:"reply",value:function(){return this.item}},{key:"mounted",value:function(){var e,t=this;this.isMounted=!0,setTimeout((function(){return t.isRendered=!0}),100),this.isReplyMode&&this.focusTextarea();var n=this.$route.query.comment;this.$route.query.replying&&(null===(e=this.item)||void 0===e?void 0:e.id)===n&&this.onClickReply()}},{key:"focusTextarea",value:function(){var e=this.$refs.commentTextarea;null===e||void 0===e||e.focus()}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD MMM YYYY hh:ss";return Wt()(e).format(t)}},{key:"goEditMode",value:function(){this.isEditMode=!0,this.editedText=this.comment.text,this.$nextTick(this.focusTextarea)}},{key:"exitEditing",value:function(){this.isReplyMode?this.cancel():(this.isEditMode=!1,this.editedText="")}},{key:"onSave",value:function(){if(this.isEditValid)if(this.editedText=this.editedText.trim(),this.isEditMode)this.onUpdate();else if(this.isCreateMode)this.onCreate({text:this.editedText});else if(this.isReplyMode){var e={text:this.editedText,parent:this.replyingTo};this.onCreate(e)}}},{key:"onCreate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Ot(this.vuexCreate(t));case 3:if(n=e.sent,r=Object(Ee["a"])(n,1),a=r[0],this.loading=!1,!a){e.next=9;break}return e.abrupt("return",It(a));case 9:return this.editedText="",this.isReplyMode&&this.cancel(),e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={id:(null===(t=this.item)||void 0===t?void 0:t.id)||"",text:this.editedText},this.loading=!0,e.next=4,Ot(this.vuexUpdate(n));case 4:if(r=e.sent,a=Object(Ee["a"])(r,1),o=a[0],this.loading=!1,!o){e.next=10;break}return e.abrupt("return",It(o));case 10:return this.editedText="",this.exitEditing(),e.abrupt("return",Promise.resolve());case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"goDelete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,n={id:(null===(t=this.item)||void 0===t?void 0:t.id)||""},e.next=4,Ot(this.vuexDelete(n));case 4:if(r=e.sent,a=Object(Ee["a"])(r,1),o=a[0],this.loading=!1,!o){e.next=10;break}return e.abrupt("return",It(o));case 10:return this.isConfirmDelete=!1,e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"viewReplies",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.item){e.next=2;break}return e.abrupt("return");case 2:return this.loadingReplies=!0,e.next=5,Ot(this.fetchReplies(this.item));case 5:t=e.sent,n=Object(Ee["a"])(t,1),n[0],this.loadingReplies=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateSoft",value:function(e){this.vuexUpdateSoft(e),this.vuexUpdateEventComment(e)}},{key:"onClickReply",value:function(){if(!this.isRoot)return this.reply();this.replyToComment(this.item)}},{key:"replyToComment",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.replyParent=t,this.isReplyingTo=!1,this.$nextTick((function(){return e.isReplyingTo=!0}))}},{key:"isExpandable",get:function(){return!(!this.isMounted||!this.$refs.msg)&&Xn(this.$refs.msg)}},{key:"repliesAsRoot",get:function(){return this.options.repliesAsRoot}},{key:"isChild",get:function(){return!this.repliesAsRoot&&(!!this.comment.parentId||this.isReplyMode)}},{key:"getCounter",get:function(){return this.editedText.length>this.textLimitMax?this.textLimitMax:null}},{key:"isReply",get:function(){return this.replyingTo||this.comment.threadId||this.comment.parentId}},{key:"isReplyRoot",get:function(){var e,t;return!this.rootComment||!this.replyingTo||(null===(e=this.rootComment)||void 0===e?void 0:e.id)===(null===(t=this.replyingTo)||void 0===t?void 0:t.id)}},{key:"replyTo",get:function(){var e,t,n;if(this.replyingTo)return(null===(t=this.rootComment)||void 0===t?void 0:t.id)===this.replyingTo.id?null:(null===(n=this.replyingTo)||void 0===n?void 0:n.user)||null;var r=this.comment.parent;if(!r){var a=jt(this.comment.parentId||"");if(r=this.comments.find(a),!r){var o=jt(this.comment.threadId||""),i=this.comments.find(o);i&&(r=i.replies.find(a))}}return(null===(e=r)||void 0===e?void 0:e.user)||null}},{key:"comment",get:function(){return this.item?this.item:Object(s["a"])(Object(s["a"])({},Tt()),{},{threadId:"",user:this.getUser})}},{key:"isOwner",get:function(){var e,t,n;return(null===(e=this.item)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)===(null===(n=this.getUser)||void 0===n?void 0:n.id)}},{key:"isRoot",get:function(){var e;return!(null!==(e=this.item)&&void 0!==e&&e.parentId)}},{key:"isEditing",get:function(){return this.isEditMode||this.isCreateMode||this.isReplyMode}},{key:"isEditValid",get:function(){var e=this.editedText.trim(),t=e.length;return t>=this.textLimitMin&&t<=this.textLimitMax}},{key:"isDeleted",get:function(){return!!this.item&&(!this.item.user&&this.item.deletedAt)}},{key:"isReplyComments",get:function(){if(!this.isRendered)return!0;var e=this.$refs.replies;return null===e||void 0===e?void 0:e.clientHeight}},{key:"tags",get:function(){var e=this;if(!this.item)return[];var t=function(t){var n=t.tagId,r=!!e.tagsQuery.find((function(e){return e===n}));return{name:n,match:r}},n=this.item.comments_tags.map(t),r=function(e){return e.match},a=n.filter((function(e){return!r(e)}));a.sort((function(e,t){return e.name.localeCompare(t.name)}));var o=function(e){return{name:e,match:!0}},i=this.tagsQuery.map(o);return[].concat(Object(d["a"])(i),Object(d["a"])(a))}},{key:"repliesCount",get:function(){var e,t,n;return this.isRoot?null===(e=this.item)||void 0===e||null===(t=e.replies_aggregate)||void 0===t||null===(n=t.aggregate)||void 0===n?void 0:n.count:0}},{key:"tagsList",get:function(){if(!this.item)return[];var e=function(e){var t=e.tagId;return t};return this.item.comments_tags.map(e)}},{key:"isTagsMatch",get:function(){return this.item?this.item.comments_tags.length===this.tagsQuery.length:[]}},{key:"anyReplies",get:function(){var e,t,n=(null===(e=this.item)||void 0===e||null===(t=e.replies)||void 0===t?void 0:t.length)||0;return n>0}},{key:"getReplyRoute",get:function(){var e;return{name:si.comments.name,query:{tags:this.tagsList,comment:null===(e=this.item)||void 0===e?void 0:e.id,replying:!0}}}},{key:"isTagsPage",get:function(){return this.$route.name===this.Routes.comments.name}},{key:"tagsOutlined",get:function(){var e=function(e){return e.match};return this.tags.filter(e)}},{key:"tagsNonOutlined",get:function(){var e=function(e){return e.match};return this.tags.filter((function(t){return!e(t)}))}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(z.getRecords))],er.prototype,"comments",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.create))],er.prototype,"vuexCreate",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.update))],er.prototype,"vuexUpdate",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.delete))],er.prototype,"vuexDelete",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],er.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getRecords))],er.prototype,"tagsQuery",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.fetchReplies))],er.prototype,"fetchReplies",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.updateSoft))],er.prototype,"vuexUpdateSoft",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(ee.updateComment))],er.prototype,"vuexUpdateEventComment",void 0),Object(v["__decorate"])([Object(g["b"])()],er.prototype,"cancel",null),Object(v["__decorate"])([Object(g["b"])()],er.prototype,"reply",null),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"item",void 0),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"rootComment",void 0),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"isCreateMode",void 0),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"isReplyMode",void 0),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"replyingTo",void 0),Object(v["__decorate"])([Object(g["d"])()],er.prototype,"nonAuthed",void 0),Object(v["__decorate"])([Object(g["d"])({default:Zn})],er.prototype,"options",void 0),er=Object(v["__decorate"])([Object(g["a"])({name:"Comment",components:{Img:Zt,CommentVotes:sn,CommentMenu:wn,Comment:ar,ConfirmationDialog:vn,ReportDialog:Ln,TagsubBtn:Gn,Tag:Jn}})],er);var tr=er,nr=tr,rr=(n("4227"),Object(le["a"])(nr,qt,Gt,!1,null,"046ecba7",null)),ar=rr.exports,or=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.isThreadEnd=!1,e.isInit=!1,e.COMMENTS_PER_PAGE=lt,e.Iterables=gt.iterables,e}return Object(m["a"])(n,[{key:"mounted",value:function(){ae.$on(te.FetchComments,this.fetchComments)}},{key:"beforeDestroy",value:function(){ae.$off(te.FetchComments,this.fetchComments)}},{key:"fetchComments",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u,l,d=this,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]&&p[0],this.loading=!0,n=this.$route.query["feed"],t||(this.isThreadEnd=!1,this.isInit=!1,this.$nextTick((function(){return d.isInit=!0}))),!n||this.isSubsFetched){e.next=9;break}return e.next=7,Rt(1e3);case 7:return this.fetchComments(t),e.abrupt("return");case 9:return r=this.userId,a=this.hlUserId,o=this.hlCommentId,i={showMore:t,userId:r,isFeed:n,hlUserId:a,hlCommentId:o},e.next=15,Ot(this.fetch(i));case 15:if(s=e.sent,c=Object(Ee["a"])(s,2),u=c[0],l=c[1],!u){e.next=21;break}return e.abrupt("return");case 21:this.loading=!1,0===l.length&&(this.isThreadEnd=!0);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isMainPage",get:function(){return 0===this.tags.length}},{key:"hlUserId",get:function(){return this.$route.query.hl}},{key:"hlCommentId",get:function(){return this.$route.query.comment}},{key:"loadingMore",get:function(){return this.loading&&this.comments.length>0}}]),n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.fetch))],or.prototype,"fetch",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(z.getRecords))],or.prototype,"comments",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getRecords))],or.prototype,"tags",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getIsSubsFetched))],or.prototype,"isSubsFetched",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],or.prototype,"isLogged",void 0),Object(v["__decorate"])([Object(g["d"])({default:""})],or.prototype,"userId",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],or.prototype,"subpage",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],or.prototype,"repliesAsRoot",void 0),or=Object(v["__decorate"])([Object(g["a"])({components:{SortingPanel:Bt,Comment:ar}})],or);var ir=or,sr=ir,cr=(n("9a81"),Object(le["a"])(sr,Ie,Pe,!1,null,null,null)),ur=cr.exports,lr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile"},[e.loading?n("div",{staticStyle:{position:"relative","min-height":"50vh"}},[n("Spinner")],1):e.user?n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",[n("div",{staticClass:"update-img d-flex mb-10 mt-6"},[n("v-avatar",{staticClass:"mr-6 rounded",staticStyle:{cursor:"pointer"},attrs:{tile:"",size:"150",color:"#1b1658"},on:{click:function(t){return t.stopPropagation(),e.onImgClick(t)}}},[e.user&&e.user.img?n("img",{attrs:{src:e.user.img||e.$config.userDefaultImg,alt:"Profile Picture"}}):n("span",{staticClass:"white--text",staticStyle:{"font-size":"2rem !important"}},[e._v(" "+e._s(e.initial)+" ")]),e.isUserAuthed?n("div",{staticClass:"update-btn-bg"},[n("v-icon",{staticClass:"edit",attrs:{color:"#fff"}},[e._v(" mdi-pencil ")])],1):e._e()]),n("div",{staticClass:"d-flex flex-column mt-5"},[n("h3",{staticClass:"mb-1"},[e._v(e._s(e.user.nickname))]),n("span",{staticClass:"mb-3"},[e._v(e._s(e.user.name+" "+e.user.surname))]),e.isUserAuthed?n("v-btn",{attrs:{color:"primary white--text"},on:{click:function(t){e.showUpdateInfoDialog=!0}}},[e._v(" Edit ")]):e._e(),e.isUserAuthed?n("v-btn",{staticClass:"mt-2",attrs:{color:"primary white--text",to:{name:e.Routes.logout.name}}},[n("span",[e._v("Logout")])]):e._e()],1)],1)])],1),n("v-row",[n("v-col",[n("v-divider"),n("h2",{staticClass:"pa-5",staticStyle:{color:"#777777"}},[e._v("Comments")]),n("TheCommentsPage",{attrs:{userId:e.user.id,subpage:!0,repliesAsRoot:!0}})],1)],1),n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{xs:"8",sm:"8",md:"8","offset-xs":"4"}},[e.showUpdateInfoDialog?n("FormDialog",{ref:"FormDialog",attrs:{title:"Settings",subtitle:"Update profile settings",loading:e.loading,formFields:e.formFields},on:{save:e.onUpdateInfo},model:{value:e.showUpdateInfoDialog,callback:function(t){e.showUpdateInfoDialog=t},expression:"showUpdateInfoDialog"}}):e._e()],1)],1)],1):n("div",{staticClass:"cta-container"},[n("Cta",{attrs:{text:"User is not found"}})],1),e.showUpdateImgDialog?n("UpdateImageDialog",{attrs:{imgUrl:e.user&&e.user.img,height:300,width:300,ratioX:1,ratioY:1,maxSize:20,loading:e.loading,disabled:e.loading,title:"Update avatar"},on:{save:e.onUpdateImg},model:{value:e.showUpdateImgDialog,callback:function(t){e.showUpdateImgDialog=t},expression:"showUpdateImgDialog"}}):e._e()],1)},dr=[],pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogBase",{attrs:{title:e.title,subtitle:e.subtitle,isLoading:e.loading,isClearable:!1,isSaveDisabled:!e.isValid||!e.isDirty,isClearDisabled:!e.isDirty,persistent:!0},on:{onSave:e.onSave,onCancel:e.onCancel},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[e._t("prepend"),n("FormParser",{ref:"FormParser",attrs:{isLoading:e.loading,formFields:e.formFields},on:{onSubmit:e.onSubmitForm,onCancel:e.onCancel}}),e._t("default")],2)},mr=[],fr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[n("ValidationObserver",{ref:"observer",attrs:{tag:"form"},on:{submit:function(t){return t.preventDefault(),e.submit()}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.formFields,(function(t,r){return[e.isMounted?n("ValidationProvider",{key:r,attrs:{name:r,rules:!t.disabled&&t.rules||""},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.errors;return[t.inputType===e.inputTypes.textfield?[t.hidden?e._e():n("v-text-field",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading,title:t.title||t.label,counter:e.getCounter(t.rules)},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.date?[t.hidden?e._e():n("InputDate",{ref:r,refInFor:!0,attrs:{value:e.formData[r],"error-messages":o,label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{onSave:function(n){return e.updateValue(t,n)}}})]:t.inputType===e.inputTypes.tags?[t.hidden?e._e():n("InputTags",{ref:r,refInFor:!0,attrs:{value:e.formData[r],"error-messages":o,label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{save:function(n){return e.updateValue(t,n)}}})]:t.inputType===e.inputTypes.dateRange?[t.hidden?e._e():n("InputDateRange",{ref:r,refInFor:!0,attrs:{value:e.formData[r],valueSecondary:e.formData[t.secondary.name],"error-messages":o,label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{onSave:function(n,r){e.updateValue(t,n),e.updateValue(t.secondary,r)}}})]:e._e(),t.inputType===e.inputTypes.number?[t.hidden?e._e():n("v-text-field",{ref:r,refInFor:!0,attrs:{type:"number","error-messages":o,label:t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading,title:t.title||t.label},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:e._e(),t.inputType===e.inputTypes.password||t.inputType===e.inputTypes.passwordConfirm?[t.hidden?e._e():n("v-text-field",{ref:r,refInFor:!0,attrs:{type:"password","error-messages":o,label:t.label,title:t.title||t.label,counter:e.getCounter(t.rules),loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.textarea?[n("v-textarea",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading,counter:e.getCounter(t.rules)},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.select?[t.hidden?e._e():n("v-select",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,"item-text":t.selectorText||"","item-value":t.selectorValue||"",items:t.inputOptions||[],title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{change:e.updateFormFields},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.iconSelect?[n("v-select",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,title:t.title||t.label,items:t.inputOptions||[],loading:e.isLoading,disabled:t.disabled||e.isLoading},scopedSlots:e._u([{key:"selection",fn:function(t){return[n("v-icon",[e._v(e._s(e.formData[r]))])]}},{key:"item",fn:function(t){return[n("v-list-item-avatar",[n("v-avatar",[n("v-icon",[e._v(e._s(t.item))])],1)],1)]}}],null,!0),model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.switch?[n("v-switch",{ref:r,refInFor:!0,staticClass:"ma-0 unreactive-label",attrs:{"error-messages":o,rules:t.rules||[],label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading,color:"green"},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.checkbox?[t.hidden?e._e():n("v-checkbox",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,title:t.title||t.label,loading:e.isLoading,disabled:t.disabled||e.isLoading},on:{change:e.updateFormFields},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.image?[n("v-file-input",{attrs:{"error-messages":o,counter:!1,placeholder:t.placeholder,label:t.label,loading:e.isLoading,clearable:!1,disabled:t.disabled||e.isLoading||t.isOpen,"show-size":"",accept:"image/png, image/jpeg, image/bmp","prepend-icon":"mdi-camera"},nativeOn:{click:function(n){return n.stopPropagation(),n.preventDefault(),function(){return e.openImgEditor(t)}()}},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}}),t.isOpen?n("UpdateImageDialog",{attrs:{height:t.imgHeight,width:t.imgWidth,imgFile:t.value,title:t.imgTitle,subtitle:t.imgSubtitle,ratioX:t.imgRatioX,ratioY:t.imgRatioY},on:{onUpdate:function(n){return e.onUpdateImage(t,n)},onClear:function(n){return e.updateValue(t,null)},onCancel:function(n){return e.setIsOpen(t,!1)}},model:{value:t.isOpen,callback:function(n){e.$set(t,"isOpen",n)},expression:"field.isOpen"}}):e._e()]:t.inputType===e.inputTypes.positionLat?[t.hidden?e._e():n("v-text-field",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:"Map Location Lattitude",disabled:!0,readonly:!0,title:t.title||t.label},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}})]:t.inputType===e.inputTypes.positionLng?[t.hidden?e._e():n("v-text-field",{ref:r,refInFor:!0,attrs:{"error-messages":o,label:t.label,loading:e.isLoading,disabled:!0,readonly:!0,title:t.title||t.label,counter:e.getCounter(t.rules)},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[name]"}}),n("v-btn",{attrs:{outlined:""},on:{click:function(){return e.setIsOpen(t,!0)}}},[e._v(" "+e._s(t.label)+" ")])]:e._e()]}}],null,!0)}):e._e()]}))]}}])}),e._t("default")],2)},br=[],vr=(n("a9e3"),n("2ca0"),n("8654")),gr=n("a844"),hr=n("b974"),_r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogBase",{attrs:{title:e.title,subtitle:e.subtitle,loading:e.loading,isClearable:!0,isSaveDisabled:!e.isImageValid,isClearDisabled:!e.img,isLoading:e.loading},on:{onSave:e.onUpload,onCancel:e.onCancel,onClear:e.onClear},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("ul",{staticClass:"ma-5"},[e.width?n("li",{class:{"red--text":e.img&&!e.isWidthValid}},[e._v(" Image should have min width of "),n("span",[e._v(e._s(e.width)+"px")])]):e._e(),e.height?n("li",{class:{"red--text":e.img&&!e.isHeightValid}},[e._v(" Image should have min height of "),n("span",[e._v(e._s(e.height)+"px")])]):e._e()]),e.loading?n("div",{staticStyle:{position:"relative","min-height":"50vh"}},[n("Spinner")],1):e.img?n("cropper",{ref:"cropper",staticClass:"cropper",attrs:{src:e.img,stencilProps:{aspectRatio:e.aspectRatio},wheelResize:!1,restrictions:function(){return{minWidth:e.width||0,minHeight:e.height||0}}},on:{change:e.change}}):n("v-file-input",{attrs:{placeholder:"Tap to select new image",label:"Upload new image",loading:e.loading,disabled:e.loading,"show-size":"",accept:"image/png, image/jpeg, image/bmp","prepend-icon":"mdi-camera"},on:{change:e.onNewImage},model:{value:e.imgNew,callback:function(t){e.imgNew=t},expression:"imgNew"}})],1)},jr=[],Or=n("a2c1"),yr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.noTransition?"":"spinner__transition"}},[n("div",{staticClass:"spinner",class:{fullscreen:e.fullscreen}},[n("v-progress-circular",{attrs:{size:e.fullscreen?70:e.size,width:e.fullscreen?7:3,indeterminate:"",color:e.color}})],1)])},wr=[],kr=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);Object(v["__decorate"])([Object(g["d"])(Boolean)],kr.prototype,"fullscreen",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],kr.prototype,"noTransition",void 0),Object(v["__decorate"])([Object(g["d"])({default:"primary"})],kr.prototype,"color",void 0),Object(v["__decorate"])([Object(g["d"])({default:22})],kr.prototype,"size",void 0),kr=Object(v["__decorate"])([Object(g["a"])({components:{}})],kr);var xr=kr,Sr=xr,Cr=(n("be11"),Object(le["a"])(Sr,yr,wr,!1,null,"3b7b9fc7",null)),Rr=Cr.exports,Ur=function(){return{width:0,height:0}},Tr=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.img="",e.imgNew=null,e.resultImg="",e.isMounted=!1,e.coordinates=Ur(),e}return Object(m["a"])(n,[{key:"save",value:function(e){return e}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.imgFile){e.next=11;break}return e.next=3,Ot(xt(this.imgFile));case 3:if(t=e.sent,n=Object(Ee["a"])(t,2),r=n[0],a=n[1],!r){e.next=9;break}return e.abrupt("return",Promise.reject(r));case 9:return this.img=a,e.abrupt("return");case 11:if(o=this.imgUrl,o){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Ot(this.fetchImgFromUrl(o));case 16:if(i=e.sent,s=Object(Ee["a"])(i,2),c=s[0],u=s[1],!c){e.next=22;break}return e.abrupt("return");case 22:this.img=u,setTimeout((function(){return l.isMounted=!0}),150);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchImgFromUrl",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot(fetch(t));case 2:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],o=r[1],!a){e.next=8;break}return e.abrupt("return",Promise.reject(a));case 8:return e.next=10,Ot(o.blob());case 10:if(i=e.sent,s=Object(Ee["a"])(i,2),c=s[0],u=s[1],!c){e.next=16;break}return e.abrupt("return",Promise.reject(c));case 16:return e.next=18,Ot(xt(u));case 18:if(l=e.sent,d=Object(Ee["a"])(l,2),p=d[0],m=d[1],!c){e.next=24;break}return e.abrupt("return",Promise.reject(p));case 24:return e.abrupt("return",Promise.resolve(m));case 25:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setImage",value:function(e){this.img=e}},{key:"onUpload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.resultImg,t){e.next=3;break}return e.abrupt("return");case 3:return n="new.jpg",e.next=6,kt(t,n,"image/jpeg");case 6:r=e.sent,this.save(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onClear",value:function(){this.img="",this.imgNew=null,this.coordinates=Ur(),this.$emit("onClear")}},{key:"onCancel",value:function(){this.isOpen=!1,this.$emit("onCancel")}},{key:"change",value:function(e){var t=e.coordinates,n=e.canvas;this.coordinates=t,this.resultImg=n.toDataURL("image/jpeg")}},{key:"onNewImage",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.imgNew){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ot(xt(this.imgNew));case 4:if(t=e.sent,n=Object(Ee["a"])(t,2),r=n[0],a=n[1],!r){e.next=10;break}return e.abrupt("return",Promise.reject(r));case 10:this.img=a,setTimeout((function(){var e=new Image;e.onload=function(){o.coordinates={width:e.width,height:e.height}},e.src=a}),400);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isImageValid",get:function(){return!!this.img&&this.isWidthValid&&this.isHeightValid}},{key:"isWidthValid",get:function(){return!this.width||this.coordinates.width&&this.width<=this.coordinates.width}},{key:"isHeightValid",get:function(){return!this.height||this.coordinates&&this.height<=this.coordinates.height}},{key:"aspectRatio",get:function(){return this.ratioX&&this.ratioY?this.ratioX/this.ratioY:null}},{key:"cropper",get:function(){return this.isMounted?this.$refs["cropper"]:null}}]),n}(Object(g["c"])(dn));Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"imgUrl",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"imgFile",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"title",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"subtitle",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"height",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"width",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"ratioX",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"ratioY",void 0),Object(v["__decorate"])([Object(g["d"])()],Tr.prototype,"loading",void 0),Object(v["__decorate"])([Object(g["b"])()],Tr.prototype,"save",null),Tr=Object(v["__decorate"])([Object(g["a"])({mixins:[dn],components:{DialogBase:Pn,Cropper:Or["a"],Spinner:Rr}})],Tr);var Ir=Tr,Pr=Ir,Er=(n("e06e"),Object(le["a"])(Pr,_r,jr,!1,null,null,null)),Ar=Er.exports,Dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.dates,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.dates=t},"update:return-value":function(t){e.dates=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:e.label,loading:e.loading,disabled:e.disabled,"error-messages":e.errorMessages,readonly:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-icon",{attrs:{color:"lightBlue"}},[e._v("mdi-calendar")])]},proxy:!0}],null,!0),model:{value:e.dateRangeText,callback:function(t){e.dateRangeText=t},expression:"dateRangeText"}},"v-text-field",a,!1),r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-date-picker",{attrs:{"allowed-dates":e.allowedMonths,"no-title":"",scrollable:"",range:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onClear}},[e._v("Clear")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onCancel}},[e._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onSave}},[e._v("OK")])],1)],1)},Fr=[],Lr=(n("a15b"),function(){return""}),$r=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.emits={onChange:"onChange",onSave:"onSave"},e.menu=!1,e.dates=[Lr()],e}return Object(m["a"])(n,[{key:"mounted",value:function(){this.value&&this.valueSecondary&&(this.dates=[this.value,this.valueSecondary])}},{key:"allowedMonths",value:function(e){var t=Wt()(e).isSame(new Date,"day");return!Wt()().isSameOrAfter(e)||t}},{key:"onSave",value:function(){var e=this.$refs.menu;e.save(this.dates.sort()),this.menu=!1,this.$emit(this.emits.onSave,this.dates[0],this.dates[1])}},{key:"onCancel",value:function(){this.dates=[this.value,this.valueSecondary],this.menu=!1}},{key:"onClear",value:function(){this.dates=[]}},{key:"dateRangeText",get:function(){return this.dates.join(" ~ ")}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"value",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"valueSecondary",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"errorMessages",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"label",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"loading",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"disabled",void 0),Object(v["__decorate"])([Object(g["d"])()],$r.prototype,"title",void 0),$r=Object(v["__decorate"])([Object(g["a"])({})],$r);var Nr=$r,Mr=Nr,Vr=(n("9616"),Object(le["a"])(Mr,Dr,Fr,!1,null,"a0404940",null)),Br=Vr.exports,qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"close-on-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{value:e.dateFormatted,label:e.label,loading:e.loading,disabled:e.disabled,"error-messages":e.errorMessages,readonly:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-icon",{attrs:{color:"lightBlue"}},[e._v("mdi-calendar")])]},proxy:!0}],null,!0)},"v-text-field",a,!1),r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e.isReset?e._e():n("v-date-picker",{attrs:{"allowed-dates":e.allowedMonths,"no-title":"",scrollable:""},model:{value:e.dateFormatted,callback:function(t){e.dateFormatted=t},expression:"dateFormatted"}},[n("v-btn",{attrs:{text:"",color:"pink"},on:{click:e.onClear}},[e._v("Clear")]),n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onCancel}},[e._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onSave}},[e._v("OK")])],1)],1)},Gr=[],zr=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.emits={onChange:"onChange",onSave:"onSave"},e.date="",e.menu=!1,e.originalValue="",e.latestAcceptedValue="",e.isReset=!1,e}return Object(m["a"])(n,[{key:"onValueUpdate",value:function(){this.value&&(this.date=this.value)}},{key:"mounted",value:function(){this.originalValue=this.value,this.latestAcceptedValue=this.value}},{key:"allowedMonths",value:function(e){var t=Wt()(e).isSame(new Date,"day");return!Wt()().isSameOrAfter(e)||t}},{key:"onSave",value:function(){var e=new Date(this.date).toISOString();this.$emit(this.emits.onSave,this.date),this.latestAcceptedValue=e;var t=this.$refs.menu;t.save(e),this.menu=!1}},{key:"onCancel",value:function(){this.menu=!1,this.$emit(this.emits.onSave,this.latestAcceptedValue)}},{key:"onClear",value:function(){var e=this;this.isReset=!0,this.$nextTick((function(){e.$emit(e.emits.onSave,e.latestAcceptedValue),e.isReset=!1}))}},{key:"dateFormatted",get:function(){return this.date?Wt()(this.date).format("YYYY-MM-DD"):""},set:function(e){this.date=new Date(e).toISOString(),this.$emit(this.emits.onSave,this.date)}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"value",void 0),Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"errorMessages",void 0),Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"label",void 0),Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"loading",void 0),Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"disabled",void 0),Object(v["__decorate"])([Object(g["d"])()],zr.prototype,"title",void 0),Object(v["__decorate"])([Object(g["f"])("value",{immediate:!0})],zr.prototype,"onValueUpdate",null),zr=Object(v["__decorate"])([Object(g["a"])({})],zr);var Wr=zr,Hr=Wr,Yr=(n("1b8c"),Object(le["a"])(Hr,qr,Gr,!1,null,"4beea28d",null)),Kr=Yr.exports,Qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-autocomplete",{attrs:{items:e.options,label:e.label,outlined:"",dense:"",chips:"","small-chips":"",multiple:"","item-text":"name","item-value":"id",clearable:"",solo:""},model:{value:e.chips,callback:function(t){e.chips=t},expression:"chips"}})},Jr=[],Xr=(n("c740"),n("a434"),function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.localValue="",e}return Object(m["a"])(n,[{key:"save",value:function(e){return e}},{key:"remove",value:function(e){var t=jt(e.id),n=this.chips.findIndex(t);this.chips.splice(n,1),this.chips=Object(d["a"])(this.chips)}},{key:"chips",get:function(){return this.value},set:function(e){this.save(e)}}]),n}(g["e"]));Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"value",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"errorMessages",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"label",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"loading",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"disabled",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"title",void 0),Object(v["__decorate"])([Object(g["d"])()],Xr.prototype,"options",void 0),Object(v["__decorate"])([Object(g["b"])()],Xr.prototype,"save",null),Xr=Object(v["__decorate"])([Object(g["a"])({})],Xr);var Zr=Xr,ea=Zr,ta=(n("51d2"),Object(le["a"])(ea,Qr,Jr,!1,null,"dfcd9bb4",null)),na=ta.exports,ra=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.formData={},e.isFormValid=!1,e.isMounted=!1,e}return Object(m["a"])(n,[{key:"resetFormData",value:function(){var e;for(var t in this.formFields){var n=this.formFields[t];this.formData[t]=n.value}this.formData=ye.a.cloneDeep(this.formData),null===(e=this.form)||void 0===e||e.resetValidation()}},{key:"mounted",value:function(){setTimeout(this.init,150)}},{key:"init",value:function(){if(this.isMounted=!0,this.resetFormData(),this.focusField){var e=this.$refs[this.focusField];e&&e[0]&&e[0].focus()}}},{key:"submit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.observer)||void 0===t?void 0:t.validate();case 2:if(n=e.sent,!this.isLoading&&n&&this.formData){e.next=5;break}return e.abrupt("return",!1);case 5:this.$emit("onSubmit",this.formData);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmitForm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.observer)||void 0===t?void 0:t.validate();case 2:if(n=e.sent,!this.isLoading&&n&&this.formData){e.next=5;break}return e.abrupt("return",!1);case 5:this.$emit("onSubmit",this.formData);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateFormFields",value:function(){for(var e in this.formFields){var t=this.formFields[e];t.value=this.formData[e]}this.$emit("update:formFields",Object(s["a"])({},this.formFields))}},{key:"openDialog",value:function(e){var t=this.$refs[e];t&&t.length>0&&t[0].click&&t[0].click()}},{key:"getCounter",value:function(e){if(!e)return null;var t="max:",n=e.split("|"),r=function(e){return e.startsWith(t)},a=n.find(r);if(!a)return null;var o=a.slice(t.length);return Number(o)}},{key:"reset",value:function(){var e;null===(e=this.form)||void 0===e||e.reset()}},{key:"openImgEditor",value:function(e){e.isOpen=!0}},{key:"setIsOpen",value:function(e,t){e.isOpen=t}},{key:"onUpdateImage",value:function(e,t){e.isOpen=!1,this.updateValue(e,t)}},{key:"updateValue",value:function(e,t){e.value=t;var n=Ct(this.formFields,e);n&&(this.formData[n]=e.value)}},{key:"isDirty",get:function(){for(var e in this.formFields){var t=this.formFields[e];if(this.formData[e]!==t.value)return!0}return!1}},{key:"inputTypes",get:function(){return Ne}},{key:"form",get:function(){return this.isMounted?this.$refs.form:null}},{key:"observer",get:function(){return this.$refs.observer}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],ra.prototype,"isLoading",void 0),Object(v["__decorate"])([Object(g["d"])()],ra.prototype,"formFields",void 0),Object(v["__decorate"])([Object(g["d"])()],ra.prototype,"focusField",void 0),Object(v["__decorate"])([Object(g["f"])("formFields")],ra.prototype,"resetFormData",null),ra=Object(v["__decorate"])([Object(g["a"])({components:{VTextField:vr["a"],VTextarea:gr["a"],VSelect:hr["a"],UpdateImageDialog:Ar,InputDateRange:Br,InputDate:Kr,InputTags:na}})],ra);var aa=ra,oa=aa,ia=Object(le["a"])(oa,fr,br,!1,null,null,null),sa=ia.exports,ca=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.emits={onSave:"save"},e.formData=null,e.isMounted=!1,e}return Object(m["a"])(n,[{key:"mounted",value:function(){var e=this;setTimeout((function(){return e.isMounted=!0}),150)}},{key:"onSave",value:function(){var e;null===(e=this.form)||void 0===e||e.submit()}},{key:"onCancel",value:function(){this.loading||(this.isOpen=!1)}},{key:"onSubmitForm",value:function(e){this.$emit(this.emits.onSave,Object(s["a"])({},e))}},{key:"form",get:function(){return this.isMounted?this.$refs["FormParser"]:null}},{key:"isDirty",get:function(){var e;return null===(e=this.form)||void 0===e?void 0:e.isDirty}},{key:"isValid",get:function(){var e;return null===(e=this.form)||void 0===e?void 0:e.isFormValid}}]),n}(Object(g["c"])(dn));Object(v["__decorate"])([Object(g["d"])()],ca.prototype,"formFields",void 0),Object(v["__decorate"])([Object(g["d"])()],ca.prototype,"title",void 0),Object(v["__decorate"])([Object(g["d"])()],ca.prototype,"subtitle",void 0),Object(v["__decorate"])([Object(g["d"])()],ca.prototype,"loading",void 0),ca=Object(v["__decorate"])([Object(g["a"])({mixins:[dn],components:{FormParser:sa,DialogBase:Pn}})],ca);var ua=ca,la=ua,da=Object(le["a"])(la,pr,mr,!1,null,null,null),pa=da.exports,ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"cta",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center",direction:"column"}},[n("v-col",{attrs:{xs:"12",sm:"10",md:"8",lg:"5"}},[n("div",{staticClass:"content-container"},[e._t("default",[n("div",[n("v-icon",{staticClass:"cta-icon"},[e._v(" "+e._s(e.icon?e.icon:"mdi-folder-search")+" ")])],1),n("div",{staticClass:"cta-text"},[e._v(" "+e._s(e.text?e.text:e.$txt.NotFound())+" ")])])],2)])],1)],1)},fa=[],ba=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);Object(v["__decorate"])([Object(g["d"])({default:""})],ba.prototype,"icon",void 0),Object(v["__decorate"])([Object(g["d"])(String)],ba.prototype,"text",void 0),ba=Object(v["__decorate"])([Object(g["a"])({components:{Spinner:Rr}})],ba);var va=ba,ga=va,ha=(n("4371"),Object(le["a"])(ga,ma,fa,!1,null,"34ccd241",null)),_a=ha.exports,ja=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.formFields=Qe.settings(),e.imgOriginal=null,e.loading=!1,e.showUpdateImgDialog=!1,e.showUpdateInfoDialog=!1,e.user=null,e.Routes=si,e}return Object(m["a"])(n,[{key:"onUserReady",value:function(e){e&&this.isUserAuthed&&this.initFields()}},{key:"onRouteUpdate",value:function(){this.fetchUser()}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetchUser();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUser",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.tagsSet([]),this.user=null,t=this.$route.params.userId,t){e.next=5;break}return e.abrupt("return");case 5:return this.loading=!0,e.next=8,Ot(this.vuexFetchUser({id:t}));case 8:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],o=r[1],!a){e.next=14;break}return e.abrupt("return");case 14:return this.user=o,this.loading=!1,e.next=18,Rt(1e3);case 18:ae.$emit(te.FetchComments);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initFields",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot(St(this.formFields,this.user));case 2:if(t=e.sent,n=Object(Ee["a"])(t,2),r=n[0],a=n[1],!r){e.next=8;break}return e.abrupt("return");case 8:this.formFields=a;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateImg",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Ot(this.updateUserImg(t));case 3:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],r[1],!a){e.next=9;break}return e.abrupt("return");case 9:this.loading=!1,this.showUpdateImgDialog=!1,this.fetchUser();case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUpdateInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Updating user info > :",t),this.loading=!0,e.next=4,Ot(this.updateInfo(t));case 4:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],r[1],!a){e.next=10;break}return e.abrupt("return");case 10:this.loading=!1,this.showUpdateInfoDialog=!1,this.fetchUser();case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onImgClick",value:function(){this.$config.isChromeExtension()?this.$showSnack("Please update img through web version of the app: `rants.app`"):this.showUpdateImgDialog=!0}},{key:"isUserAuthed",get:function(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.id)===(null===(t=this.authedUser)||void 0===t?void 0:t.id)}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],ja.prototype,"authedUser",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.updateUserImg))],ja.prototype,"updateUserImg",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.updateInfo))],ja.prototype,"updateInfo",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.fetchUser))],ja.prototype,"vuexFetchUser",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])($.set))],ja.prototype,"tagsSet",void 0),Object(v["__decorate"])([Object(g["f"])("user")],ja.prototype,"onUserReady",null),Object(v["__decorate"])([Object(g["f"])("$route")],ja.prototype,"onRouteUpdate",null),ja=Object(v["__decorate"])([Object(g["a"])({components:{FormDialog:pa,UpdateImageDialog:Ar,Cta:_a,Spinner:Rr,TheCommentsPage:ur}})],ja);var Oa=ja,ya=Oa,wa=(n("a3ab"),Object(le["a"])(ya,lr,dr,!1,null,"66c3c67d",null)),ka=wa.exports,xa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"login",attrs:{fluid:"","pa-0":"",color:"white"}},[n("v-app-bar",{staticClass:"navbar",attrs:{color:"white",flat:"",height:"74",fixed:""}},[n("router-link",{staticClass:"d-flex align-center",attrs:{to:"/"}},[n("div",[n("img",{staticClass:"svg-color-filter",attrs:{height:"45px",src:"/img/logo-outline.svg"}})]),n("v-toolbar-title",{staticClass:"ml-3"},[n("span",{staticClass:"rantsDark--text"},[e._v("Rants.App")])])],1),n("v-spacer"),n("LangSelector")],1),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{staticClass:"content-scrollable"})],1)],1)},Sa=[],Ca=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"min-width":100},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{icon:"",dark:e.dark}},r),[n("v-icon",[e._v("mdi-earth")])],1)]}}])},[n("v-list",e._l(e.languages,(function(t){return n("v-list-item",{key:t,class:{"active-lang":e.getLang==t},on:{click:function(n){return e.onSelectLang(t)}}},[n("v-list-item-title",{staticClass:"text-xs-center"},[e._v(" "+e._s(t.toUpperCase())+" ")])],1)})),1)],1)},Ra=[],Ua=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"onSelectLang",value:function(e){this.setLang(e),window.location.reload()}},{key:"languages",get:function(){return gt.allowedLang}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getLang))],Ua.prototype,"getLang",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.setLang))],Ua.prototype,"setLang",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],Ua.prototype,"isLogged",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.updateUser))],Ua.prototype,"updateUser",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],Ua.prototype,"dark",void 0),Ua=Object(v["__decorate"])([Object(g["a"])({})],Ua);var Ta=Ua,Ia=Ta,Pa=(n("2d83a"),Object(le["a"])(Ia,Ca,Ra,!1,null,"857f69ca",null)),Ea=Pa.exports,Aa=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);Aa=Object(v["__decorate"])([Object(g["a"])({components:{LangSelector:Ea}})],Aa);var Da=Aa,Fa=Da,La=(n("0ad4"),Object(le["a"])(Fa,xa,Sa,!1,null,"73af73ab",null)),$a=La.exports,Na=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-main"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{xs:"12",sm:"10",md:"8",lg:"5"}},[n("v-btn",{staticClass:"mt-5",attrs:{disabled:e.loading,loading:e.loading,block:"",outlined:"",height:"60px"},on:{click:e.googleSignin}},[n("img",{attrs:{height:"45px",src:"/img/google-btn.svg"}}),e._v(" Sign in with Google ")]),n("div",{staticClass:"ma-5 pa-5 d-flex justify-center align-center"},[e._v(" "+e._s(e.$txt.Or())+" ")]),n("v-btn",{attrs:{block:"",outlined:"",height:"60px",to:{name:e.Routes.login.children.loginSignin.name},disabled:e.loading,loading:e.loading}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-login")]),e._v(" Sign In with Password ")],1),n("v-btn",{staticClass:"mt-5",attrs:{block:"",outlined:"",height:"60px",to:{name:e.Routes.login.children.loginSignup.name},disabled:e.loading,loading:e.loading}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-plus")]),e._v(" Sign Up With Password ")],1)],1)],1)],1)],1)},Ma=[],Va=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e}return Object(m["a"])(n,[{key:"mounted",value:function(){De.a.apps.length||(De.a.initializeApp(pt),console.log("app is init : "))}},{key:"googleSignin",value:function(){var e=this,t=this.$config.isChromeExtension();if(t){this.loading=!0;var n="You'll see login popup, after sign in open the extension again";return this.$showSnack(n),void setTimeout((function(){chrome.runtime.sendMessage({msg:"signInWithPopup"}),setTimeout((function(){return window.close}),100)}),5e3)}var r=new De.a.auth.GoogleAuthProvider;console.log(" provider: ",r),De.a.auth().signInWithPopup(r).then((function(t){var n=t.credential,r=(n.accessToken,t.user);if(r){var a={email:r.email||"",localId:r.uid,refreshToken:r.refreshToken,idToken:String(n.accessToken),password:"",nickname:""};e.signinUser(a)}})).catch((function(e){e.code,e.message,e.email,e.credential}))}},{key:"signinUser",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot(this.vuexSigninGoogle(t));case 2:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],r[1],!a){e.next=8;break}return e.abrupt("return");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Routes",get:function(){return si}}]),n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.signinGoogle))],Va.prototype,"vuexSigninGoogle",void 0),Va=Object(v["__decorate"])([Object(g["a"])({})],Va);var Ba,qa=Va,Ga=qa,za=(n("2732"),Object(le["a"])(Ga,Na,Ma,!1,null,"e9c4d29e",null)),Wa=za.exports,Ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-signin"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{xs:"12",sm:"10",md:"8",lg:"5"}},[n("h1",{staticClass:"text-header mb-3"},[e._v("Sign In")]),n("div",{staticClass:"text-msg"},[e._v(" Please input your email and password ")]),n("FormParser",{ref:"FormParser",attrs:{isLoading:e.isLoading,formFields:e.formFields},on:{onSubmit:e.onSubmit},scopedSlots:e._u([{key:"default",fn:function(){return[e.error?n("v-alert",{attrs:{dense:"",outlined:"",dismissible:"",type:"error",transition:"slide-y-transition"}},[e._v(" "+e._s(e.error.message)+" ")]):e._e(),n("router-link",{attrs:{to:e.forgotRoute}},[e._v("Forgot password?")]),n("v-btn",{staticClass:"mt-5",attrs:{loading:e.isLoading,block:"",outlined:"",height:"60"},on:{click:e.submitForm}},[e._v(" Next ")])]},proxy:!0}])}),n("v-btn",{staticClass:"go-back-btn mt-5",attrs:{disabled:e.isLoading,icon:""},on:{click:e.goLoginMain}},[n("v-icon",[e._v("mdi-arrow-left")])],1)],1)],1)],1)],1)},Ya=[];(function(e){e["NoUser"]="EMAIL_NOT_FOUND",e["WrongPassword"]="INVALID_PASSWORD"})(Ba||(Ba={}));var Ka=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoading=!1,e.formFields=Qe.signin(),e.error=null,e}return Object(m["a"])(n,[{key:"submitForm",value:function(){var e;console.log("submitting form -> :"),null===(e=this.$refs["FormParser"])||void 0===e||e.onSubmitForm()}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,this.isLoading=!0,a={email:n,password:r},e.next=5,Ot(this.vuexSignin(a));case 5:o=e.sent,i=Object(Ee["a"])(o,2),s=i[0],c=i[1],console.log("Signin: errors",s),s&&s.length>0&&this.handleError(s[0]),console.log("Signin: res",c),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleError",value:function(e){console.log("Signup, onSubmit -> err:",e),this.error={code:e.message,message:e.message};var t=this.error.code;t===Ba.NoUser?this.error.message=this.$txt.AuthNoUser():t===Ba.WrongPassword&&(this.error.message=this.$txt.AuthWrongPassword())}},{key:"goLoginMain",value:function(){var e=si.login.name;this.$router.push({name:e})}},{key:"forgotRoute",get:function(){return{name:si.login.children.loginForgot.name}}}]),n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.signin))],Ka.prototype,"vuexSignin",void 0),Ka=Object(v["__decorate"])([Object(g["a"])({components:{FormParser:sa}})],Ka);var Qa,Ja=Ka,Xa=Ja,Za=(n("43cf"),Object(le["a"])(Xa,Ha,Ya,!1,null,"1ae01303",null)),eo=Za.exports,to=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-signin"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{xs:"12",sm:"10",md:"8",lg:"5"}},[n("h1",{staticClass:"text-header mb-3"},[e._v(e._s(e.$txt.PasswordRecovery()))]),n("div",{staticClass:"text-msg"},[e._v(e._s(e.$txt.ProvideEmail()))]),n("FormParser",{ref:"FormParser",attrs:{isLoading:e.isLoading,formFields:e.formFields},on:{onSubmit:e.onSubmit},scopedSlots:e._u([{key:"default",fn:function(){return[e.error?n("v-alert",{attrs:{dense:"",outlined:"",dismissible:"",type:"error",transition:"slide-y-transition"}},[e._v(" "+e._s(e.error.message)+" ")]):e._e(),n("v-btn",{staticClass:"mt-5",attrs:{loading:e.isLoading,block:"",outlined:"",height:"60"},on:{click:e.submitForm}},[e._v(" Next ")])]},proxy:!0}])}),n("v-btn",{staticClass:"go-back-btn mt-5",attrs:{to:e.getSigninRoute,disabled:e.isLoading,icon:""}},[n("v-icon",[e._v("mdi-arrow-left")])],1)],1)],1)],1)],1)},no=[];(function(e){e["NoUser"]="auth/user-not-found",e["WrongPassword"]="auth/wrong-password"})(Qa||(Qa={}));var ro=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoading=!1,e.formFields=Qe.forgot(),e.error=null,e}return Object(m["a"])(n,[{key:"submitForm",value:function(){var e;console.log("submitting form -> :"),null===(e=this.$refs["FormParser"])||void 0===e||e.onSubmitForm()}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.email,this.isLoading=!0,this.error=null,r={email:n},e.next=6,Ot(this.vuexSendForgotEmail(r));case 6:a=e.sent,o=Object(Ee["a"])(a,2),i=o[0],o[1],this.isLoading=!1,i&&i.length>0&&this.handleError(i[0]),s=si.login.children.loginSignin.name,this.$router.push({name:s}),this.$showSnack("Reset link is sent to your email. Delivery can take up to 5-10 minutes.");case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleError",value:function(e){this.error={code:e.message,message:e.message};var t=this.error.code;"EMAIL_NOT_FOUND"===t&&(this.error.message="Email not found")}},{key:"getSigninRoute",get:function(){return{name:si.login.children.loginSignin.name}}}]),n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.sendForgotEmail))],ro.prototype,"vuexSendForgotEmail",void 0),ro=Object(v["__decorate"])([Object(g["a"])({components:{FormParser:sa}})],ro);var ao,oo=ro,io=oo,so=(n("a53f"),Object(le["a"])(io,to,no,!1,null,"7ef29ed0",null)),co=so.exports,uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-signup"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{xs:"12",sm:"10",md:"8",lg:"5"}},[n("h1",{staticClass:"text-header mb-3"},[e._v(e._s(e.$txt.SignUp()))]),n("div",{staticClass:"text-msg"},[e._v(e._s(e.$txt.SignUpCta()))]),n("FormParser",{ref:"FormParser",attrs:{isLoading:e.isLoading,formFields:e.formFields},on:{onSubmit:e.onSubmit},scopedSlots:e._u([{key:"default",fn:function(){return[e.error?n("v-alert",{attrs:{dense:"",outlined:"",dismissible:"",type:"error",transition:"slide-y-transition"}},[e._v(" "+e._s(e.error.message)+" ")]):e._e(),n("v-btn",{staticClass:"mt-5",attrs:{loading:e.isLoading,block:"",outlined:"",height:"60"},on:{click:e.submitForm}},[e._v(" Next ")])]},proxy:!0}])}),n("v-btn",{staticClass:"go-back-btn mt-5",attrs:{disabled:e.isLoading,icon:""},on:{click:e.goLoginMain}},[n("v-icon",[e._v("mdi-arrow-left")])],1)],1)],1)],1)],1)},lo=[],po={MISSING_PASSWORD:"MISSING_PASSWORD",EMAIL_EXISTS:"EMAIL_EXISTS"},mo={get:"get",put:"put",patch:"patch",post:"post",delete:"delete"},fo=function(e,t){var n="".concat(st,"/").concat(t,"?key=").concat(ct);return{method:e,path:n}},bo=function(e){return fo(mo.get,e)},vo=function(e){return fo(mo.post,e)},go=function(e){return fo(mo.put,e)},ho=function(e){return fo(mo.delete,e)},_o={user:{signup:function(){return vo("accounts:signUp")},signin:function(){return vo("accounts:signInWithPassword")},sendForgotEmail:function(){return vo("accounts:sendOobCode")},updateUserImage:function(e){return{method:mo.post,path:"https://firebasestorage.googleapis.com/v0/b/deals-4444.appspot.com/o?name=users%2F".concat(e)}},refreshToken:function(){return{method:mo.post,path:"https://securetoken.googleapis.com/v1/token?key=".concat(ut)}},
//! UNPROCESSED - raw copy from esg
changePassword:function(){return go("auth/change-password")},updateUserProfile:function(){return go("users/me")},userProfile:function(){return bo("users/me")},deleteUserImage:function(){return ho("users/upload-image")},userOrganization:function(){return bo("users/me/organization")},logout:function(){return bo("auth/logout")},forgotPassword:function(){return vo("auth/forget-password")},resetPassword:function(){return vo("auth/reset-password")},infoByOtpToken:function(e){return bo("auth/token/".concat(e))}}};(function(e){e["NoUser"]="auth/user-not-found",e["WrongPassword"]="auth/wrong-password"})(ao||(ao={}));var jo=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoading=!1,e.formFields=Qe.signup(),e.error=null,e}return Object(m["a"])(n,[{key:"submitForm",value:function(){var e;console.log("submitting form -> :"),null===(e=this.$refs["FormParser"])||void 0===e||e.onSubmitForm()}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=t.nickname,this.isLoading=!0,o={email:n,password:r,nickname:a},e.next=5,Ot(this.vuexSignup(o));case 5:if(i=e.sent,s=Object(Ee["a"])(i,2),c=s[0],s[1],console.log("errors",c),this.isLoading=!1,!c){e.next=15;break}return l=null===(u=c[0])||void 0===u?void 0:u.message,l===po.EMAIL_EXISTS&&(console.log("EMail already exists"),this.$showSnack("User already exists by given email")),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleError",value:function(e){this.error={code:e.code,message:e.message};var t=e.code;t===ao.NoUser?this.error.message=this.$txt.AuthNoUser():t===ao.WrongPassword&&(this.error.message=this.$txt.AuthWrongPassword())}},{key:"goLoginMain",value:function(){var e=si.login.name;this.$router.push({name:e})}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getLang))],jo.prototype,"getLang",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.signup))],jo.prototype,"vuexSignup",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.fetchUserNickname))],jo.prototype,"fetchUserNickname",void 0),jo=Object(v["__decorate"])([Object(g["a"])({components:{FormParser:sa}})],jo);var Oo=jo,yo=Oo,wo=(n("236a"),Object(le["a"])(yo,uo,lo,!1,null,"39e3e836",null)),ko=wo.exports,xo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Spinner",{attrs:{fullscreen:!0}})],1)},So=[],Co=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoggingOut=!1,e}return Object(m["a"])(n,[{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=2;break}return e.abrupt("return",this.gotoLoginPage());case 2:return this.isLoggingOut=!0,e.next=5,this.logout();case 5:this.isLoggingOut=!1,this.$showSnack(this.$txt.logoutSuccess()),this.gotoLoginPage();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"gotoLoginPage",value:function(){var e=si.root.name;this.$router.push({name:e})}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],Co.prototype,"isLogged",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.logout))],Co.prototype,"logout",void 0),Co=Object(v["__decorate"])([Object(g["a"])({components:{Spinner:Rr}})],Co);var Ro=Co,Uo=Ro,To=Object(le["a"])(Uo,xo,So,!1,null,null,null),Io=To.exports,Po=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"the-subscriptions scrollable pt-5 "},[n("TheSubscriptionsList",{staticClass:"content-scrollable",attrs:{subs:e.subs,loading:!e.loading}})],1)},Eo=[],Ao=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?n("div",{staticClass:"spinner-container"},[n("Spinner")],1):e.subs&&0!==e.subs.length?n("v-flex",{staticClass:"items-list__container mt-0 ml-0 mr-0",attrs:{xs12:"","pa-0":"","ma-5":""}},[e.subs.length>0?n("div",{staticClass:"elevation-0 items-list"},[e._l(e.subs,(function(t){return[n("SubscriptionsItem",{key:t.id,attrs:{item:t},on:{unsub:e.onUnsubConfirm}}),n("v-divider",{key:"item"+t.id})]}))],2):e._e()]):n("div",{staticClass:"cta-container"},[n("Cta",{attrs:{text:"Not subscribed to any tags yet",icon:"mdi-checkbox-multiple-blank-circle"}})],1),e.isConfirmUnsub?n("ConfirmationDialog",{attrs:{title:"Are you sure?",body:"Please confirm unsubscribing from this tag group",action:e.unsub,isLoading:e.loadingUnsub},model:{value:e.isConfirmUnsub,callback:function(t){e.isConfirmUnsub=t},expression:"isConfirmUnsub"}}):e._e()],1)},Do=[],Fo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subscriptions-item d-flex align-center ma-5"},[n("v-btn",{attrs:{icon:"",color:"red"},on:{click:e.unsub}},[n("v-icon",[e._v("mdi-close")])],1),e._l(e.tags,(function(t){return n("Tag",{key:t,staticClass:"my-1",attrs:{tag:t,isLast:t===e.tags[e.tags.length-1]}})})),n("TagsubBtn",{attrs:{tags:e.tags}})],2)},Lo=[],$o=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"unsub",value:function(){return this.item}},{key:"tags",get:function(){return this.item.subscriptions_tags.map((function(e){var t=e.tagId;return t}))}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],$o.prototype,"item",void 0),Object(v["__decorate"])([Object(g["b"])()],$o.prototype,"unsub",null),$o=Object(v["__decorate"])([Object(g["a"])({components:{Cta:_a,Spinner:Rr,TagsubBtn:Gn,Tag:Jn}})],$o);var No=$o,Mo=No,Vo=(n("2ec7"),Object(le["a"])(Mo,Fo,Lo,!1,null,null,null)),Bo=Vo.exports,qo=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isConfirmUnsub=!1,e.loadingUnsub=!1,e.selected=null,e}return Object(m["a"])(n,[{key:"unsub",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selected){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUnsub=!0,e.next=5,Ot(this.subsDelete(this.selected.id));case 5:t=e.sent,n=Object(Ee["a"])(t,2),r=n[0],n[1],r&&this.$showSnack("Error unsubscribing from tag group"),this.loadingUnsub=!1,this.isConfirmUnsub=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUnsubConfirm",value:function(e){this.isConfirmUnsub=!0,this.selected=e}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],qo.prototype,"getUser",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])($.subsDelete))],qo.prototype,"subsDelete",void 0),Object(v["__decorate"])([Object(g["d"])()],qo.prototype,"subs",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],qo.prototype,"loading",void 0),qo=Object(v["__decorate"])([Object(g["a"])({components:{Cta:_a,Spinner:Rr,SubscriptionsItem:Bo,ConfirmationDialog:vn}})],qo);var Go=qo,zo=Go,Wo=(n("9515"),Object(le["a"])(zo,Ao,Do,!1,null,null,null)),Ho=Wo.exports,Yo=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(z.fetch))],Yo.prototype,"fetch",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getRecords))],Yo.prototype,"tags",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],Yo.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getSubs))],Yo.prototype,"subs",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])($.fetchSubs))],Yo.prototype,"subsFetch",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getIsSubsFetched))],Yo.prototype,"loading",void 0),Yo=Object(v["__decorate"])([Object(g["a"])({components:{TheSubscriptionsList:Ho}})],Yo);var Ko=Yo,Qo=Ko,Jo=(n("e603"),Object(le["a"])(Qo,Po,Eo,!1,null,null,null)),Xo=Jo.exports,Zo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"the-events pt-5",class:{scrollable:!e.subpage}},[e.isInit?n("Lister",{attrs:{records:e.events,loading:e.loading,isThreadEnd:e.isThreadEnd,recordsPerPage:e.EVENTS_PER_PAGE,iterable:e.Iterables.Event,ctaText:"No events yet"},on:{showmore:function(t){return e.fetchEvents(!0)}}}):e._e()],1)},ei=[],ti=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.isThreadEnd=!1,e.isInit=!1,e.EVENTS_PER_PAGE=dt,e.Iterables=gt.iterables,e}return Object(m["a"])(n,[{key:"mounted",value:function(){this.fetchEvents()}},{key:"fetchEvents",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c=this,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]&&u[0],this.loading=!0,t||(this.isThreadEnd=!1,this.isInit=!1,this.$nextTick((function(){return c.isInit=!0}))),n=this.userId,r={showMore:t,userId:n},e.next=7,Ot(this.vuexFetch(r));case 7:if(a=e.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){e.next=13;break}return e.abrupt("return");case 13:this.loading=!1,0===s.length&&(this.isThreadEnd=!0);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hlUserId",get:function(){return this.$route.query.hl}}]),n}(g["e"]);Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(ee.fetch))],ti.prototype,"vuexFetch",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(ee.getRecords))],ti.prototype,"events",void 0),Object(v["__decorate"])([Object(g["d"])({default:""})],ti.prototype,"userId",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],ti.prototype,"subpage",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],ti.prototype,"repliesAsRoot",void 0),ti=Object(v["__decorate"])([Object(g["a"])({components:{}})],ti);var ni=ti,ri=ni,ai=(n("19ba"),Object(le["a"])(ri,Zo,ei,!1,null,"27e9c1f0",null)),oi=ai.exports;c["default"].use(Te["a"]);var ii,si={home:{path:"/",name:"home",redirect:{name:"comments"}},root:{path:"/",name:"root",redirect:{name:"comments"}},comments:{path:"/comments",name:"comments",meta:{title:"comments"},component:ur},events:{path:"/events",name:"events",meta:{owner:!0,title:"Rants - My Events"},component:oi},profile:{path:"/profile/:userId",name:"profile",component:ka,meta:{layout:"subpage",owner:!0,title:"User"}},subscriptions:{path:"/subscriptions",name:"subscriptions",component:Xo,meta:{layout:"subpage",title:"Rants - My Subs"}},login:{path:"/login",name:"login",component:$a,meta:{layout:"plain",authPage:!0},redirect:{name:"loginMain"},children:{loginMain:{path:"",name:"loginMain",component:Wa,meta:{layout:"plain"}},loginSignin:{path:"signin",name:"loginSignin",component:eo,meta:{layout:"plain"}},loginForgot:{path:"forgot",name:"loginForgot",component:co,meta:{layout:"plain"}},loginSignup:{path:"signup",name:"loginSignup",component:ko,meta:{layout:"plain"}}}},logout:{path:"/logout",name:"logout",component:Io,meta:{layout:"plain",openAlways:!0}},redirect:{path:"*",redirect:"/"}},ci=function(e){return e.children?Object(s["a"])(Object(s["a"])({},e),{},{children:ye.a.values(e.children)}):e},ui=ye.a.values(si).map(ci),li=new Te["a"]({mode:"history",scrollBehavior:function(){return{x:0,y:0}},routes:ui}),di=li,pi=n("9483");Object(pi["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh.");var t,n="New version is available, please reload the app";confirm(n)&&(console.log("sw reload init, registration",e),null===(t=e.waiting)||void 0===t||t.postMessage({action:"skipWaiting"}))},offline:function(){alert("App is offline, please check your connection and try again."),console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(e){console.log("registerServiceWorker -> error:",e),ii||(window.location.reload(),ii=!0)}));var mi=n("2f62"),fi=n("bfa9"),bi=(n("25f0"),n("8785")),vi=n("9530"),gi=n.n(vi),hi=(n("5db7"),n("73d9"),n("b85c")),_i=n("15fd"),ji=n("74ca"),Oi=n("2bf2"),yi=n("c2c3"),wi=n("d634"),ki=n("478e"),xi=n("c0cc"),Si=n("4518"),Ci=n("522d"),Ri=n("363e"),Ui=n.n(Ri),Ti=n("633a"),Ii=n("e13b"),Pi={httpUri:gt.backendUrlHttp,wsUri:gt.backendUrl},Ei=null,Ai=void 0,Di=null,Fi=function(){if(Di){var e=Object.assign({},Di.operations);Di.close(!0),Di.connect(),Object.keys(e).forEach((function(t){var n;null===(n=Di)||void 0===n||n.sendMessage(t,Ui.a.GQL_START,e[t].options)}))}},Li=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,u,l,d,p,m,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=f.length>0&&void 0!==f[0]?f[0]:function(){return""},n=f.length>1?f[1]:void 0,r=f.length>2?f[2]:void 0,a=f.length>3?f[3]:void 0,o=new ki["a"]({uri:Pi.httpUri}),Pi.wsUri&&(Di=new Ti["SubscriptionClient"](Pi.wsUri,{lazy:!0,reconnect:!0,connectionParams:function(){var e=t();return e?{headers:{authorization:"Bearer ".concat(e)}}:{headers:{}}}}),i=new xi["a"](Di),o=Object(wi["e"])((function(e){var t=e.query,n=Object(Si["l"])(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),i,o)),c=Object(yi["a"])((function(e,n){var r=n.headers,a=Object(_i["a"])(n,["headers"]),o=t();return Object(s["a"])({headers:Object(s["a"])(Object(s["a"])({},r),o?{authorization:"Bearer ".concat(o)}:{})},a)})),u=null,l=!1,d=[],p=function(){d.map((function(e){return e()})),d=[]},m=Object(Ii["a"])((function(e){var t,a=e.graphQLErrors,o=e.networkError,i=e.operation,s=e.forward;if(a){var c,m=Object(hi["a"])(a);try{for(m.s();!(c=m.n()).done;){var f=c.value;console.log("errorLink err:",f);var b={badClaims:"jwt-invalid-claims",badJwt:"invalid-jwt"};switch(null===f||void 0===f||null===(t=f.extensions)||void 0===t?void 0:t.code){case b.badJwt:return console.log("UNAUTHED"),l?u=Object(wi["d"])(new Promise((function(e){d.push((function(){return e(null)}))}))):(l=!0,u=Object(wi["d"])(n().then((function(e){return Fi(),p(),e})).catch((function(){d=[]})).finally((function(){return l=!1}))).filter((function(e){return Boolean(e)}))),u.flatMap((function(){return s(i)}));case b.badClaims:console.log("bad claim, logging out"),r();break}}}catch(f){m.e(f)}finally{m.f()}}if(o){console.log("[Network error]: ".concat(o));var v=4e3;return console.log("Try gql request again in ".concat(v,"ms... ")),u=Object(wi["d"])(new Promise((function(e){setTimeout((function(){return console.log("Resolving forwardx : "),e(null)}),v)}))),u.flatMap((function(){return s(i)}))}})),Ei=new ji["a"]({link:m.concat(c.concat(o)),cache:new Oi["a"]({addTypename:!0}),connectToDevTools:!0}),Ai=new Ci["a"]({defaultClient:Ei}),a();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$i=Ai,Ni=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#226FFA",n=gt.isGqlDebug;if(n){var r="Gql: "+e.gql.definitions[0].name.value,a="font-size: 20px;background: #ffffff; color: ".concat(t,"; padding: 2px;  border:3px solid ").concat(t,"; border-radius:5px;");console.log("%c ".concat(r," "),a),console.log(r+" - payload: ",e.variables);var o=e.parseResponse;e.parseResponse=function(e){var t=o(e);return console.log(r+" - response: ",t),t}}},Mi=function e(t){if(!Ei)return console.log("App is not ready yet, debouncing gql request:"),Ni(t,"#ff6666"),new Promise((function(n){setTimeout((function(){return n(e(t))}),1e3)}));var n;Ni(t);var r=t.noCache?"network-only":void 0;if("query"===t.type){var a={variables:t.variables,fetchPolicy:r,query:t.gql};n=Ei.query(a)}else{if("mutation"!==t.type)return Promise.reject("No promise");var o={variables:t.variables,fetchPolicy:r,mutation:t.gql};n=Ei.mutate(o)}return n.then((function(e){console.log("PARSING RESPONSE -> :",t);var n=t.parseResponse(e.data);return[null,n]})).catch((function(e){return console.error("doGql error > :",e),[e]}))};function Vi(){var e=Object(bi["a"])(["\n        mutation updateInfo(\n          $id: String!\n          $nickname: String\n          $name: String!\n          $surname: String\n        ) {\n          update_users_by_pk(\n            pk_columns: { id: $id }\n            _set: { nickname: $nickname, name: $name, surname: $surname }\n          ) {\n            ...User\n          }\n        }\n        ","\n      "]);return Vi=function(){return e},e}function Bi(){var e=Object(bi["a"])(["\n        mutation updateImg($id: String!, $img: String!) {\n          update_users_by_pk(pk_columns: { id: $id }, _set: { img: $img }) {\n            ...User\n          }\n        }\n        ","\n      "]);return Bi=function(){return e},e}function qi(){var e=Object(bi["a"])(["\n        mutation create(\n          $email: String!\n          $password: String!\n          $nickname: String!\n          $name: String\n          $surname: String\n          $img: String\n          $language: String\n        ) {\n          insert_users_one(\n            object: {\n              email: $email\n              password: $password\n              nickname: $nickname\n              name: $name\n              surname: $surname\n              img: $img\n              language: $language\n            }\n          ) {\n            ...User\n          }\n        }\n        ","\n      "]);return qi=function(){return e},e}function Gi(){var e=Object(bi["a"])(["\n        query fetchUser($nickname: String!) {\n          users_public(where: { nickname: { _eq: $nickname } }) {\n            ...UserPublic\n          }\n        }\n        ","\n      "]);return Gi=function(){return e},e}function zi(){var e=Object(bi["a"])(["\n        query fetchUser($userId: String!) {\n          users_public(where: { id: { _eq: $userId } }) {\n            ...UserPublic\n          }\n        }\n        ","\n      "]);return zi=function(){return e},e}function Wi(){var e=Object(bi["a"])(["\n        query fetchUser($userId: String!) {\n          users_by_pk(id: $userId) {\n            ...User\n          }\n        }\n        ","\n      "]);return Wi=function(){return e},e}function Hi(){var e=Object(bi["a"])(["\n  fragment UserPublic on users_public {\n    id\n    name\n    surname\n    img\n    nickname\n  }\n"]);return Hi=function(){return e},e}function Yi(){var e=Object(bi["a"])(["\n  fragment User on users {\n    id\n    name\n    surname\n    img\n    email\n    nickname\n    language\n  }\n"]);return Yi=function(){return e},e}var Ki,Qi,Ji,Xi,Zi,es,ts=gi()(Yi()),ns=gi()(Hi()),rs={fetchOwner:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({variables:{userId:t},type:"query",gql:gi()(Wi(),ts),parseResponse:function(e){return e.users_by_pk}}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchUser:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({noCache:!0,variables:{userId:t},type:"query",gql:gi()(zi(),ns),parseResponse:function(e){return e.users_public&&e.users_public[0]}}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchUserNickname:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({variables:{nickname:t},type:"query",gql:gi()(Gi(),ns),parseResponse:function(e){return e.users_public&&e.users_public[0]}}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(qi(),ts),parseResponse:function(e){return e.insert_users_one}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateImg:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Bi(),ts),parseResponse:function(e){return e.update_users_by_pk}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Vi(),ts),parseResponse:function(e){return e.update_users_by_pk}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},as=n("3452"),os=n.n(as),is=di,ss={namespaced:!0,state:{user:null,authedUser:null,token:"",lang:W.en,commentsOrder:o.best},getters:(Ki={},Object(N["a"])(Ki,O.isLogged,(function(e){return!!e.user||!!e.token})),Object(N["a"])(Ki,O.getUser,(function(e){return e.user?Object(s["a"])({},e.user):null})),Object(N["a"])(Ki,O.getToken,(function(e){return e.token})),Object(N["a"])(Ki,O.getCommentsOrder,(function(e){return e.commentsOrder})),Object(N["a"])(Ki,O.isUserExpired,(function(e){if(!e.user||!e.user.expiresAt)return!1;var t=Wt()(e.user.expiresAt);return Wt()().isAfter(t)})),Object(N["a"])(Ki,O.getLang,(function(e){return e.user&&e.user.language?e.user.language:e.lang?e.lang:Me.locale})),Object(N["a"])(Ki,O.getAuthedUser,(function(e){return e.authedUser})),Ki),mutations:(Qi={},Object(N["a"])(Qi,y.setUser,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("user is set to -> :",t),e.user=t})),Object(N["a"])(Qi,y.setAuthedUser,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.authedUser=t})),Object(N["a"])(Qi,y.setToken,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.token=t})),Object(N["a"])(Qi,y.setLang,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.en;e.lang=t})),Object(N["a"])(Qi,y.setCommentsOrder,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.best;e.commentsOrder=t})),Qi),actions:(Ji={},Object(N["a"])(Ji,w.logout,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,n(S.resetAll,null,yt),t.abrupt("return",Promise.resolve());case 3:case"end":return t.stop()}}),t)})))()})),Object(N["a"])(Ji,w.reset,(function(e){var t=e.commit;return t(y.setToken),t(y.setUser),t(y.setAuthedUser),Promise.resolve()})),Object(N["a"])(Ji,w.updateUser,(function(){return new Promise((function(){}))})),Object(N["a"])(Ji,w.setToken,(function(e,t){var n=e.commit;return n(y.setToken,t),Promise.resolve()})),Object(N["a"])(Ji,w.setLang,(function(e,t){var n=e.commit,r=t.toLowerCase();return ae.$emit(te.ShowLoader),n(y.setLang,r),Me.locale=r,Wt.a.locale(r),Promise.resolve()})),Object(N["a"])(Ji,w.setUser,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r(y.setUser,t),n.abrupt("return",Promise.resolve());case 3:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.createUser,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,rs.create(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return r(y.setUser,s),n.abrupt("return",Promise.resolve(s));case 11:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.updateUserImg,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p,m,f,b,v,g,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,o=a[O.getUser],i={file:t,owner:o.id,folder:Be.users},s=a[O.getAuthedUser],c=s.email,u=s.password,n.next=6,wt(i,c,u);case 6:if(l=n.sent,d=Object(Ee["a"])(l,2),p=d[0],m=d[1],!p){n.next=12;break}return n.abrupt("return",Promise.reject(p));case 12:return console.log(" -> imgUrl:",m),f={id:o.id,img:m},n.next=16,rs.updateImg(f);case 16:if(b=n.sent,v=Object(Ee["a"])(b,2),g=v[0],h=v[1],!g){n.next=22;break}return n.abrupt("return",Promise.reject(g));case 22:return r(y.setUser,h),n.abrupt("return",Promise.resolve());case 24:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.updateInfo,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,o=a[O.getUser],i={id:o.id,nickname:t.nickname,name:t.name,surname:t.surname},n.next=5,rs.updateInfo(i);case 5:if(s=n.sent,c=Object(Ee["a"])(s,2),u=c[0],l=c[1],!u){n.next=11;break}return n.abrupt("return",Promise.reject(u));case 11:return r(y.setUser,l),n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.fetchUser,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,rs.fetchUser(n);case 3:if(r=e.sent,a=Object(Ee["a"])(r,2),o=a[0],i=a[1],!o){e.next=9;break}return e.abrupt("return",Promise.reject(o));case 9:return e.abrupt("return",Promise.resolve(i));case 10:case"end":return e.stop()}}),e)})))()})),Object(N["a"])(Ji,w.fetchUserNickname,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.nickname,e.next=3,rs.fetchUserNickname(n);case 3:if(r=e.sent,a=Object(Ee["a"])(r,2),o=a[0],i=a[1],!o){e.next=9;break}return e.abrupt("return",Promise.reject(o));case 9:return e.abrupt("return",Promise.resolve(i));case 10:case"end":return e.stop()}}),e)})))()})),Object(N["a"])(Ji,w.setCommentsOrder,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r(y.setCommentsOrder,t),n.abrupt("return",Promise.resolve());case 3:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.initApollo,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=e.getters,o=function(){return a[O.getToken]},i=function(){return r(w.refreshToken)},s=function(){return r(w.logout)},c=t,t||(c=function(){return r(S.initApp,null,yt)}),n.abrupt("return",Li(o,i,s,c));case 7:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.refreshToken,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c,u,l,d,p,m,f,b,v,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.dispatch,a=e.getters,o=a[O.getAuthedUser],i=_o.user.refreshToken(),c=o.refreshToken,//! DELETE, dev purpose only
u={grant_type:"refresh_token",refresh_token:c},t.next=7,Et(r,{url:i,data:u});case 7:if(l=t.sent,d=Object(Ee["a"])(l,2),p=d[0],m=d[1],!p){t.next=15;break}return console.log("token refresh err",p),v=null===(f=p.info)||void 0===f||null===(b=f.error)||void 0===b?void 0:b.errors,t.abrupt("return",Promise.reject(v));case 15:return console.log("resRefresh: ",m),g=Object(s["a"])({},o),g.refreshToken=m.refresh_token,n(y.setAuthedUser,g),n(y.setToken,m.id_token),t.abrupt("return",Promise.resolve(m.id_token));case 21:case"end":return t.stop()}}),t)})))()})),Object(N["a"])(Ji,w.signin,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p,m,f,b,v,g,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.dispatch,o=t.email,i=t.password,s=t.nickname,c=_o.user.signin(),u={email:o,password:i,returnSecureToken:!0},n.next=6,Et(a,{url:c,data:u});case 6:if(l=n.sent,d=Object(Ee["a"])(l,2),p=d[0],m=d[1],!p){n.next=14;break}return console.log("signin err",p),v=null===(f=p.info)||void 0===f||null===(b=f.error)||void 0===b?void 0:b.errors,n.abrupt("return",Promise.reject(v));case 14:return r(y.setToken,m.idToken),g={id:m.localId,password:i,email:o,nickname:s||"",refreshToken:m.refreshToken,accessToken:m.idToken},r(y.setAuthedUser,g),n.next=19,a(w.initApollo);case 19:return h=si.root.name,is.currentRoute.name!==h&&is.push({name:h}),n.abrupt("return",Promise.resolve());case 22:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.signinGoogle,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.dispatch,r(y.setToken,t.idToken),o={id:t.localId,password:t.password,email:t.email,nickname:t.nickname||"",refreshToken:t.refreshToken,accessToken:t.idToken},r(y.setAuthedUser,o),n.next=6,a(w.initApollo);case 6:return i=si.root.name,is.currentRoute.name!==i&&is.push({name:i}),n.abrupt("return",Promise.resolve());case 9:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.fetchUserDetails,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l,d,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.getters,a=r[O.getAuthedUser],t.next=4,rs.fetchOwner(a.id);case 4:if(o=t.sent,i=Object(Ee["a"])(o,2),s=i[0],c=i[1],!s){t.next=10;break}return t.abrupt("return",Promise.reject(s));case 10:if(n(y.setUser,c),console.log("AuthedUser:",a),c){t.next=26;break}return u={nickname:a.nickname,email:a.email,password:a.password&&os.a.SHA3(a.password).toString(),name:"",surname:"",img:gt.userDefaultImg,language:r[O.getLang]},u.nickname||(u.nickname=At(),console.error("BUG, user is in FB but no DB, no nick - assign random")),console.log("creating user:",u),t.next=18,rs.create(u);case 18:if(l=t.sent,d=Object(Ee["a"])(l,2),p=d[0],m=d[1],!p){t.next=24;break}return t.abrupt("return",Promise.reject(p));case 24:return n(y.setUser,m),t.abrupt("return",Promise.resolve(m));case 26:return t.abrupt("return",Promise.resolve(c));case 27:case"end":return t.stop()}}),t)})))()})),Object(N["a"])(Ji,w.signup,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p,m,f,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=t.email,o=t.password,i=t.nickname,s=_o.user.signup(),c={email:a,password:o,returnSecureToken:!0},n.next=6,Et(r,{url:s,data:c});case 6:if(u=n.sent,l=Object(Ee["a"])(u,2),d=l[0],p=l[1],!d){n.next=14;break}return console.log("signup err",d),b=null===(m=d.info)||void 0===m||null===(f=m.error)||void 0===f?void 0:f.errors,n.abrupt("return",Promise.reject(b));case 14:return console.log("fbUser",p),n.next=17,Rt(3e3);case 17:return console.log("signin attempt... "),n.next=20,r(w.signin,{email:a,password:o,nickname:i});case 20:return n.abrupt("return",Promise.resolve());case 21:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Ji,w.sendForgotEmail,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,r=e.dispatch,a=t.email,o=_o.user.sendForgotEmail(),i={email:a,requestType:"PASSWORD_RESET"},n.next=6,Et(r,{url:o,data:i});case 6:if(s=n.sent,c=Object(Ee["a"])(s,2),u=c[0],c[1],!u){n.next=14;break}return console.log('Error sending "Forgot Password" email: ',u),p=null===(l=u.info)||void 0===l||null===(d=l.error)||void 0===d?void 0:d.errors,n.abrupt("return",Promise.reject(p));case 14:return n.abrupt("return",Promise.resolve());case 15:case"end":return n.stop()}}),n)})))()})),Ji)},cs=(n("baa5"),di),us={namespaced:!0,state:{items:[]},getters:(Xi={},Object(N["a"])(Xi,U.getItems,(function(e){return e.items})),Object(N["a"])(Xi,U.getCurrent,(function(e){return console.log("HISTORY -> state.items:",e.items),e.items[e.items.length-1]})),Xi),mutations:(Zi={},Object(N["a"])(Zi,T.set,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.items=t})),Object(N["a"])(Zi,T.push,(function(e,t){e.items=[].concat(Object(d["a"])(e.items),[t])})),Object(N["a"])(Zi,T.pop,(function(e){e.items.pop(),console.log("popping! -> :"),e.items=Object(d["a"])(e.items)})),Zi),actions:(es={},Object(N["a"])(es,I.reset,(function(e){var t=e.commit;return t(T.set),Promise.resolve()})),Object(N["a"])(es,I.push,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r(T.push,t),t.isShallow&&(a=cs.resolve(t),o=a.route.fullPath,console.log(" -> history:",history),history.pushState({},"",o)),n.abrupt("return",Promise.resolve());case 4:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(es,I.goBack,(function(e){var t=arguments;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,o=t.length>1&&void 0!==t[1]&&t[1],a(T.pop),!o){n.next=6;break}return 0===r.items.length&&(i=window.location.pathname,s=i.substr(0,i.lastIndexOf("/")),cs.replace(s)),n.abrupt("return",Promise.resolve());case 6:return cs.go(-1),n.abrupt("return",Promise.resolve());case 8:case"end":return n.stop()}}),n)})))()})),es)};n("13d5");function ls(){var e=Object(bi["a"])(["\n        mutation subsDelete($id: uuid!) {\n          delete_subscriptions_by_pk(id: $id) {\n            id\n          }\n        }\n        ","\n      "]);return ls=function(){return e},e}function ds(){var e=Object(bi["a"])(["\n        mutation createSubscription {\n          insert_subscriptions_one(\n            object: {\n              subscriptions_tags: {\n                data: [","]\n              }\n            }\n          ) { ...Subscription }\n        }\n        ","\n      "]);return ds=function(){return e},e}function ps(){var e=Object(bi["a"])(["\n        query fetchSubs {\n          subscriptions(order_by: { createdAt: desc }) {\n            ...Subscription\n          }\n        }\n        ","\n      "]);return ps=function(){return e},e}function ms(){var e=Object(bi["a"])(["\n  fragment Subscription on subscriptions {\n    id\n    createdAt\n    subscriptions_tags {\n      tagId\n    }\n  }\n"]);return ms=function(){return e},e}var fs,bs,vs,gs=gi()(ms()),hs={fetchSubs:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({noCache:!0,type:"query",gql:gi()(ps(),gs),parseResponse:function(e){return e.subscriptions||[]}}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({type:"mutation",gql:gi()(ds(),t,gs),parseResponse:function(e){return null===e||void 0===e?void 0:e.insert_subscriptions_one}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),subsDelete:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:{id:t},type:"mutation",gql:gi()(ls(),gs),parseResponse:function(e){var t;return null===(t=e.delete_subscriptions_by_pk)||void 0===t?void 0:t.id}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},_s=function(e){var t=function(e,t){var n='{tag: {\n      data: { tag: "'.concat(t,'" }\n      on_conflict: {\n        constraint: tags_pkey\n        update_columns: [tag]\n      }\n    }}');return e?e+", "+n:""+n};return e.reduce(t,"")},js={namespaced:!0,state:{records:[],subs:[],isSubsFetched:!1},getters:(fs={},Object(N["a"])(fs,D.getRecords,(function(e){return e.records})),Object(N["a"])(fs,D.getSubs,(function(e){return e.subs})),Object(N["a"])(fs,D.getIsSubsFetched,(function(e){return e.isSubsFetched})),Object(N["a"])(fs,D.getSubsTags,(function(e){var t=[];return e.subs.forEach((function(e){var n=function(e){var t=e.tagId;return t},r=e.subscriptions_tags.map(n);t.push(r)})),t})),fs),mutations:(bs={},Object(N["a"])(bs,F.setRecords,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.records=t})),Object(N["a"])(bs,F.push,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.records=[].concat(Object(d["a"])(e.records),Object(d["a"])(t))})),Object(N["a"])(bs,F.subsPush,(function(e,t){e.subs=[t].concat(Object(d["a"])(e.subs))})),Object(N["a"])(bs,F.subsSet,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.subs=t})),Object(N["a"])(bs,F.subsDelete,(function(e,t){var n=jt(t),r=e.subs.findIndex(n);-1!==r&&e.subs.splice(r,1)})),Object(N["a"])(bs,F.setIsSubsFetched,(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isSubsFetched=t})),bs),actions:(vs={},Object(N["a"])(vs,L.fetchSubs,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n(F.setIsSubsFetched,!1),t.next=4,hs.fetchSubs();case 4:if(r=t.sent,a=Object(Ee["a"])(r,2),o=a[0],i=a[1],!o){t.next=10;break}return t.abrupt("return",Promise.reject(o));case 10:return n(F.subsSet,i),n(F.setIsSubsFetched,!0),t.abrupt("return",Promise.resolve(i));case 13:case"end":return t.stop()}}),t)})))()})),Object(N["a"])(vs,L.set,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit(F.setRecords,t),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(vs,L.subscribe,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getters,r=e.commit,a=n[D.getRecords],o=_s(a),t.next=5,hs.create(o);case 5:if(i=t.sent,s=Object(Ee["a"])(i,2),c=s[0],u=s[1],!c){t.next=11;break}return t.abrupt("return",Promise.reject(c));case 11:return r(F.subsPush,u),t.abrupt("return",Promise.resolve(u));case 13:case"end":return t.stop()}}),t)})))()})),Object(N["a"])(vs,L.subsDelete,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,hs.subsDelete(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return r(F.subsDelete,t),n.abrupt("return",Promise.resolve(s));case 11:case"end":return n.stop()}}),n)})))()})),vs)};function Os(){var e=Object(bi["a"])(["\n        mutation createReport($commentId: uuid!, $text: String!) {\n          insert_reports_one(object: { commentId: $commentId, text: $text }) {\n            commentId\n          }\n        }\n      "]);return Os=function(){return e},e}function ys(){var e=Object(bi["a"])(["\n        mutation commentUpvote($commentId: uuid!, $userId: String!) {\n          delete_comments_users_downvotes_by_pk(\n            commentId: $commentId\n            userId: $userId\n          ) {\n            comment {\n              ...Comment\n            }\n          }\n        }\n        ","\n      "]);return ys=function(){return e},e}function ws(){var e=Object(bi["a"])(["\n        mutation commentDownvote($id: uuid) {\n          insert_comments_users_downvotes(objects: [{ commentId: $id }]) {\n            returning {\n              comment {\n                ...Comment\n              }\n            }\n          }\n        }\n        ","\n      "]);return ws=function(){return e},e}function ks(){var e=Object(bi["a"])(["\n        mutation commentUpvote($commentId: uuid!, $userId: String!) {\n          delete_comments_users_upvotes_by_pk(\n            commentId: $commentId\n            userId: $userId\n          ) {\n            comment {\n              ...Comment\n            }\n          }\n        }\n        ","\n      "]);return ks=function(){return e},e}function xs(){var e=Object(bi["a"])(["\n        mutation commentUpvote($id: uuid) {\n          insert_comments_users_upvotes(objects: [{ commentId: $id }]) {\n            returning {\n              comment {\n                ...Comment\n              }\n            }\n          }\n        }\n        ","\n      "]);return xs=function(){return e},e}function Ss(){var e=Object(bi["a"])(['\n        mutation update($id: uuid!, $deletedAt: timestamp) {\n          update_comments_by_pk(\n            pk_columns: { id: $id }\n            _set: { text: "", deletedAt: $deletedAt, userId: null }\n          ) {\n            ...Comment\n          }\n        }\n        ',"\n      "]);return Ss=function(){return e},e}function Cs(){var e=Object(bi["a"])(["\n        mutation update($id: uuid!, $text: String!) {\n          update_comments_by_pk(\n            pk_columns: { id: $id }\n            _set: { text: $text }\n          ) {\n            ...Comment\n          }\n        }\n        ","\n      "]);return Cs=function(){return e},e}function Rs(){var e=Object(bi["a"])(["\n        mutation create($text: String!, $parentId: uuid,  $threadId: uuid, $depth: Int!) {\n          insert_comments(\n            objects: [\n              {\n                text: $text\n                parentId: $parentId\n                threadId: $threadId\n                depth: $depth\n                ","\n              }\n            ]\n          ) {\n            returning {\n              ...Comment,\n              replies(limit: 1){\n                ...Comment\n              }\n            }\n          }\n        }\n        ","\n      "]);return Rs=function(){return e},e}function Us(){var e=Object(bi["a"])(["\n      query fetchReplies {\n        comments(\n          order_by: {createdAt: asc }\n          limit: ","\n          where: {\n              _and: [\n                ",'\n                 {threadId: {_eq: "','"}}\n              ]\n            }\n\n        ) {\n          ...Comment\n        }\n      }\n      ',"\n    "]);return Us=function(){return e},e}function Ts(){var e=Object(bi["a"])(["\n        query fetch {\n          comments(\n            order_by: [","]\n            limit: ","\n            where: {\n              _and: [\n                ","\n                ","\n                ","\n                { _or: [","] }\n              ]\n            }\n          ) {\n            ...Comment\n            replies(\n              order_by: {createdAt: desc }\n              limit: 1\n              where: ","\n\n            ){ ...Comment }\n            ","\n          }\n        }\n        ","\n      "]);return Ts=function(){return e},e}function Is(){var e=Object(bi["a"])(["\n  fragment Comment on comments {\n    ","\n  }\n"]);return Is=function(){return e},e}var Ps,Es,As="{ deletedAt: {_is_null: true} }",Ds=(H[o.newest],"\n  id\n  text\n  createdAt\n  updatedAt\n  deletedAt\n  userId\n  parentId\n  threadId\n  depth\n  user {\n    id\n    name\n    surname\n    nickname\n    img\n  }\n  comments_tags {\n    tagId\n  }\n  upvotes: comments_users_upvotes {\n    user {\n      id\n      name\n      surname\n      nickname\n      img\n    }\n  }\n  downvotes: comments_users_downvotes {\n    user {\n      id\n    }\n  }\n  upvotesCount\n  replies_aggregate(where: ".concat(As,") {\n    aggregate {\n      count\n    }\n  }\n")),Fs=gi()(Is(),Ds),Ls={fetch:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=c.length>4&&void 0!==c[4]?c[4]:"{ threadId:{_is_null: true } }",i=c.length>5&&void 0!==c[5]?c[5]:"",s=c.length>6&&void 0!==c[6]?c[6]:lt,e.abrupt("return",Mi({noCache:!0,type:"query",gql:gi()(Ts(),n,s,r,o,a,t,As,i,Fs),parseResponse:function(e){return e.comments||[]}}));case 4:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}(),fetchReplies:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",r=a.length>2&&void 0!==a[2]?a[2]:5,e.abrupt("return",Mi({noCache:!0,type:"query",gql:gi()(Us(),r,n,t,Fs),parseResponse:function(e){return e.comments||[]}}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Rs(),n,Fs),parseResponse:function(e){var t;return null===e||void 0===e||null===(t=e.insert_comments)||void 0===t?void 0:t.returning[0]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Cs(),Fs),parseResponse:function(e){return null===e||void 0===e?void 0:e.update_comments_by_pk}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Ss(),Fs),parseResponse:function(e){return null===e||void 0===e?void 0:e.update_comments_by_pk}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),upvote:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,Mi({variables:{id:n},type:"mutation",gql:gi()(xs(),Fs),parseResponse:function(e){return e.insert_comments_users_upvotes.returning?e.insert_comments_users_upvotes.returning[0].comment:null}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),upvoteReset:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.userId,e.next=3,Mi({variables:{commentId:n,userId:r},type:"mutation",gql:gi()(ks(),Fs),parseResponse:function(e){var t;return null===(t=e.delete_comments_users_upvotes_by_pk)||void 0===t?void 0:t.comment}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),downvote:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,Mi({variables:{id:n},type:"mutation",gql:gi()(ws(),Fs),parseResponse:function(e){return e.insert_comments_users_downvotes.returning?e.insert_comments_users_downvotes.returning[0].comment:null}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),downvoteReset:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.userId,e.next=3,Mi({variables:{commentId:n,userId:r},type:"mutation",gql:gi()(ys(),Fs),parseResponse:function(e){var t;return null===(t=e.delete_comments_users_downvotes_by_pk)||void 0===t?void 0:t.comment}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),report:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.text,e.next=3,Mi({variables:{commentId:n,text:r},type:"mutation",gql:gi()(Os()),parseResponse:function(){return null}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},$s=function(e){var t=function(e,t){var n='{tag: {\n      data: { tag: "'.concat(t,'" }\n      on_conflict: {\n        constraint: tags_pkey\n        update_columns: [tag]\n      }\n    }}');return e?e+", "+n:""+n},n=e.reduce(t,"");return"comments_tags: { data: [ ".concat(n," ] }")},Ns=function(e){var t=e.reduce((function(e,t){var n=e?e+", ":"";return n+'{ comments_tags: { tagId: { _in: ["'.concat(t,'"] } } }')}),"");return"{ _and: [ ".concat(t," ] }")},Ms={namespaced:!0,state:{records:[]},getters:Object(N["a"])({},B.getRecords,(function(e){return e.records})),mutations:(Ps={},Object(N["a"])(Ps,q.set,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.records=t})),Object(N["a"])(Ps,q.addRecord,(function(e,t){e.records=[t].concat(Object(d["a"])(e.records))})),Object(N["a"])(Ps,q.update,(function(e,t){console.log("Mutations.update : ");var n=jt(t.id),r=e.records.findIndex(n);if(-1!==r){var a=e.records[r];t.replies=a.replies,g["e"].set(e.records,r,t)}})),Ps),actions:(Es={},Object(N["a"])(Es,G.set,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit(q.set,t),n.abrupt("return",Promise.resolve());case 2:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.create,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,u,l,p,m,f,b,v,g,h,_,j,O,y,w,k,x;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,o=e.rootGetters,i=e.getters,c=!!t.parent,u=o[$.extGetRecords],l=0,p=void 0,c&&t.parent&&(b=function(e){return e.tagId},u=t.parent.comments_tags.map(b),l=t.parent.depth+1,p=(null===(m=t.parent)||void 0===m?void 0:m.threadId)||(null===(f=t.parent)||void 0===f?void 0:f.id)),v=$s(u),g={text:t.text,parentId:null===(r=t.parent)||void 0===r?void 0:r.id,threadId:p,depth:l},n.next=10,Ls.create(g,v);case 10:if(h=n.sent,_=Object(Ee["a"])(h,2),j=_[0],O=_[1],!j){n.next=16;break}return n.abrupt("return",Promise.reject(j));case 16:return y=i[B.getRecords],c?(O.computedIsNew=!0,w=jt(p||""),k=y.find(w),k?(k.replies_aggregate.aggregate.count++,k.replies=[].concat(Object(d["a"])(k.replies),[O]),x=Object(s["a"])({},k),a(q.update,x)):a(q.set,[].concat(Object(d["a"])(y),[O]))):a(q.set,[O].concat(Object(d["a"])(y))),n.abrupt("return",Promise.resolve(O));case 19:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.update,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,Ls.update(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return n.next=11,r(G.updateSoft,s);case 11:return n.abrupt("return",Promise.resolve(s));case 12:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.updateSoft,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.getters,t.threadId){n.next=4;break}return r(q.update,t),n.abrupt("return",Promise.resolve(t));case 4:if(o=a[B.getRecords],i=jt(t.threadId),s=o.find(i),s){n.next=9;break}return n.abrupt("return",Promise.reject());case 9:return c=jt(t.id),u=s.replies.findIndex(c),s.replies[u]=t,s.replies=Object(d["a"])(s.replies),r(q.update,s),n.abrupt("return",Promise.resolve(t));case 15:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.fetch,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b,v,g,h,_,j,O,y,w,x,S,C,R,U,T,I;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.showMore,a=t.isFeed,o=e.getters,i=e.commit,s=e.rootGetters,c=e.dispatch,u=o[B.getRecords],l=u[u.length-1],r||i(q.set),p="",a?(f=s[$.extGetSubsTags],f.forEach((function(e){p+=Ns(e),p+=""===p?"":","}))):(m=s[$.extGetRecords],p=Ns(m)),b=s[k.extGetCommentsOrder],v=H[b],g="",r&&l&&(g=Y[b](l),console.log(" > lastComment:",l)),h="",_="{ threadId:{_is_null: true } }",j="",t.userId&&(h='{userId: {_eq: "'.concat(t.userId,'"}}'),_="",j="parent { user { id, nickname, name, surname, img }}"),n.next=17,Ls.fetch(p,v,g,h,_,j);case 17:if(O=n.sent,y=Object(Ee["a"])(O,2),w=y[0],x=y[1],!w){n.next=23;break}return n.abrupt("return",Promise.reject(w));case 23:if(x.forEach((function(e){e.replies.forEach((function(e){return e.ignoreShowmore=!0}))})),S=ye.a.cloneDeep(x),!r){n.next=33;break}if(C=function(e){var t=jt(e.id);return!u.find(t)},R=S.filter(C),U=[].concat(Object(d["a"])(u),Object(d["a"])(R)),i(q.set,U),0!==R.length){n.next=32;break}return n.abrupt("return",Promise.resolve([]));case 32:return n.abrupt("return",Promise.resolve(S));case 33:if(i(q.set,S),t.hlUserId||t.hlCommentId){n.next=36;break}return n.abrupt("return",Promise.resolve(S));case 36:if(!t.hlUserId){n.next=39;break}return T={hlUserId:t.hlUserId,filterTags:p,commentsOrder:v,filterAfter:g,includeParent:j},n.abrupt("return",c(G.fetchUserComments,T));case 39:if(!t.hlCommentId){n.next=42;break}return I={hlCommentId:t.hlCommentId,filterTags:p,commentsOrder:v},n.abrupt("return",c(G.fetchReplyComment,I));case 42:return n.abrupt("return",Promise.resolve(S));case 43:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.fetchUserComments,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b,v,g,h,_,j,O,y,w,k,x,S;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,o=a[B.getRecords],i=t.filterTags,s=t.commentsOrder,c=t.filterAfter,u=t.includeParent,l='{_or: [{userId: {_eq: "'.concat(t.hlUserId,'"}} {replies: {userId: {_eq: "').concat(t.hlUserId,'"}}}]}'),p="",n.next=7,Ls.fetch(i,s,c,u,l,p);case 7:if(m=n.sent,f=Object(Ee["a"])(m,2),b=f[0],v=f[1],!b){n.next=13;break}return n.abrupt("return",Promise.reject(b));case 13:if(0!==(null===v||void 0===v?void 0:v.length)){n.next=15;break}return n.abrupt("return",Promise.resolve([]));case 15:return g=[].concat(Object(d["a"])(v),Object(d["a"])(o)),g=ye.a.uniqBy(g,"id"),h=function(e){return!e.threadId},_=g.filter(h),j=g.filter((function(e){return!h(e)})),O=function(e){var t=function(t){return t.threadId&&t.threadId===e.id};return j.find(t)},y=_.filter(O),w=_.filter((function(e){return!O(e)})),j.forEach((function(e){var t=jt(e.threadId||""),n=y.find(t);n.replies=[].concat(Object(d["a"])(n.replies),[e]),n.replies=ye.a.uniqBy(n.replies,"id")})),k=function(e){return e.userId===t.hlUserId},x=w.filter(k),w=w.filter((function(e){return!k(e)})),S=[].concat(Object(d["a"])(x),Object(d["a"])(y),Object(d["a"])(w)),S.forEach((function(e){e&&e.replies&&e.replies.forEach((function(e){return e.ignoreShowmore=!0}))})),r(q.set,S),n.abrupt("return",Promise.resolve(S));case 31:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.fetchReplyComment,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b,v,g,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,o=t.filterTags,i=t.commentsOrder,s='{_or: [{id: {_eq: "'.concat(t.hlCommentId,'"}} {replies: {id: {_eq: "').concat(t.hlCommentId,'"}}}]}'),n.next=5,Ls.fetch(o,i,"",s,"");case 5:if(c=n.sent,u=Object(Ee["a"])(c,2),l=u[0],p=u[1],!l){n.next=11;break}return n.abrupt("return",Promise.reject(l));case 11:if(0!==(null===p||void 0===p?void 0:p.length)){n.next=13;break}return n.abrupt("return",Promise.resolve([]));case 13:return m=a[B.getRecords],f=jt(t.hlCommentId),b=p.find(f),v=p.find((function(e){return!f(e)})),g=[],v?(v.replies=[b],g.push(v)):g.push(b),h=[].concat(g,Object(d["a"])(m)),h=ye.a.uniqBy(h,"id"),h.forEach((function(e){e&&e.replies&&e.replies.forEach((function(e){return e.ignoreShowmore=!0}))})),r(q.set,h),n.abrupt("return",Promise.resolve(h));case 24:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.delete,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=function(){return(new Date).toISOString()},o={id:t.id,deletedAt:a()},n.next=5,Ls.delete(o);case 5:if(i=n.sent,s=Object(Ee["a"])(i,2),c=s[0],u=s[1],!c){n.next=11;break}return n.abrupt("return",Promise.reject(c));case 11:if(r(q.update,u),l=e.getters[B.getRecords],p=jt(u.threadId),m=l.find(p),m){n.next=17;break}return n.abrupt("return",Promise.reject());case 17:return console.log("parent of deleted element:",m),f=jt(u.id),b=m.replies.findIndex(f),b>-1&&(m.replies[b]=u,m.replies=Object(d["a"])(m.replies),r(q.update,m)),n.abrupt("return",Promise.resolve(u));case 22:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.upvote,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,Ls.upvote(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return n.next=11,r(G.updateSoft,s);case 11:return n.abrupt("return",Promise.resolve(s));case 12:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.upvoteReset,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,Ls.upvoteReset(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return n.next=11,r(G.updateSoft,s);case 11:return n.abrupt("return",Promise.resolve(s));case 12:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.downvote,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,Ls.downvote(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return n.next=11,r(G.updateSoft,s);case 11:return n.abrupt("return",Promise.resolve(s));case 12:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.downvoteReset,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,Ls.downvoteReset(t);case 3:if(a=n.sent,o=Object(Ee["a"])(a,2),i=o[0],s=o[1],!i){n.next=9;break}return n.abrupt("return",Promise.reject(i));case 9:return n.next=11,r(G.updateSoft,s);case 11:return n.abrupt("return",Promise.resolve(s));case 12:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Es,G.report,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ls.report(t);case 2:if(n=e.sent,r=Object(Ee["a"])(n,2),a=r[0],o=r[1],!a){e.next=8;break}return e.abrupt("return",Promise.reject(a));case 8:return e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e)})))()})),Object(N["a"])(Es,G.fetchReplies,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b,v;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.replies||[],t.computedIsNew&&(a=[]),o=a.length>0,i="",s=function(e){return!e.ignoreShowmore},c=a.filter(s),!t.isDemoingReply&&o&&c.length>0&&(u=c[c.length-1],i='{createdAt: {_gte: "'.concat(u.createdAt,'"}}')),t.isDemoingReply&&(t.isDemoingReply=!1,r(q.update,t)),n.next=11,Ls.fetchReplies(t.id,i);case 11:if(l=n.sent,p=Object(Ee["a"])(l,2),m=p[0],f=p[1],!m){n.next=17;break}return n.abrupt("return",Promise.reject(m));case 17:return o?(b=function(e){var t=jt(e.id);return!a.find(t)},v=f.filter(b),t.replies=[].concat(Object(d["a"])(a),Object(d["a"])(v))):t.replies=Object(d["a"])(f),t.replies=ye.a.sortBy(t.replies,"createdAt"),r(q.update,t),n.abrupt("return",Promise.resolve(f));case 21:case"end":return n.stop()}}),n)})))()})),Es)};function Vs(){var e=Object(bi["a"])(["\n        query fetch {\n          events_aggregate(where: { isRead: { _eq: false } }) {\n            aggregate {\n              count\n            }\n          }\n        }\n      "]);return Vs=function(){return e},e}function Bs(){var e=Object(bi["a"])(["\n        mutation update($ids: [uuid!]) {\n          update_events(_set: { isRead: true }, where: { id: { _in: $ids } }) {\n            returning {\n              id\n            }\n          }\n        }\n      "]);return Bs=function(){return e},e}function qs(){var e=Object(bi["a"])(["\n        query fetch {\n          events(\n            order_by: [{ isRead: asc }, { createdAt: desc }]\n            limit: ","\n            where: {\n              _and: [\n                ","\n              ]\n            }\n          ) {\n            ...Event\n          }\n        }\n        ","\n      "]);return qs=function(){return e},e}function Gs(){var e=Object(bi["a"])(["\n  fragment Event on events {\n    id\n    createdAt\n    type\n    commentId\n    isRead\n    initiator {\n      id\n      name\n      surname\n      nickname\n      img\n    }\n    comment {\n      ","\n    }\n    reply {\n      ","\n    }\n  }\n"]);return Gs=function(){return e},e}var zs,Ws,Hs,Ys,Ks=gi()(Gs(),Ds,Ds),Qs={fetch:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:dt,e.abrupt("return",Mi({noCache:!0,type:"query",gql:gi()(qs(),n,t,Ks),parseResponse:function(e){return e.events||[]}}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),markRead:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mi({variables:t,type:"mutation",gql:gi()(Bs()),parseResponse:function(e){return null===e||void 0===e?void 0:e.update_events}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),countUnread:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({noCache:!0,type:"query",gql:gi()(Vs()),parseResponse:function(e){return e.events_aggregate.aggregate.count||0}}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Js={namespaced:!0,state:{records:[],countUnread:0},getters:(zs={},Object(N["a"])(zs,J.getRecords,(function(e){return e.records})),Object(N["a"])(zs,J.getCountUnread,(function(e){return e.countUnread})),zs),mutations:(Ws={},Object(N["a"])(Ws,X.set,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.records=t})),Object(N["a"])(Ws,X.setCountUnread,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t<0)return e.countUnread=0;e.countUnread=t})),Object(N["a"])(Ws,X.addRecord,(function(e,t){e.records=[t].concat(Object(d["a"])(e.records))})),Object(N["a"])(Ws,X.update,(function(e,t){var n=jt(t.id),r=e.records.findIndex(n);-1===r?e.records=[].concat(Object(d["a"])(e.records),[t]):c["default"].set(e.records,r,t)})),Ws),actions:(Hs={},Object(N["a"])(Hs,Z.fetch,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,p,m,f,b,v,g,h,_,j;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.showMore,a=e.getters,o=e.commit,i=e.dispatch,s=a[J.getRecords],c=s[s.length-1],r||o(X.set),u="",r&&c&&(u='{createdAt: {_lte: "'.concat(c.createdAt,'"}}'),console.log(" > lastRecord:",c)),n.next=9,Qs.fetch(u);case 9:if(l=n.sent,p=Object(Ee["a"])(l,2),m=p[0],f=p[1],!m){n.next=15;break}return n.abrupt("return",Promise.reject(m));case 15:if(b=f,!r){n.next=22;break}if(v=function(e){var t=jt(e.id);return!s.find(t)},g=f.filter(v),b=[].concat(Object(d["a"])(s),Object(d["a"])(g)),0!==g.length){n.next=22;break}return n.abrupt("return",Promise.resolve([]));case 22:for(h=[],_=0;_<b.length;_++)j=b[_],j.comment&&j.reply&&(j.reply.user=j.initiator,j.comment.isDemoingReply=!0,j.comment.replies=[j.reply]),h.push(ye.a.cloneDeep(j));return o(X.set,h),i(Z.markRead,b),n.abrupt("return",Promise.resolve(b));case 27:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Hs,Z.updateComment,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.getters,o=a[J.getRecords],i=function(e){return e.commentId===t.id},s=o.find(i),s){n.next=6;break}return n.abrupt("return",Promise.resolve("No parent event"));case 6:return s.comment=t,r(X.update,s),n.abrupt("return",Promise.resolve(s));case 9:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Hs,Z.markRead,(function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getters,a=e.commit,o=function(e){return!e.isRead},i=function(e){return e.id},s=t.filter(o).map(i),0!==s.length){n.next=6;break}return n.abrupt("return",Promise.resolve());case 6:return n.next=8,Qs.markRead({ids:s});case 8:return c=r[J.getCountUnread],a(X.setCountUnread,c-s.length),n.abrupt("return",Promise.resolve());case 11:case"end":return n.stop()}}),n)})))()})),Object(N["a"])(Hs,Z.countUnread,(function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Qs.countUnread();case 3:if(r=t.sent,a=Object(Ee["a"])(r,2),o=a[0],i=a[1],!o){t.next=9;break}return t.abrupt("return",Promise.reject(o));case 9:return n(X.setCountUnread,i),t.abrupt("return",Promise.resolve(i));case 11:case"end":return t.stop()}}),t)})))()})),Hs)},Xs=n("bc3a"),Zs=n.n(Xs),ec=new fi["a"]({storage:window.localStorage,modules:["auth","events"],supportCircular:!0});c["default"].use(mi["a"]);var tc={},nc={},rc=(Ys={},Object(N["a"])(Ys,x.initApp,(function(e){var t=e.dispatch,n=e.rootGetters,r=n[k.extIsAuthUser];return r&&(t($.extFetchSubs,null,yt),t(k.extFetchUserDetails),t(ee.extCountUnread)),Promise.resolve()})),Object(N["a"])(Ys,x.resetAll,(function(e){var t=e.dispatch;t(k.extReset,null,yt)})),Object(N["a"])(Ys,x.myxios,(function(e,t){var n=t.url,r=t.data,a=t.hideError,o=t.options,i=t.headers;return new Promise((function(e,t){var c=n.path,u=n.method,l=null,d=Object(s["a"])(Object(s["a"])({},o),{},{headers:{}});if(i&&(d.headers=i),u===mo.get?l=Zs.a.get(c,d):u===mo.post?l=Zs.a.post(c,r,d):u===mo.put?l=Zs.a.put(c,r,d):u===mo.delete?l=Zs.a.delete(c,d):u===mo.patch&&(l=Zs.a.patch(c,r,d)),!l)return t();l.then((function(t){return e(t.data)})).catch((function(e){var n,r,o,i,s,c={message:(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||e.message,code:(null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.code)||e.statusCode,info:ye.a.omit((null===(s=e.response)||void 0===s?void 0:s.data)||{},["code","message"])};return a||console.log("request error: ",e.response),t(c)}))}))})),Ys),ac=new mi["a"].Store({state:{},getters:tc,mutations:nc,actions:rc,plugins:[ec.plugin],modules:{auth:ss,history:us,tags:js,comments:Ms,events:Js}});ac.subscribeAction((function(e){var t=gt.isStoreDebug,n=e.type,r="#ffffff",a="#0061b4",o="#2992ff",i="🌼",s=Object(N["a"])({},P.extPush,{color:"#4dc0ff",label:"Route Navigation",colorBorder:"#818cff",colorBg:"#111c42",icon:i});if(t){var c=s[e.type];c&&(n=c.label,r=c.color,a=c.colorBorder||"",o=c.colorBg||"",i=c.icon||i);var u="font-size: 20px;background: ".concat(o,"; color: ").concat(r,"; padding: 2px 16px 2px 16px;  border:3px solid ").concat(a,"; border-radius:5px;");console.log("%c".concat(i," ").concat(n," 💀"),u),e.payload&&console.log("🌼 Payload:",e.payload)}}));var oc=ac,ic=(n("5363"),n("ce5b")),sc=n.n(ic),cc=(n("bf40"),"#00cf83"),uc="mdi",lc="#1ea0ff",dc="#4c4c4c",pc="#297eff",mc="#00bfbf",fc="#00a2a2",bc={icons:{iconfont:uc},theme:{options:{customProperties:!0},dark:!1,themes:{light:{primary:lc,secondary:"#7f8285",tag:pc,accent:"#b71c1b",white:"#ffffff",subtoolbar:"#3b6eb4",primaryToolbar:"#315f9a",secondaryToolbar:"#4393f9",lighty:"#1e1e1e",lightyHl:"#000000",navbarBtnActive:cc,lightBlue:lc,textRegular:dc,rants:mc,rantsDark:fc},dark:{primary:"#333434",secondary:"#7f8285",accent:"#cc2531",white:"#ffffff",subtoolbar:"#3b6eb4",primaryToolbar:"#315f9a",secondaryToolbar:"#4393f9",lighty:"#1e1e1e",lightyHl:"#000000",navbarBtnActive:cc,lightBlue:lc,textRegular:dc,rants:mc,rantsDark:fc}}}};c["default"].use(sc.a);var vc=new sc.a(bc),gc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TheDrawer",{attrs:{drawer:e.drawer},on:{"update:drawer":[function(t){e.drawer=t},function(t){e.drawer=t}]}}),n("TheNavbar",{attrs:{drawer:e.drawer},on:{"update:drawer":[function(t){e.drawer=t},function(t){e.drawer=t}]}}),n("v-main",{staticClass:"content-scrollable mobile-no-padding shadow"},[n("router-view",{key:e.$route.name,attrs:{id:"main-content"}})],1),n("TheNavbarBottom")],1)},hc=[],_c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-navigation",{staticStyle:{position:"absolute"},attrs:{shift:""}},[n("v-btn",{attrs:{to:{name:e.Routes.comments.name},title:"Feed",exact:""}},[n("span",[e._v("All")]),n("v-icon",[e._v("mdi-earth")])],1),n("v-btn",{class:{"disable-events faded":!e.isLogged},attrs:{to:{name:e.Routes.comments.name,query:{feed:"true"}},title:"My Subscriptions"}},[n("span",[e._v("My Subs")]),n("v-icon",[e._v("mdi-checkbox-multiple-blank-circle")])],1),n("v-btn",{class:{"disable-events faded":!e.isLogged},staticStyle:{position:"relative"},attrs:{to:{name:e.Routes.events.name},title:"Feed"}},[n("span",[e._v("Notifications")]),n("v-icon",[e._v("mdi-bell-outline")]),e.getCountUnread>0?n("div",{staticClass:"v-icon notranslate ",staticStyle:{position:"absolute",left:"10px",top:"10px",width:"2rem",height:"2rem"}},[n("div",{staticClass:"count-unread"},[e._v(e._s(e.labelCountUnread))])]):e._e()],1),n("v-spacer"),n("v-btn",{class:{"disable-events faded":!e.isLogged},attrs:{to:{name:e.Routes.subscriptions.name},title:"Edit subscriptions to tag groups"}},[n("span",[e._v("Edit Subs")]),n("v-icon",[e._v("mdi-playlist-edit")])],1),e.user?n("v-btn",{attrs:{to:{name:e.Routes.profile.name,params:{userId:e.user.id}}}},[n("span",[e._v("My Profile")]),n("v-icon",[e._v("mdi-account")])],1):n("v-btn",{attrs:{to:{name:e.Routes.login.children.loginMain.name}},nativeOn:{click:function(t){return e.warnUnauthedProfile(t)}}},[n("span",[e._v("My Profile")]),n("v-icon",[e._v("mdi-account")])],1)],1)},jc=[],Oc=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.Routes=si,e}return Object(m["a"])(n,[{key:"warnUnauthedProfile",value:function(){this.$showSnack("To view your profile page, please authenticate"),this.vuexLogout()}},{key:"labelCountUnread",get:function(){return this.getCountUnread>=10?"9+":this.getCountUnread}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],Oc.prototype,"user",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],Oc.prototype,"isLogged",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(ee.getCountUnread))],Oc.prototype,"getCountUnread",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.logout))],Oc.prototype,"vuexLogout",void 0),Oc=Object(v["__decorate"])([Object(g["a"])({})],Oc);var yc=Oc,wc=yc,kc=(n("c23c"),Object(le["a"])(wc,_c,jc,!1,null,null,null)),xc=kc.exports,Sc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{staticClass:"lighty",attrs:{absolute:"",temporary:"",dark:"",width:"240px"},model:{value:e.isDrawerOpen,callback:function(t){e.isDrawerOpen=t},expression:"isDrawerOpen"}},[n("a",{staticClass:"company",on:{click:e.onGoto}},[n("div",[n("img",{attrs:{height:"45px",src:"/img/logo.png"}})]),n("span",{staticClass:"company__name"},[e._v("Comments")])]),n("v-list",[e._l(e.items,(function(t){return n("v-list-item",{key:t.text,staticClass:"drawer-item",class:e.isMenuActive(t.name)?"highlighted":"",attrs:{"active-class":"highlighted",height:"45px",exact:"",disabled:t.disabled},on:{click:t.onClick}},[n("v-list-item-action",[n("v-icon",{staticClass:"drawer-icon"},[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",{staticStyle:{"font-size":"1.2em"}},[e._v(" "+e._s(t.text)+" ")])],1)],1)})),n("v-divider"),e.isLogged?n("v-list-item",{staticClass:"drawer-item",attrs:{"active-class":"highlighted",height:"45px",disabled:e.isLoggingOut},on:{click:e.onLogout}},[n("v-list-item-action",[n("v-icon",{staticClass:"drawer-icon"},[e._v("mdi-logout")])],1),n("v-list-item-content",[n("v-list-item-title",{staticStyle:{"font-size":"1.2em"}},[e._v(" "+e._s(e.$txt.Logout())+" ")])],1)],1):e._e()],2)],1)},Cc=[],Rc=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.isLoggingOut=!1,e}return Object(m["a"])(n,[{key:"isMenuActive",value:function(e){var t=this.$route.name;return t===e}},{key:"onGoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return this.$router.push("/");var t=ye.a.isEmpty(this.$route.query);e.name===this.$route.name&&t||this.$router.push(e)}},{key:"onLogout",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoggingOut=!0,e.next=3,this.logout();case 3:this.isLoggingOut=!1,console.log("user is logged out?!! -> :"),this.$showSnack(this.$txt.logoutSuccess()),t=si.login.name,this.$router.push({name:t});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"items",get:function(){var e=this;return[{icon:"mdi-file-document",text:"Comments",name:"Comments",onClick:function(){return e.onGoto({name:si.home.name})}},{icon:"mdi-help",text:this.$txt.DevVersion(),name:"devVersion",onClick:function(){var e=gt.versionHash;alert(e)},disabled:!this.isLogged}]}},{key:"isDrawerOpen",get:function(){return this.drawer},set:function(e){this.$emit("update:drawer",e)}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],Rc.prototype,"isLogged",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])(k.logout))],Rc.prototype,"logout",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],Rc.prototype,"drawer",void 0),Rc=Object(v["__decorate"])([Object(g["a"])({components:{}})],Rc);var Uc=Rc,Tc=Uc,Ic=(n("6547d"),Object(le["a"])(Tc,Sc,Cc,!1,null,null,null)),Pc=Ic.exports,Ec=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"denavbar",attrs:{color:"#ffffff",fixed:"",flat:"",height:"74"}},[n("div",{staticClass:"denavbar__textfields"},[n("TheNavbarTags")],1),n("div",[n("v-btn",{staticClass:"ml-3",class:{"disable-events":e.isTagsSubscribed},attrs:{small:"",title:"Subscribe to these tags",color:e.isTagsSubscribed?"tag":"accent",disabled:!e.isLogged||0===e.tags.length,loading:e.savingSub,icon:""},on:{click:e.subscribeTags}},[e.isTagsSubscribed?n("v-icon",{attrs:{color:"tag lighten-2"}},[e._v(" mdi-checkbox-multiple-marked-circle ")]):n("v-icon",{attrs:{color:"tag"}},[e._v(" mdi-plus-circle-multiple ")])],1)],1)])},Ac=[],Dc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"the-navbar-tags d-flex align-center"},[n("v-combobox",{attrs:{label:"Type some tags",multiple:"",chips:"",outlined:"",solo:"",elevation:"0",color:"#aaaaaa","hide-details":"auto",disabled:e.isDisabled,loading:!!e.loading&&"primary"},scopedSlots:e._u([{key:"selection",fn:function(t){return[n("v-chip",e._b({key:JSON.stringify(t.item),attrs:{"input-value":t.selected,disabled:t.disabled,color:"tag",dark:""},on:{"click:close":function(e){return t.parent.selectItem(t.item)},click:function(n){return e.onClickTag(t.item)}}},"v-chip",t.attrs,!1),[n("span",{staticStyle:{"font-size":"1.2em","font-weight":"bold"}},[e._v(" "+e._s(t.item)+" ")])])]}}]),model:{value:e.tagsLocal,callback:function(t){e.tagsLocal=t},expression:"tagsLocal"}})],1)},Fc=[],Lc=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.debounceUpdateTags=ye.a.debounce(e.updateTags,150),e.query="",e.tagsLocal=[],e.loading=!1,e}return Object(m["a"])(n,[{key:"onTagsUpdate",value:function(e,t){var n=function(e){return e.length>=2&&e.match(/[0-9a-zA-Z]+/)},r=e.filter(n);if(!ye.a.isEqual(r,e))return this.tagsLocal=r;this.debounceUpdateTags(r,t)}},{key:"onRouteUpdate",value:function(e,t){var n=t.query,r=e.query;if(console.log("WATCH ROUTE : queryOld, queryNew",n,r),!ye.a.isEqual(n,r))return this.init();var a=t.query;this.$router.replace({query:a}),setTimeout((function(){ae.$emit(te.FetchComments)}),100)}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateTags",value:function(e,t){var n=this,r=Object(d["a"])(t).sort().map((function(e){return e.toUpperCase().trim()})),a=Object(d["a"])(e).sort().map((function(e){return e.toUpperCase().trim()}));if(!ye.a.isEqual(r,a)){this.loading=!0,setTimeout((function(){return n.loading=!1}),1200);var o=e.map((function(e){return e.toUpperCase().trim()}));this.tagsLocal=ye.a.uniq(o),this.saveToStore(this.tagsLocal),this.updateQuery()}}},{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query,n=t.tags,n&&0!=n.length?this.tagsLocal="string"===typeof n?[n]:n:(this.tagsLocal=[],this.saveToStore([])),r=150,e.next=6,Rt(r+100);case 6:ae.$emit(te.FetchComments);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveToStore",value:function(e){var t=Object(d["a"])(e).sort(),n=Object(d["a"])(this.tagsVuex).sort();ye.a.isEqual(t,n)||this.tagsSet(this.tagsLocal)}},{key:"onBlur",value:function(){0===this.query.length&&this.$emit("onFinish")}},{key:"updateQuery",value:function(){var e=Object(d["a"])(this.tagsLocal),t=this.$route.query,n=Object(s["a"])(Object(s["a"])({},t),{},{tags:e});"string"===typeof t.tags&&(t.tags=[t.tags]),!t.tags&&n.tags&&(t.tags=[]),ye.a.isEqual(t,n)||(this.$router.push({query:n}),ae.$emit(te.FetchComments))}},{key:"onClickTag",value:function(e){this.tagsLocal=[e]}},{key:"isDisabled",get:function(){var e=this.$route.name===si.events.name,t="true"===this.$route.query.feed,n=this.$route.name===si.comments.name&&t;return e||n}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getRecords))],Lc.prototype,"tagsVuex",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])($.set))],Lc.prototype,"tagsSet",void 0),Object(v["__decorate"])([Object(g["f"])("tagsLocal")],Lc.prototype,"onTagsUpdate",null),Object(v["__decorate"])([Object(g["f"])("$route")],Lc.prototype,"onRouteUpdate",null),Lc=Object(v["__decorate"])([Object(g["a"])({components:{}})],Lc);var $c=Lc,Nc=$c,Mc=(n("5351"),Object(le["a"])(Nc,Dc,Fc,!1,null,null,null)),Vc=Mc.exports,Bc=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.savingSub=!1,e.Routes=si,e}return Object(m["a"])(n,[{key:"subscribeTags",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.savingSub=!0,e.next=3,Ot(this.vuexSubscribeTags());case 3:if(t=e.sent,n=Object(Ee["a"])(t,2),r=n[0],n[1],this.savingSub=!1,!r){e.next=10;break}return e.abrupt("return");case 10:this.$showSnack("Subscribed to tag group");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isTagsSubscribed",get:function(){var e=this,t=!1;return this.subs.forEach((function(n){var r=function(e){var t=e.tagId;return t},a=n.subscriptions_tags.map(r);t=t||ye.a.isEqual(a,e.tags)})),t}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],Bc.prototype,"isLogged",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],Bc.prototype,"getUser",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getRecords))],Bc.prototype,"tags",void 0),Object(v["__decorate"])([h["a"].apply(void 0,Object(d["a"])($.subscribe))],Bc.prototype,"vuexSubscribeTags",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])($.getSubs))],Bc.prototype,"subs",void 0),Bc=Object(v["__decorate"])([Object(g["a"])({components:{TheNavbarTags:Vc}})],Bc);var qc=Bc,Gc=qc,zc=(n("b3ee"),Object(le["a"])(Gc,Ec,Ac,!1,null,null,null)),Wc=zc.exports,Hc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"navbar-options scrolled elevation-4",attrs:{color:"white",absolute:"","hide-on-scroll":"","scroll-target":"#main-content",height:"74"}},[e._v(" xx ")])},Yc=[],Kc=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);Kc=Object(v["__decorate"])([Object(g["a"])({components:{TheNavbarTags:Vc}})],Kc);var Qc=Kc,Jc=Qc,Xc=(n("6201"),Object(le["a"])(Jc,Hc,Yc,!1,null,null,null)),Zc=Xc.exports,eu=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.drawer=!1,e.activeBtn=!0,e}return Object(m["a"])(n,[{key:"mounted",value:function(){this.isMobile()&&(this.drawer=!1)}},{key:"isMobile",value:function(){var e=1265,t=window,n=document,r=n.documentElement,a=n.getElementsByTagName("body")[0],o=t.innerWidth||r.clientWidth||a.clientWidth;return o<e}}]),n}(g["e"]);eu=Object(v["__decorate"])([Object(g["a"])({components:{TheDrawer:Pc,TheNavbar:Wc,TheNavbarOptions:Zc,TheNavbarBottom:xc}})],eu);var tu=eu,nu=tu,ru=(n("b251"),Object(le["a"])(nu,gc,hc,!1,null,"550ef0b9",null)),au=ru.exports,ou=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-main",[n("v-container",{staticClass:"mobile-no-padding",attrs:{"fill-height":"",fluid:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":"",id:"fullscreen-layout"}},[n("router-view")],1)],1)],1)],1)},iu=[],su=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);su=Object(v["__decorate"])([Object(g["a"])({})],su);var cu=su,uu=cu,lu=(n("4053"),Object(le["a"])(uu,ou,iu,!1,null,null,null)),du=lu.exports,pu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},mu=[],fu=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(g["e"]);fu=Object(v["__decorate"])([Object(g["a"])({})],fu);var bu=fu,vu=bu,gu=Object(le["a"])(vu,pu,mu,!1,null,null,null),hu=gu.exports,_u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TheDrawer",{attrs:{drawer:e.drawer},on:{"update:drawer":[function(t){e.drawer=t},function(t){e.drawer=t}]}}),n("TheNavbarSubpage",{attrs:{drawer:e.drawer},on:{"update:drawer":[function(t){e.drawer=t},function(t){e.drawer=t}]}}),n("v-main",{staticClass:"content-scrollable mobile-no-padding shadow"},[n("router-view",{key:e.$route.name})],1),n("TheNavbarBottom")],1)},ju=[],Ou=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"the-navbar-subpage",class:{scrolled:e.windowTop>0},attrs:{color:"#ffffff",fixed:"",flat:"",height:"74"}},[n("div",[n("h2",{staticStyle:{color:"#666666"}},[e._v(e._s(e.pageTitle))])]),e.isLogged?e._e():n("LangSelector")],1)},yu=[],wu=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.windowTop=0,e}return Object(m["a"])(n,[{key:"mounted",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"beforeDestroy",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(){this.windowTop=window.top.scrollY}},{key:"canGoBack",get:function(){var e=this.$route.name;return e!==si.comments.name}},{key:"pageTitle",get:function(){return this.$route.meta.title}}]),n}(g["e"]);Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.isLogged))],wu.prototype,"isLogged",void 0),Object(v["__decorate"])([h["b"].apply(void 0,Object(d["a"])(k.getUser))],wu.prototype,"getUser",void 0),Object(v["__decorate"])([Object(g["d"])(Boolean)],wu.prototype,"drawer",void 0),wu=Object(v["__decorate"])([Object(g["a"])({components:{LangSelector:Ea,SortingPanel:Bt}})],wu);var ku=wu,xu=ku,Su=(n("32fd"),Object(le["a"])(xu,Ou,yu,!1,null,null,null)),Cu=Su.exports,Ru=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.drawer=!1,e.activeBtn=!0,e}return Object(m["a"])(n,[{key:"mounted",value:function(){this.isMobile()&&(this.drawer=!1)}},{key:"isMobile",value:function(){var e=1265,t=window,n=document,r=n.documentElement,a=n.getElementsByTagName("body")[0],o=t.innerWidth||r.clientWidth||a.clientWidth;return o<e}}]),n}(g["e"]);Ru=Object(v["__decorate"])([Object(g["a"])({components:{TheNavbarSubpage:Cu,TheNavbarBottom:xc,TheDrawer:Pc}})],Ru);var Uu=Ru,Tu=Uu,Iu=(n("5329"),Object(le["a"])(Tu,_u,ju,!1,null,"547616d2",null)),Pu=Iu.exports,Eu=n("7bb1"),Au=n("4c93"),Du=function(e){return String(Me.t(e))},Fu=function(){Object(Eu["c"])("required",Object(s["a"])(Object(s["a"])({},Au["f"]),{},{message:Du(xe.VeeRequired)})),Object(Eu["c"])("requiredTos",{validate:function(e){return!!e},message:Du(xe.VeeAcceptTos)}),Object(Eu["c"])("max",Object(s["a"])(Object(s["a"])({},Au["d"]),{},{message:Du(xe.VeeMax)})),Object(Eu["c"])("min",Object(s["a"])(Object(s["a"])({},Au["e"]),{},{message:Du(xe.VeeMin)})),Object(Eu["c"])("email",Object(s["a"])(Object(s["a"])({},Au["c"]),{},{message:Du(xe.VeeEmail)})),Object(Eu["c"])("alpha",Object(s["a"])(Object(s["a"])({},Au["a"]),{},{message:Du(xe.VeeAlpha)})),Object(Eu["c"])("alpha_num",Object(s["a"])(Object(s["a"])({},Au["b"]),{},{message:Du(xe.VeeAlphaNum)})),Object(Eu["c"])("truthy",{validate:function(e){return!!e},message:Du(xe.VeeTruthy)}),//! BAD TYPING
Object(Eu["c"])("password",{params:["target"],validate:function(e,t){var n=t.target;return e===n},message:Du(xe.VeePassword)}),//! BAD TYPING
Object(Eu["c"])("periodTo",{params:["target"],validate:function(e,t){var n=t.target;return e===n},message:'"Period To" is required'})},Lu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading&&0==e.records.length?n("div",{staticStyle:{position:"relative","min-height":"50vh"}},[n("Spinner")],1):e.records&&0!==e.records.length?n("v-flex",{staticClass:"items-list__container mt-0 ml-0 mr-0",attrs:{xs12:"","pa-0":"","ma-5":""}},[e.records.length>0?n("div",{staticClass:"elevation-0 items-list"},e._l(e.records,(function(t){return n(e.iterable,{key:t.id,tag:"component",attrs:{item:t,options:e.iterableOptions}})})),1):e._e()]):n("div",{staticClass:"cta-container"},[n("Cta",{attrs:{text:e.ctaText,icon:"mdi-emoticon-cool-outline"}})],1),(!e.loading||0!==e.records.length)&&e.isInit&&e.records.length>=e.recordsPerPage?n("div",[n("infinite-loading",{attrs:{distance:400},on:{infinite:e.onShowMore}},[n("div",{attrs:{slot:"spinner"},slot:"spinner"},[n("v-progress-circular",{staticClass:"mb-5",attrs:{color:"primary",indeterminate:"",size:20,width:2}})],1),n("div",{attrs:{slot:"no-more"},slot:"no-more"},[e.records.length>e.$config.pageSize?n("v-icon",{attrs:{size:"90",color:"#dddddd"}},[e._v(" mdi-flag ")]):e._e()],1),n("div",{attrs:{slot:"no-results"},slot:"no-results"})])],1):e._e()],1)},$u=[],Nu=n("e166"),Mu=n.n(Nu),Vu=function(){return{}},Bu=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.scrollerState=null,e.scrollerDebounce=!1,e.isInit=!1,e}return Object(m["a"])(n,[{key:"showmore",value:function(){return!0}},{key:"onLoadingFinish",value:function(e){e||(this.isInit=!0),!e&&this.scrollerState&&(this.isThreadEnd?this.scrollerState.complete():this.scrollerState.loaded())}},{key:"onShowMore",value:function(e){if(this.isThreadEnd)return e.complete();this.scrollerState=e,this.isInit&&this.showmore()}},{key:"loadingMore",get:function(){return this.loading&&this.records.length>0}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],Bu.prototype,"records",void 0),Object(v["__decorate"])([Object(g["d"])({default:!1})],Bu.prototype,"loading",void 0),Object(v["__decorate"])([Object(g["d"])()],Bu.prototype,"isThreadEnd",void 0),Object(v["__decorate"])([Object(g["d"])()],Bu.prototype,"recordsPerPage",void 0),Object(v["__decorate"])([Object(g["d"])({default:"No records yet"})],Bu.prototype,"ctaText",void 0),Object(v["__decorate"])([Object(g["d"])({default:gt.iterables.Comment})],Bu.prototype,"iterable",void 0),Object(v["__decorate"])([Object(g["d"])({default:Vu})],Bu.prototype,"iterableOptions",void 0),Object(v["__decorate"])([Object(g["b"])()],Bu.prototype,"showmore",null),Object(v["__decorate"])([Object(g["f"])("loading")],Bu.prototype,"onLoadingFinish",null),Bu=Object(v["__decorate"])([Object(g["a"])({components:{Cta:_a,Spinner:Rr,InfiniteLoading:Mu.a}})],Bu);var qu=Bu,Gu=qu,zu=(n("e749"),Object(le["a"])(Gu,Lu,$u,!1,null,null,null)),Wu=zu.exports,Hu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event ma-5 pa-5",class:{unread:!e.item.isRead}},[n("div",{staticClass:"mb-4"},[e.item.initiator?n("router-link",{attrs:{to:{name:e.Routes.profile.name,params:{userId:e.item.initiator.id}}}},[n("div",{staticClass:"user-nickname"},[e._v(" "+e._s(e.item.initiator.nickname)+" ")])]):n("span",{staticClass:"grey--text"},[e._v("Deleted")]),e.isUpvote?n("span",[e._v("upvoted your comment")]):n("span",[e._v("replied to your comment")]),n("span",{staticClass:"ago-date"},[e._v(" "+e._s(e._f("formatAgo")(e.item.createdAt))+" ")])],1),n("Comment",{attrs:{item:e.item.comment,options:{repliesAsRoot:!0}}})],1)},Yu=[],Ku=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.Routes=si,e}return Object(m["a"])(n,[{key:"isUpvote",get:function(){return"upvote"===this.item.type}}]),n}(g["e"]);Object(v["__decorate"])([Object(g["d"])()],Ku.prototype,"item",void 0),Ku=Object(v["__decorate"])([Object(g["a"])({name:"Event"})],Ku);var Qu=Ku,Ju=Qu,Xu=(n("899c3"),Object(le["a"])(Ju,Hu,Yu,!1,null,"c0986838",null)),Zu=Xu.exports,el=function(){var e;c["default"].component("Comment",ar),c["default"].component("Event",Zu),c["default"].config.productionTip=!1,c["default"].component("PlainLayout",hu),c["default"].component("FullscreenLayout",du),c["default"].component("DefaultLayout",au),c["default"].component("SubpageLayout",Pu),c["default"].prototype.$config=gt,c["default"].prototype.$txt=Object(s["a"])({},ke),c["default"].prototype.$showSnack=function(e,t){var n={text:e,icon:t};ae.$emit(te.ShowSnackbar,n)};var t=!1;window.addEventListener("popstate",(function(){oc.dispatch(P.extGoBack,!0),t=!0,setTimeout((function(){return t=!1}),300)})),di.beforeEach(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(r,a,o){var i,s,c,u,l,d,p,m,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t,t=!1,!s){n.next=6;break}return n.abrupt("return");case 6:c={name:r.name,query:r.query,params:r.params,isShallow:r.meta.isShallow},oc.dispatch(P.extPush,c);case 8:if(!r.meta.isShallow){n.next=10;break}return n.abrupt("return");case 10:if(e&&e(),u=r.matched.some((function(e){return e.meta.openAlways})),!u){n.next=14;break}return n.abrupt("return",o());case 14:if(l=r.meta.authPage,void 0===l&&(l=r.matched.some((function(e){return e.meta.authPage}))),d=!!oc.getters[k.extGetUser]||!!oc.getters[k.extGetToken],!l||!d){n.next=20;break}return p=si.home.name,n.abrupt("return",di.push({name:p}));case 20:if(m=r.matched.some((function(e){return e.meta.authedOnly})),l||d||!m){n.next=24;break}return f=si.login.children.loginMain.name,n.abrupt("return",di.push({name:f}));case 24:null===(i=document.getElementById("app-content"))||void 0===i||i.focus(),o();case 26:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}());var n="Rants.app",r="Rants - ";di.afterEach((function(e,t){c["default"].nextTick((function(){var t=e.meta.title||n;if("comments"===t){var a=e.query.tags;if(a&&0!==a.length){var o=Dt(a);t="".concat(r).concat(o)}else t="".concat(r,"Comments")}document.title=t}))})),c["default"].filter("formatAgo",(function(e){if(!e)return"";var t=Wt.a.utc(e).local();return t.fromNow()})),c["default"].filter("capitalize",(function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""})),c["default"].component("Lister",Wu),c["default"].component("ValidationProvider",Eu["b"]),c["default"].component("ValidationObserver",Eu["a"]),Fu(),new c["default"]({i18n:Me,vuetify:vc,router:di,store:oc,apolloProvider:$i,render:function(e){return e(Ue)},created:function(){var e=this,t=this.$store.getters[k.extGetLang];if(this.$i18n.locale=t,Object.keys(ke).forEach((function(t){if(t in ke){var n=xe[t];e.$txt[t]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Me.t(n,e)}}})),oc.dispatch(k.extInitApollo),gt.env===gt.allowedEnv.chromeExtension){var n=document.querySelector("html");n&&(n.style.opacity="1")}},mounted:function(){e=function(){return ae.$emit(te.ShowLoader)}},methods:{}}).$mount("#app")};setTimeout(el,0)},d5c4:function(e,t,n){},d7c2:function(e,t,n){},db56:function(e,t,n){"use strict";n("9b10")},e06e:function(e,t,n){"use strict";n("13c3")},e603:function(e,t,n){"use strict";n("d5c4")},e749:function(e,t,n){"use strict";n("38b1")},ff09:function(e,t,n){}});